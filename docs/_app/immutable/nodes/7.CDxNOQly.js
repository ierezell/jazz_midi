import"../chunks/NZTpNUN0.js";import{p as Y,c as Z,aT as ee,k as v,as as C,f as b,a as j,s as p,d as l,t as D,b as h,aq as te,r as i,at as re,ad as w}from"../chunks/D14S_uxs.js";import{d as se,s as M}from"../chunks/Chha1ELk.js";import{p as oe,i as I}from"../chunks/DKDO6a7q.js";import{r as ae}from"../chunks/Bd7mbu-w.js";import{a as ne}from"../chunks/DXGofr_q.js";import{M as y,N as le}from"../chunks/CB_yojb1.js";import{B as ie}from"../chunks/CyUssLSY.js";function ce(k,c){const d=k.target;w(c,d.checked,!0)}var de=b('<div class="control-group svelte-qfr38k"><button class="debug-btn svelte-qfr38k"> </button> <button class="reset-btn svelte-qfr38k">Reset</button></div> <div class="control-group svelte-qfr38k"><label class="svelte-qfr38k"><input type="checkbox" class="svelte-qfr38k"/> Sequential Mode (play in order)</label></div>',1),ue=b('<div class="control-group svelte-qfr38k"><button class="reset-btn svelte-qfr38k">Reset</button></div>'),ve=b('<div class="completion svelte-qfr38k">ðŸŽ‰ Scale Completed!</div>'),fe=b('<div class="scale-controls svelte-qfr38k"><!></div> <div class="exercise-status svelte-qfr38k"><div class="progress svelte-qfr38k"> </div> <div class="mistakes svelte-qfr38k"> </div> <!></div>',1);function xe(k,c){Y(c,!0);let d=oe(c,"randomMode",3,!1),f=te(!0);function E(r){const t=le[r+"4"],e=[0,2,4,5,7,9,11].map(a=>t+a);return console.log(`Scale for ${r}4:`,e.map(a=>y[a])),e}function B(r){const s=E(r).map(e=>y[e]);return{title:`${r} Major Scale`,leftHandNotes:[],rightHandNotes:s.map(e=>[e])}}function G(r,t,s){return v(f)?H(r,t,s):W(r,t,s)}function H(r,t,s){const e=s.length,a=t[e];return r.noteNumber===a?e===t.length-1?{isCorrect:!0,message:"Perfect scale! ðŸŽµâœ¨"}:{isCorrect:!0,message:`Good! Note ${e+1}/${t.length}`}:{isCorrect:!1,message:`Wrong note! Expected ${y[a]?.slice(0,-1)||a.toString()} (note ${e+1})`}}function W(r,t,s){if(t.includes(r.noteNumber)){const e=s.filter(a=>t.includes(a));return e.length===t.length?{isCorrect:!0,message:"Perfect scale! ðŸŽµ"}:{isCorrect:!0,message:`Good! ${e.length}/${t.length} notes`}}else return{isCorrect:!1,message:"Wrong note!"}}function A(r,t){if(v(f))return r.length===t.length&&r.every((s,e)=>s===t[e]);{const s=[...new Set(r)],e=[...new Set(t)];return s.length===e.length&&s.every(a=>e.includes(a))}}function F(){d()&&c.onRandomComplete&&setTimeout(()=>{c.onRandomComplete()},1500)}{const r=(a,n=ee)=>{var P=fe(),q=j(P),O=l(q);{var z=o=>{var u=de(),g=j(u),m=l(g);m.__click=function(..._){n().toggleDebug?.apply(this,_)};var V=l(m);i(m);var X=p(m,2);X.__click=function(..._){n().resetExercise?.apply(this,_)},i(g);var R=p(g,2),$=l(R),N=l($);ae(N),N.__change=[ce,f],re(),i($),i(R),D(()=>M(V,`${n().debugMode?"Disable":"Enable"} Debug Mode`)),ne(N,()=>v(f),_=>w(f,_)),h(o,u)},J=o=>{var u=ue(),g=l(u);g.__click=function(...m){n().resetExercise?.apply(this,m)},i(u),h(o,u)};I(O,o=>{d()?o(J,!1):o(z)})}i(q);var T=p(q,2),x=l(T),K=l(x);i(x);var S=p(x,2),L=l(S);i(S);var Q=p(S,2);{var U=o=>{var u=ve();h(o,u)};I(Q,o=>{n().completed&&o(U)})}i(T),D(o=>{M(K,`Progress: ${o??""}%`),M(L,`Mistakes: ${n().mistakes??""}`)},[()=>Math.round(n().currentNotes.filter(o=>n().expectedNotes.includes(o)).length/n().expectedNotes.length*100)]),h(a,P)};let t=C(()=>d()?"Random Scale":"Scale Practice"),s=C(()=>d()?`Play the ${c.randomNote} major scale`:v(f)?"Play the scale notes in order":"Play all scale notes in any order"),e=C(()=>d()?c.randomNote:void 0);ie(k,{get exerciseTitle(){return v(t)},get exerciseDescription(){return v(s)},get initialSelectedNote(){return v(e)},get randomMode(){return d()},generateExpectedNotes:E,generateScoreProps:B,validateNoteEvent:G,isCompleted:A,customControls:!0,onExerciseComplete:F,children:r,$$slots:{default:!0}})}Z()}se(["click","change"]);export{xe as component};
