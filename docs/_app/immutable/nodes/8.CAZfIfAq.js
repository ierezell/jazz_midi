import"../chunks/NZTpNUN0.js";import{p as le,f as P,b as M,c as ce,aT as ve,d as u,a as Q,s as i,t as k,k as e,aq as y,b2 as de,R as G,r as c}from"../chunks/Bz4zNOrf.js";import{d as ue,s as U}from"../chunks/CJmofs9R.js";import{i as X}from"../chunks/CYH6PDW9.js";import{e as pe,M as B,N as q,i as _e}from"../chunks/BclH9Fha.js";import{i as Y,f as Z,b as fe}from"../chunks/DlE_GaT1.js";import{p as he}from"../chunks/B0P8QQ_V.js";import{B as ge,a as me,c as D}from"../chunks/DLRTzOat.js";function Ce(z,f,h){const t=z.target;G(f,parseInt(t.value),!0),h()}function qe(z,f,h){const t=z.target;G(f,t.value,!0),h()}var ze=P('<div class="control-group svelte-1qz769a"><label for="inversion" class="svelte-1qz769a">Inversion:</label> <select id="inversion" class="svelte-1qz769a"><option class="svelte-1qz769a">Root</option><option class="svelte-1qz769a">1st</option><option class="svelte-1qz769a">2nd</option><option class="svelte-1qz769a">3rd</option></select></div> <div class="control-group svelte-1qz769a"><label for="voicing" class="svelte-1qz769a">Voicing:</label> <select id="voicing" class="svelte-1qz769a"><option class="svelte-1qz769a">Full</option><option class="svelte-1qz769a">Left Hand</option><option class="svelte-1qz769a">Right Hand</option><option class="svelte-1qz769a">Split</option></select></div>',1),be=P("<div> </div>"),$e=P('<div class="completion svelte-1qz769a">ðŸŽ‰ ii-V-I Completed!</div>'),xe=P('<div class="progression-controls svelte-1qz769a"><!> <div class="chord-progress svelte-1qz769a"></div></div> <div class="exercise-status svelte-1qz769a"><div class="current-chord svelte-1qz769a"> </div> <!></div>',1),Re=P('<div class="progression-exercise svelte-1qz769a"><!></div>');function je(z,f){le(f,!0);let h=he(f,"randomMode",3,!1),t=y(0),p=y(0),b=y("full");function T(){G(t,0)}function H(r){const o=q[r+"4"]+2,s=q[r+"4"]+7,v=q[r+"4"],n=D(o,"min7",e(p)),d=D(s,"7",e(p)),x=D(v,"maj7",e(p));return[n,d,x][e(t)]}function ee(r){const o=H(r);return[o.root,o.third,o.fifth,o.seventh].filter(s=>s!=null)}function oe(r,o,s,v){if(s.includes(o.noteNumber)){const n=v.filter(x=>s.includes(x)).length,d=s.length;return n===d?e(t)<2?(setTimeout(()=>{de(t)},1e3),{isCorrect:!0,message:S()}):{isCorrect:!0,message:S()}:{isCorrect:!0,message:`Good! ${n}/${d} notes for ${$(r)[e(t)]}`}}return{isCorrect:!1,message:`Wrong note! Expected: ${$()[e(t)]}`}}function te(r,o){if(o.length===0)return!1;const n=r.filter(d=>o.includes(d)).length===o.length&&e(t)===2;return n&&setTimeout(()=>{T()},2e3),n}function $(r="C"){const o=q[r+"4"]+2,s=q[r+"4"]+7,v=q[r+"4"];return[`${B[o].slice(0,-1)}m7`,`${B[s].slice(0,-1)}7`,`${B[v].slice(0,-1)}maj7`]}function S(){return e(t)<2?`Great! Now play ${$()[e(t)+1]}`:"Perfect! Complete ii-V-I progression! ðŸŽµâœ¨"}function re(r){const o=H(r);return{...me(o,e(b)),selectedNote:r}}var V=Re(),se=u(V);ge(se,{exerciseTitle:"ii-V-I Progression",exerciseDescription:"Play each chord in sequence: ii7 - V7 - Imaj7",get randomMode(){return h()},generateExpectedNotes:ee,generateScoreProps:re,validateNoteEvent:oe,isCompleted:te,children:(o,s=ve)=>{var v=xe(),n=Q(v),d=u(n);{var x=l=>{var g=ze(),m=Q(g),a=i(u(m),2);a.__change=[Ce,p,T];var C=u(a);C.value=C.__value=0;var R=i(C);R.value=R.__value=1;var I=i(R);I.value=I.__value=2;var W=i(I);W.value=W.__value=3,c(a);var A;Y(a),c(m);var J=i(m,2),_=i(u(J),2);_.__change=[qe,b,T];var N=u(_);N.value=N.__value="full";var j=i(N);j.value=j.__value="left-hand";var F=i(j);F.value=F.__value="right-hand";var K=i(F);K.value=K.__value="split",c(_);var O;Y(_),c(J),k(()=>{A!==(A=e(p))&&(a.value=(a.__value=e(p))??"",Z(a,e(p))),O!==(O=e(b))&&(_.value=(_.__value=e(b))??"",Z(_,e(b)))}),M(l,g)};X(d,l=>{h()||l(x)})}var E=i(d,2);pe(E,21,()=>$(s().selectedNote),_e,(l,g,m)=>{var a=be();let C;var R=u(a,!0);c(a),k(I=>{C=fe(a,1,"chord-indicator svelte-1qz769a",null,C,I),U(R,e(g))},[()=>({active:m===e(t),completed:m<e(t)})]),M(l,a)}),c(E),c(n);var L=i(n,2),w=u(L),ae=u(w);c(w);var ie=i(w,2);{var ne=l=>{var g=$e();M(l,g)};X(ie,l=>{s().completed&&l(ne)})}c(L),k(l=>U(ae,`Current: ${l??""} (${e(t)+1}/3)`),[()=>$(s().selectedNote)[e(t)]]),M(o,v)},$$slots:{default:!0}}),c(V),M(z,V),ce()}ue(["change"]);export{je as component};
