import"../chunks/NZTpNUN0.js";import{d as Ee,o as Ze,a as et,s as y}from"../chunks/DutP5Gvj.js";import{p as De,f as T,d as a,t as H,b as N,c as Re,s as n,D as L,r as o,z as b,A as tt,k as e,B as u,C as m,E as ot}from"../chunks/C7Lc0MXo.js";import{p as st,i as ge}from"../chunks/DSSW3rDz.js";import{e as ze,i as Se,A as at,b as rt,c as nt,N as lt}from"../chunks/KCvTrXcA.js";import{r as it,c as vt,a as K,i as V,b as J}from"../chunks/9IstWcpU.js";import{B as dt,m as he,a as ue}from"../chunks/B0lqf9OI.js";const _e={root:"#e74c3c",third:"#f39c12",fifth:"#3498db",seventh:"#9b59b6",extension:"#2ecc71",none:"transparent"};function ct(c,r){const l=c%12,v=r.root%12,_=r.third%12,h=r.fifth%12,p=r.seventh?r.seventh%12:null;return l===v?"root":l===_?"third":l===h?"fifth":p!==null&&l===p?"seventh":"none"}function ht(c,r=_e){return r[c]}function ut(c,r,l,v=_e){const _=[];for(let h=c;h<=r;h++){const p=ct(h,l),C=ht(p,v);_.push({noteNumber:h,role:p,color:C})}return _}function gt(c,r){r.onToggle(!r.showChordTones)}var _t=T('<div class="color-legend svelte-gyk12o"><div class="legend-item svelte-gyk12o"><div class="color-dot svelte-gyk12o"></div> <span class="svelte-gyk12o">Root</span></div> <div class="legend-item svelte-gyk12o"><div class="color-dot svelte-gyk12o"></div> <span class="svelte-gyk12o">Third</span></div> <div class="legend-item svelte-gyk12o"><div class="color-dot svelte-gyk12o"></div> <span class="svelte-gyk12o">Fifth</span></div> <div class="legend-item svelte-gyk12o"><div class="color-dot svelte-gyk12o"></div> <span class="svelte-gyk12o">Seventh</span></div></div>'),pt=T('<div class="chord-tone-toggle svelte-gyk12o"><label class="toggle-container svelte-gyk12o"><input type="checkbox" aria-label="Show chord tone colors" class="svelte-gyk12o"/> <span class="toggle-switch svelte-gyk12o"></span> <span class="toggle-label svelte-gyk12o">Show Chord Tones</span></label> <!></div>');function ft(c,r){De(r,!0);let l=st(r,"colors",3,_e);var v=pt(),_=a(v),h=a(_);it(h),h.__change=[gt,r],L(4),o(_);var p=n(_,2);{var C=k=>{var M=_t(),z=a(M),S=a(z);L(2),o(z);var w=n(z,2),A=a(w);L(2),o(w);var P=n(w,2),U=a(P);L(2),o(P);var d=n(P,2),f=a(d);L(2),o(d),o(M),H(()=>{K(S,`background-color: ${l().root??""}`),K(A,`background-color: ${l().third??""}`),K(U,`background-color: ${l().fifth??""}`),K(f,`background-color: ${l().seventh??""}`)}),N(k,M)};ge(p,k=>{r.showChordTones&&k(C)})}o(v),H(()=>vt(h,r.showChordTones)),N(c,v),Re()}Ee(["change"]);function mt(c,r,l){const v=c.target;u(r,v.value,!0),l()}function kt(c,r,l){const v=c.target;u(r,parseInt(v.value),!0),l()}function xt(c,r,l){const v=c.target;u(r,v.value,!0),l()}var bt=T('<div class="feedback svelte-1vxhkdw" role="alert"> </div>'),wt=(c,r)=>r(c.target.value),yt=T("<option> </option>"),Ct=T("<option> </option>"),Nt=T('<div class="completion svelte-1vxhkdw">ðŸŽ‰ Exercise Completed!</div>'),Tt=T('<div class="exercise-status svelte-1vxhkdw"><div class="progress"> </div> <div class="mistakes"> </div> <!></div>'),Mt=T('<div class="chord-exercise svelte-1vxhkdw"><header class="exercise-header svelte-1vxhkdw"><h1 class="svelte-1vxhkdw">Jazz Chord Practice</h1> <p class="description svelte-1vxhkdw">Practice playing jazz chords with different voicings and inversions</p></header> <!> <div class="chord-info svelte-1vxhkdw"><h2 class="chord-display svelte-1vxhkdw"> </h2> <div class="chord-details svelte-1vxhkdw"><span> </span> <span> </span></div></div> <div class="controls svelte-1vxhkdw"><div class="control-group svelte-1vxhkdw"><label for="note-select" class="svelte-1vxhkdw">Key:</label> <select id="note-select" class="svelte-1vxhkdw"></select></div> <div class="control-group svelte-1vxhkdw"><label for="chord-type" class="svelte-1vxhkdw">Chord Type:</label> <select id="chord-type" class="svelte-1vxhkdw"></select></div> <div class="control-group svelte-1vxhkdw"><label for="inversion" class="svelte-1vxhkdw">Inversion:</label> <select id="inversion" class="svelte-1vxhkdw"><option>Root</option><option>1st</option><option>2nd</option><option>3rd</option></select></div> <div class="control-group svelte-1vxhkdw"><label for="voicing" class="svelte-1vxhkdw">Voicing:</label> <select id="voicing" class="svelte-1vxhkdw"><option>Full</option><option>Left Hand</option><option>Right Hand</option><option>Split</option></select></div> <div class="control-group svelte-1vxhkdw"><button class="svelte-1vxhkdw">Reset</button> <button class="svelte-1vxhkdw"> </button></div> <div class="control-group chord-tone-controls svelte-1vxhkdw"><!></div></div> <!></div>');function Ht(c,r){De(r,!0);let l=b("C"),v=b("maj7"),_=b(0),h=b("full"),p=b(tt([])),C=m(()=>e(p).map(t=>t.noteNumber)),k=b(0),M=b(0),z=b(!1),S=b(!1),w=b(""),A=b(!1),P=m(()=>e(k)>=3),U=m(()=>e(k)>=6),d=m(()=>{const t=e(l)+"4",s=lt[t];return nt(s,e(v),e(_))}),f=m(()=>{const t=[e(d).root,e(d).third,e(d).fifth,e(d).seventh].filter(s=>s!==void 0);switch(e(h)){case"full":return t;case"left-hand":return[e(d).root,e(d).seventh].filter(g=>g!==void 0);case"right-hand":return[e(d).third,e(d).fifth];case"split":const s=[e(d).root-12,(e(d).seventh||e(d).root)-12].filter(g=>g>=24),i=[e(d).third,e(d).fifth];return[...s,...i];default:return t}}),q=m(()=>{if(e(f).length===0)return{middleC:60,octaves:2};const t=Math.min(...e(f)),s=Math.max(...e(f)),i=Math.floor((t-12)/12)*12+12,x=Math.ceil((s+12)/12)*12-i,B=Math.max(2,Math.ceil(x/12)),F=i+Math.floor(B*12/2)-6;return{middleC:Math.max(24,F),octaves:Math.min(7,B)}}),Oe=m(()=>{if(e(f).length===0)return!1;const t=[...e(C)].sort(),s=[...e(f)].sort();return t.length===s.length&&t.every((i,g)=>i===s[g])}),I=m(()=>{const t={major:"",minor:"m",maj7:"maj7",min7:"m7",7:"7",dom7:"7",diminished:"Â°",dim7:"Â°7","half-dim7":"Ã¸",augmented:"+",sus2:"sus2",sus4:"sus4"};return{name:`${e(l)} ${e(v)}`,symbol:e(l)+t[e(v)],voicing:e(h),inversion:e(_)}}),$e=m(()=>{const{middleC:t,octaves:s}=e(q),i=t-Math.floor(s/2)*12,g=i+s*12;return ut(i,g,{root:e(d).root,third:e(d).third,fifth:e(d).fifth,seventh:e(d).seventh})});function He(t){u(p,[...e(p),t],!0),e(f).includes(t.noteNumber)?(G("Correct!"),ue.playSound?.("success")):(ot(k),G("Try again!"),ue.playSound?.("error")),e(Oe)&&Ie()}function Pe(t){u(p,e(p).filter(s=>s.noteNumber!==t.noteNumber),!0)}function G(t,s){u(w,t,!0),setTimeout(()=>{u(w,"")},2e3)}function Ie(){u(z,!0),Date.now()-e(M),Math.round((e(f).length-e(k))/e(f).length*100),G("Exercise completed!"),ue.playSound?.("success")}function j(){u(p,[],!0),u(k,0),u(z,!1),u(w,""),u(M,Date.now(),!0)}function je(t){u(l,t,!0),j()}function Ae(t){u(A,t,!0)}function pe(){u(S,!e(S))}Ze(async()=>{await he.initialize(),he.setEventHandlers({onNoteOn:He,onNoteOff:Pe}),u(M,Date.now(),!0)}),et(()=>{he.cleanup()});let Fe=m(()=>({noteEvents:e(p),midiNotes:e(C),selectedNote:e(l),debugMode:e(S),errorCount:e(k),showNoteNames:e(P),showKeyboard:e(U),feedbackMessage:e(w),completed:!1})),Le=m(()=>({title:e(I).symbol,showClefs:!0}));var Q=Mt(),fe=n(a(Q),2);{var Be=t=>{var s=bt(),i=a(s,!0);o(s),H(()=>y(i,e(w))),N(t,s)};ge(fe,t=>{e(w)&&t(Be)})}var W=n(fe,2),X=a(W),Ke=a(X,!0);o(X);var me=n(X,2),Y=a(me),Ve=a(Y);o(Y);var ke=n(Y,2),Je=a(ke);o(ke),o(me),o(W);var Z=n(W,2),ee=a(Z),E=n(a(ee),2);E.__change=[wt,je],ze(E,21,()=>at,Se,(t,s)=>{var i=yt(),g=a(i,!0);o(i);var x={};H(()=>{y(g,e(s)),x!==(x=e(s))&&(i.value=(i.__value=e(s))??"")}),N(t,i)}),o(E);var xe;V(E),o(ee);var te=n(ee,2),D=n(a(te),2);D.__change=[mt,v,j],ze(D,21,()=>rt,Se,(t,s)=>{var i=Ct(),g=a(i,!0);o(i);var x={};H(()=>{y(g,e(s)),x!==(x=e(s))&&(i.value=(i.__value=e(s))??"")}),N(t,i)}),o(D);var be;V(D),o(te);var oe=n(te,2),R=n(a(oe),2);R.__change=[kt,_,j];var se=a(R);se.value=se.__value=0;var ae=n(se);ae.value=ae.__value=1;var re=n(ae);re.value=re.__value=2;var we=n(re);we.value=we.__value=3,o(R);var ye;V(R),o(oe);var ne=n(oe,2),O=n(a(ne),2);O.__change=[xt,h,j];var le=a(O);le.value=le.__value="full";var ie=n(le);ie.value=ie.__value="left-hand";var ve=n(ie);ve.value=ve.__value="right-hand";var Ce=n(ve);Ce.value=Ce.__value="split",o(O);var Ne;V(O),o(ne);var de=n(ne,2),Te=a(de);Te.__click=j;var ce=n(Te,2);ce.__click=pe;var Ue=a(ce);o(ce),o(de);var Me=n(de,2),qe=a(Me);ft(qe,{get showChordTones(){return e(A)},onToggle:Ae}),o(Me),o(Z);var Ge=n(Z,2);{let t=m(()=>({midiNotes:e(C),middleC:e(q).middleC,octaves:e(q).octaves,interactive:e(S),showLabels:e(P),chordToneInfo:e($e),showChordTones:e(A)}));dt(Ge,{get exerciseState(){return e(Fe)},exerciseTitle:"Current Chord",get expectedNotes(){return e(f)},get scoreProps(){return e(Le)},get keyboardProps(){return e(t)},onDebugToggle:pe,onReset:j,customControls:!0,children:(s,i)=>{var g=Tt(),x=a(g),B=a(x);o(x);var F=n(x,2),Qe=a(F);o(F);var We=n(F,2);{var Xe=$=>{var Ye=Nt();N($,Ye)};ge(We,$=>{e(z)&&$(Xe)})}o(g),H($=>{y(B,`Progress: ${$??""}%`),y(Qe,`Mistakes: ${e(k)??""}`)},[()=>Math.round(e(C).filter($=>e(f).includes($)).length/e(f).length*100)]),N(s,g)},$$slots:{default:!0}})}o(Q),H(()=>{y(Ke,e(I).symbol),y(Ve,`Voicing: ${e(I).voicing??""}`),y(Je,`Inversion: ${e(I).inversion===0?"Root":e(I).inversion===1?"1st":e(I).inversion===2?"2nd":"3rd"}`),xe!==(xe=e(l))&&(E.value=(E.__value=e(l))??"",J(E,e(l))),be!==(be=e(v))&&(D.value=(D.__value=e(v))??"",J(D,e(v))),ye!==(ye=e(_))&&(R.value=(R.__value=e(_))??"",J(R,e(_))),Ne!==(Ne=e(h))&&(O.value=(O.__value=e(h))??"",J(O,e(h))),y(Ue,`${e(S)?"Hide":"Show"} Debug`)}),N(c,Q),Re()}Ee(["change","click"]);export{Ht as component};
