import{f as K,a as y,t as $,c as me}from"../chunks/CX1yysGK.js";import{p as Ce,J as N,K as F,L as ye,a as be,M as b,j as e,f as P,s as a,N as ee,c as g,r as u,t as R}from"../chunks/Dpgs3mFS.js";import{d as xe,s as S}from"../chunks/dcQTQ1xv.js";import{e as Me,i as Te}from"../chunks/D0omyc6-.js";import{i as k}from"../chunks/FFlPY-wq.js";import{i as z,s as G}from"../chunks/gBQeIBP2.js";import{B as He,a as Ne,b as Re,g as Ee}from"../chunks/CedzibQm.js";import{e as te,N as we,D as Ae,b as De}from"../chunks/DgZpB3qr.js";var Ie=K("<option> </option>"),Le=K('<div class="control-group svelte-b6xay4"><label for="chord-type" class="svelte-b6xay4">Chord Type:</label> <select id="chord-type"></select></div> <div class="control-group svelte-b6xay4"><label for="inversion" class="svelte-b6xay4">Inversion:</label> <select id="inversion"><option>Root</option><option>1st</option><option>2nd</option><option>3rd</option></select></div> <div class="control-group svelte-b6xay4"><label for="voicing" class="svelte-b6xay4">Voicing:</label> <select id="voicing"><option>Full Right Hand</option><option>Full Left Hand</option><option>1 & 7 Left / 3 & 5 Right</option><option>1 & 5 Left / 3 & 7 Right</option><option>Rootless A (3-5-7-9)</option><option>Rootless B (7-9-3-5)</option></select></div>',1),Ve=K('<!> <div class="controls svelte-b6xay4"><!></div>',1);function Ke(oe,r){Ce(r,!0);const ae="Play the notes of the displayed chord on your MIDI keyboard. Try to match the voicing and inversion shown.";let W=["maj7","min7","7","dom7","half-dim7","dim7"],_=N(F(r.chordType??(r.randomMode?W[Math.floor(Math.random()*W.length)]:"maj7"))),f=N(F(r.inversion??(r.randomMode?Math.floor(Math.random()*4):0))),i=N(F(r.voicing??(r.randomMode?te[Math.floor(Math.random()*te.length)]:"full-right"))),T=N(!1);function re(){b(T,!1)}function ne(o){const t=o+Ae,n=we[t],c=Ne(n,e(_),e(f));return Re(c,e(i))}function le(o,t,n){const c=n.map(H=>H%12),l=t.noteNumber%12;if(c.includes(l)){if(n.includes(t.noteNumber))return{isCorrect:!0,message:"Correct chord tone!",collected:!0,resetCollected:!1};if(e(i).startsWith("rootless"))return{isCorrect:!0,message:"Correct chord tone (octave ignored)!",collected:!0,resetCollected:!1}}return{isCorrect:!1,message:"Not a chord tone. Try again!",collected:!1,resetCollected:!0}}function se(o){const t=o.target;b(_,t.value,!0)}function ie(o){const t=o.target;b(f,parseInt(t.value),!0)}function ce(o){const t=o.target;b(i,t.value,!0)}function ve(o){try{const t=Ee(o,e(_),e(f),e(i));return console.debug("Generated score data:",{selectedNote:o,chordType:e(_),voicing:e(i),inversion:e(f),scoreData:t}),{leftHand:t.leftHand,rightHand:t.rightHand,selectedNote:o}}catch(t){return console.error("Error generating score data:",t),{selectedNote:"C",leftHand:[[]],rightHand:[["C4","E4","G4"]]}}}function de(o,t){if(e(i).startsWith("rootless")){const n=new Set(o.map(l=>l%12)),c=new Set(t.map(l=>l%12));return n.size===c.size&&[...n].every(l=>c.has(l))}return o.length===t.length&&o.every(n=>t.includes(n))}He(oe,{get randomMode(){return r.randomMode},generateExpectedNotes:ne,generateScoreProps:ve,validateNoteEvent:le,isCompleted:de,onReset:re,get onComplete(){return r.onComplete},get initialNote(){return r.rootKey},description:ae,children:(t,n=ye)=>{const c=ee(()=>e(T)),l=ee(()=>n().completed);var H=Ve(),J=P(H);{var ue=s=>{var d=$();R(()=>S(d,b(T,!0))),y(s,d)},_e=s=>{var d=me(),x=P(d);{var v=m=>{var C=$();R(()=>S(C,b(T,!1))),y(m,C)};k(x,m=>{!e(l)&&e(c)&&m(v)},!0)}y(s,d)};k(J,s=>{e(l)&&!e(c)?s(ue):s(_e,!1)})}var O=a(J,2),fe=g(O);{var he=s=>{var d=Le(),x=P(d),v=a(g(x),2);v.__change=se,Me(v,21,()=>De,Te,(pe,B)=>{var M=Ie(),ge=g(M,!0);u(M);var Z={};R(()=>{S(ge,e(B)),Z!==(Z=e(B))&&(M.value=(M.__value=e(B))??"")}),y(pe,M)}),u(v);var m;z(v),u(x);var C=a(x,2),h=a(g(C),2);h.__change=ie;var E=g(h);E.value=E.__value=0;var w=a(E);w.value=w.__value=1;var A=a(w);A.value=A.__value=2;var U=a(A);U.value=U.__value=3,u(h);var q;z(h),u(C);var Q=a(C,2),p=a(g(Q),2);p.__change=ce;var D=g(p);D.value=D.__value="full-right";var I=a(D);I.value=I.__value="full-left";var L=a(I);L.value=L.__value="1735";var V=a(L);V.value=V.__value="1537";var j=a(V);j.value=j.__value="rootless-a";var X=a(j);X.value=X.__value="rootless-b",u(p);var Y;z(p),u(Q),R(()=>{m!==(m=e(_))&&(v.value=(v.__value=e(_))??"",G(v,e(_))),q!==(q=e(f))&&(h.value=(h.__value=e(f))??"",G(h,e(f))),Y!==(Y=e(i))&&(p.value=(p.__value=e(i))??"",G(p,e(i)))}),y(s,d)};k(fe,s=>{r.randomMode||s(he)})}u(O),y(t,H)},$$slots:{default:!0}}),be()}xe(["change"]);export{Ke as component};
