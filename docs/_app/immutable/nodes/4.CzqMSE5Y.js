import"../chunks/NZTpNUN0.js";import{p as le,ap as x,R as w,g as se,k as e,c as de,aU as ce,aq as ve,f as q,a as W,s as r,d as p,r as l,b as j,as as ue,t as A,S as H}from"../chunks/wFTEGHnI.js";import{d as he,s as X}from"../chunks/BJdPA1W9.js";import{i as Y}from"../chunks/DB4UBEnh.js";import{d as Z,N as fe,e as _e,i as ge,a as pe}from"../chunks/M4Hk-hxN.js";import{i as B,g as G}from"../chunks/BBAnfavV.js";import{B as me,g as Ce,c as Me}from"../chunks/CL49KPEd.js";function be(s,t){const i=s.target;H(t,i.value,!0)}function ye(s,t){const i=s.target;H(t,parseInt(i.value),!0)}function xe(s,t){const i=s.target;H(t,i.value,!0)}var je=q("<option> </option>"),He=q('<div class="control-group svelte-t0jkd5"><label for="chord-type" class="svelte-t0jkd5">Chord Type:</label> <select id="chord-type"></select></div> <div class="control-group svelte-t0jkd5"><label for="inversion" class="svelte-t0jkd5">Inversion:</label> <select id="inversion"><option>Root</option><option>1st</option><option>2nd</option><option>3rd</option></select></div> <div class="control-group svelte-t0jkd5"><label for="voicing" class="svelte-t0jkd5">Voicing:</label> <select id="voicing"><option>Full</option><option>Left Hand</option><option>Right Hand</option><option>Split</option></select></div>',1),Te=q('<!> <div class="controls svelte-t0jkd5"><!></div>',1);function Pe(s,t){le(t,!0);let i=["maj7","min7","7","dom7","half-dim7","dim7"],d=x(w(t.chordType??(t.randomMode?i[Math.floor(Math.random()*i.length)]:"maj7"))),c=x(w(t.inversion??(t.randomMode?Math.floor(Math.random()*4):0))),v=x(w(t.voicing??(t.randomMode?Z[Math.floor(Math.random()*Z.length)]:"full"))),T=x(!1);se(()=>{e(T)&&t.onComplete&&t.onComplete()});function $(n){const a=n+"4",u=fe[a],o=Me(u,e(d),e(c)),M=[o.root,o.third,o.fifth,o.seventh].filter(m=>m!==void 0);switch(e(v)){case"full":return M;case"left-hand":return[o.root,o.seventh].filter(C=>C!==void 0);case"right-hand":return[o.third,o.fifth];case"split":const m=[o.root-12,(o.seventh||o.root)-12].filter(C=>C>=24),k=[o.third,o.fifth];return[...m,...k];default:return M}}function ee(n,a,u){return u.includes(a.noteNumber)?{isCorrect:!0,message:"Correct chord tone!"}:{isCorrect:!1,message:"Not a chord tone. Try again!"}}function te(n){try{const a=Ce(n,e(d),e(c),e(v));return console.debug("Generated score data:",{selectedNote:n,chordType:e(d),voicing:e(v),inversion:e(c),scoreData:a}),{leftHand:a.leftHand,rightHand:a.rightHand,selectedNote:n}}catch(a){return console.error("Error generating score data:",a),{selectedNote:"C",leftHand:[[]],rightHand:[["C4","E4","G4"]]}}}function oe(n,a){return n.length===a.length&&n.every(u=>a.includes(u))}{const n=(u,o=ce)=>{var M=Te(),m=W(M);{var k=h=>{var b=ue();A(()=>X(b,H(T,o().completed,!0))),j(h,b)};Y(m,h=>{o().completed!==e(T)&&h(k)})}var C=r(m,2),ae=p(C);{var re=h=>{var b=He(),N=W(b),f=r(p(N),2);f.__change=[be,d],_e(f,21,()=>pe,ge,(ne,V)=>{var y=je(),ie=p(y,!0);l(y);var Q={};A(()=>{X(ie,e(V)),Q!==(Q=e(V))&&(y.value=(y.__value=e(V))??"")}),j(ne,y)}),l(f);var F;B(f),l(N);var E=r(N,2),_=r(p(E),2);_.__change=[ye,c];var z=p(_);z.value=z.__value=0;var R=r(z);R.value=R.__value=1;var D=r(R);D.value=D.__value=2;var J=r(D);J.value=J.__value=3,l(_);var L;B(_),l(E);var U=r(E,2),g=r(p(U),2);g.__change=[xe,v];var I=p(g);I.value=I.__value="full";var P=r(I);P.value=P.__value="left-hand";var S=r(P);S.value=S.__value="right-hand";var K=r(S);K.value=K.__value="split",l(g);var O;B(g),l(U),A(()=>{F!==(F=e(d))&&(f.value=(f.__value=e(d))??"",G(f,e(d))),L!==(L=e(c))&&(_.value=(_.__value=e(c))??"",G(_,e(c))),O!==(O=e(v))&&(g.value=(g.__value=e(v))??"",G(g,e(v)))}),j(h,b)};Y(ae,h=>{t.randomMode||h(re)})}l(C),j(u,M)};let a=ve(()=>t.randomMode?"Random Chord":"Jazz Chord Practice");me(s,{get exerciseTitle(){return e(a)},exerciseDescription:"Practice playing jazz chords with different voicings and inversions",get randomMode(){return t.randomMode},generateExpectedNotes:$,generateScoreProps:te,validateNoteEvent:ee,isCompleted:oe,children:n,$$slots:{default:!0}})}de()}he(["change"]);export{Pe as component};
