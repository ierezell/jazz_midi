import{f as A,a as B}from"../chunks/Bdvgn338.js";import{o as D}from"../chunks/BRJReVLM.js";import{p as E,U as g,V as I,W as L,k as e,X as M,a as R,Y as O,s as C,c as y,t as W,Z as x,r as v,_ as Y}from"../chunks/ZtE6Gyvq.js";import{s as $}from"../chunks/BnZ86L-c.js";import{A as k,N as w,M as G}from"../chunks/CXrKfc7O.js";import{B as K}from"../chunks/FwDZ8j-Z.js";var U=A('<div class="dexterity-content svelte-1wy8dyn"><h2 class="svelte-1wy8dyn">Dexterity Builder</h2> <p class="note-count svelte-1wy8dyn"> </p> <p class="progress-text svelte-1wy8dyn"> </p> <p class="hint svelte-1wy8dyn">Try to play evenly with the metronome!</p></div>');function J(q,f){E(f,!0);const _="Improve your finger dexterity and speed! Play the sequence of notes shown in time with the metronome.";let n=g(I([])),d=g("right"),s=g(0);const u=k.filter(o=>!o.includes("#")&&!o.includes("b"));function N(){const t=[];x(d,Math.random()<.5?"left":"right",!0);const c=e(d)==="left"?2:4,r=e(d)==="left"?3:5;let a=Math.floor(Math.random()*u.length);for(let l=0;l<16;l++){const p=Math.floor(Math.random()*3)-1;let i=a+p;i<0&&(i=1),i>=u.length&&(i=u.length-2),a=i;const m=u[Math.floor(Math.random()*u.length)],h=Math.floor(Math.random()*(r-c+1))+c;t.push(`${m}${h}`)}x(n,t,!0),x(s,0)}D(()=>{N()});function S(o){if(e(s)<e(n).length){const t=e(n)[e(s)];if(t&&w[t])return[w[t]]}return[]}function T(o,t,c){const r=c[0];if(t.noteNumber===r)return O(s),e(n).length-e(s)===0?{isCorrect:!0,message:`Perfect! All ${e(n).length} notes completed! ðŸŽµâœ¨`,collected:!0,resetCollected:!0}:{isCorrect:!0,message:`Good! ${e(s)}/${e(n).length}`,collected:!0,resetCollected:!1};{const a=G[t.noteNumber],l=e(n)[e(s)];return{isCorrect:!1,message:`Wrong note! You played ${a}, expected ${l}`,collected:!1,resetCollected:!1}}}function b(o){const r=e(n).slice(0,8).map(a=>[a]);return{selectedNote:o,leftHand:e(d)==="left"?r:[],rightHand:e(d)==="right"?r:[]}}function H(o,t){return e(s)===e(n).length}function P(){N()}{const o=(r,a=L)=>{var l=U(),p=C(y(l),2),i=y(p);v(p);var m=C(p,2),h=y(m);v(m),Y(2),v(l),W(()=>{$(i,`${e(d)==="left"?"Left Hand":"Right Hand"} - ${e(n).length??""} notes`),$(h,`${e(s)??""}/${e(n).length??""}`)}),B(r,l)};let t=M(()=>f.onComplete??(()=>{})),c=M(()=>f.rootKey||"C");K(q,{randomMode:!0,generateExpectedNotes:S,generateScoreProps:b,validateNoteEvent:T,isCompleted:H,onReset:P,get onComplete(){return e(t)},get initialNote(){return e(c)},description:_,exerciseType:"partition",children:o,$$slots:{default:!0}})}R()}export{J as component};
