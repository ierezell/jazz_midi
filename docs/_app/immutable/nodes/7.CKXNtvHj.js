import"../chunks/NZTpNUN0.js";import{p as K,aq as C,R as j,g as Q,k as n,c as X,aU as Y,au as R,f as I,a as w,s as _,b,d as f,r as g,av as Z,t as B,S as h,as as $}from"../chunks/CopMHf-A.js";import{d as ee,s as te}from"../chunks/BtHBiExd.js";import{i as G}from"../chunks/BZTAz8MF.js";import{r as ae,i as oe,f as re}from"../chunks/D6jhRq7z.js";import{a as se}from"../chunks/BoW4r_El.js";import{c as H,M as x,S as ne,N as le}from"../chunks/CJpwhoEZ.js";import{B as ie}from"../chunks/CPdQYdRh.js";function ce(u,r){const l=u.target;h(r,l.checked,!0)}function de(u,r){const l=u.target;h(r,l.value,!0)}var ue=I('<div class="control-group svelte-qe37du"><label class="svelte-qe37du"><input type="checkbox" class="svelte-qe37du"/> Sequential Mode (play in order)</label></div> <div class="control-group svelte-qe37du"><label for="scaleMode" class="svelte-qe37du">Scale mode:</label> <select id="scaleMode" class="svelte-qe37du"><option class="svelte-qe37du">Major</option><option class="svelte-qe37du">Minor</option></select></div>',1),me=I('<!> <div class="scale-controls svelte-qe37du"><!></div>',1);function qe(u,r){K(r,!0);let l=C(j(r.randomMode?Math.random()>.5:!0)),m=C(j(r.randomMode?H[Math.floor(Math.random()*H.length)]:"Maj")),p=C(!1);Q(()=>{n(p)&&r.onComplete&&r.onComplete()});function N(o){const t=le[o+"4"],a=ne[n(m)].map(e=>t+e);return console.debug(`Scale for ${o}4:`,a.map(e=>x[e])),a}function L(o){const a=N(o).map(i=>x[i]),e=[],s=a.map(i=>[i]);return{selectedNote:o,leftHand:e,rightHand:s}}function W(o,t,a,e){return n(l)?D(t,a,e):O(t,a,e)}function D(o,t,a){const e=a.length,s=t[e];return o.noteNumber===s?e===t.length-1?{isCorrect:!0,message:"Perfect scale! ðŸŽµâœ¨"}:{isCorrect:!0,message:`Good! Note ${e+1}/${t.length}`}:{isCorrect:!1,message:`Wrong note! Expected ${x[s]?.slice(0,-1)||s.toString()} (note ${e+1})`}}function O(o,t,a){if(t.includes(o.noteNumber)){const e=a.filter(s=>t.includes(s));return e.length===t.length?{isCorrect:!0,message:"Perfect scale! ðŸŽµ"}:{isCorrect:!0,message:`Good! ${e.length}/${t.length} notes`}}else return{isCorrect:!1,message:"Wrong note!"}}function U(o,t){if(n(l))return o.length===t.length&&o.every((a,e)=>a===t[e]);{const a=[...new Set(o)],e=[...new Set(t)];return a.length===e.length&&a.every(s=>e.includes(s))}}{const o=(e,s=Y)=>{var i=me(),y=w(i);{var V=c=>{var v=Z();B(()=>te(v,h(p,s().completed,!0))),b(c,v)};G(y,c=>{s().completed!==n(p)&&c(V)})}var E=_(y,2),z=f(E);{var F=c=>{var v=ue(),M=w(v),P=f(M),S=f(P);ae(S),S.__change=[ce,l],$(),g(P),g(M);var k=_(M,2),d=_(f(k),2);d.__change=[de,m];var q=f(d);q.value=q.__value="Maj";var T=_(q);T.value=T.__value="Min",g(d);var A;oe(d),g(k),B(()=>{A!==(A=n(m))&&(d.value=(d.__value=n(m))??"",re(d,n(m)))}),se(S,()=>n(l),J=>h(l,J)),b(c,v)};G(z,c=>{r.randomMode||c(F)})}g(E),b(e,i)};let t=R(()=>r.randomMode?"Random Scale":"Scale Practice"),a=R(()=>n(l)?"Play the scale notes in order":"Play all scale notes in any order");ie(u,{get exerciseTitle(){return n(t)},get exerciseDescription(){return n(a)},get randomMode(){return r.randomMode},generateExpectedNotes:N,generateScoreProps:L,validateNoteEvent:W,isCompleted:U,children:o,$$slots:{default:!0}})}X()}ee(["change"]);export{qe as component};
