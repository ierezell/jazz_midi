import{f as T,a as H}from"../chunks/CFIxE8eA.js";import{o as P}from"../chunks/DkZ4bG6r.js";import{p as k,U as h,V as w,W as B,k as e,X as N,a as W,Y,s as v,c as u,t as j,Z as x,r as f}from"../chunks/jpeKWS-T.js";import{s as C}from"../chunks/CMZx5vTi.js";import{N as i,M as A}from"../chunks/CXrKfc7O.js";import{B as G}from"../chunks/anoD3tQK.js";var I=T('<div class="partition-content svelte-1o4741b"><h2 class="svelte-1o4741b">Sight Reading Exercise</h2> <p class="note-count svelte-1o4741b"> </p> <p class="progress-text svelte-1o4741b"> </p></div>');function z(b,d){k(d,!0);const y="Read and play the sequence of notes shown on the musical staff. Its a fancier version of arpeggios!";let o=h(w([])),s=h(0);function m(){const n=[],t=4+Math.floor(Math.random()*4),r=Object.keys(i).filter(a=>{const l=i[a];return l>=60&&l<=72});for(let a=0;a<t;a++){const l=r[Math.floor(Math.random()*r.length)];n.push(l)}x(o,n,!0),x(s,0)}P(()=>{m()});function M(n){if(e(s)<e(o).length){const t=e(o)[e(s)];if(t&&i[t])return[i[t]]}return[]}function _(n,t,r){const a=r[0];if(t.noteNumber===a)return Y(s),e(o).length-e(s)===0?{isCorrect:!0,message:`Perfect! All ${e(o).length} notes completed! ðŸŽµâœ¨`,collected:!0,resetCollected:!0}:{isCorrect:!0,message:`Good! ${e(s)}/${e(o).length} notes played`,collected:!0,resetCollected:!1};{const l=A[t.noteNumber],c=e(o)[e(s)];return{isCorrect:!1,message:`Wrong note! You played ${l}, expected ${c}`,collected:!1,resetCollected:!1}}}function $(n){const t=e(o).map(r=>[r]);return{selectedNote:n,leftHand:[],rightHand:t}}function R(n,t){return e(s)===e(o).length}function S(){m()}{const n=(a,l=B)=>{var c=I(),p=v(u(c),2),q=u(p);f(p);var g=v(p,2),E=u(g);f(g),f(c),j(()=>{C(q,`Right Hand (Treble Clef) -
				${e(o).length??""} notes`),C(E,`${e(s)??""}/${e(o).length??""} notes played`)}),H(a,c)};let t=N(()=>d.onComplete??(()=>{})),r=N(()=>d.rootKey||"C");G(b,{randomMode:!0,generateExpectedNotes:M,generateScoreProps:$,validateNoteEvent:_,isCompleted:R,onReset:S,get onComplete(){return e(t)},get initialNote(){return e(r)},description:y,exerciseType:"partition",children:n,$$slots:{default:!0}})}W()}export{z as component};
