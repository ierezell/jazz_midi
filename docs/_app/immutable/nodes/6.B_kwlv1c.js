import{c as he,a as F,f as J}from"../chunks/Bdvgn338.js";import{p as me,U as M,V as x,k as e,X as K,a as _e,f as fe,Z as C,c as p,s as n,r as c,t as X}from"../chunks/ZtE6Gyvq.js";import{d as ge,s as pe}from"../chunks/BnZ86L-c.js";import{e as Ce,i as be}from"../chunks/BbjHMeAY.js";import{i as ye}from"../chunks/CdTPX8-T.js";import{i as L,s as G}from"../chunks/C2lzuMI8.js";import{B as Me,a as xe,b as Ne,g as Te}from"../chunks/DBDa-pHI.js";import{A as N,e as Z,D as Ae,N as He,b as Ie}from"../chunks/CXrKfc7O.js";import{p as k}from"../chunks/BYaj1R6p.js";var Re=J("<option> </option>"),Pe=J('<div class="controls svelte-b6xay4"><div class="control-group svelte-b6xay4"><label for="chord-type" class="svelte-b6xay4">Chord Type</label> <select id="chord-type"></select></div> <div class="control-group svelte-b6xay4"><label for="inversion" class="svelte-b6xay4">Inversion</label> <select id="inversion"><option>Root</option><option>1st</option><option>2nd</option><option>3rd</option></select></div> <div class="control-group svelte-b6xay4"><label for="voicing" class="svelte-b6xay4">Voicing</label> <select id="voicing"><option>Full Right Hand</option><option>Full Left Hand</option><option>1 & 7 Left / 3 & 5 Right</option><option>1 & 5 Left / 3 & 7 Right</option><option>Rootless A (3-5-7-9)</option><option>Rootless B (7-9-3-5)</option></select></div></div>');function Se(Q,a){me(a,!0);const Y="Play the notes of the displayed chord on your MIDI keyboard. Try to match the voicing and inversion shown.";let y=["maj7","min7","7","dom7","half-dim7","dim7"],d=M(x(k.url.searchParams.get("root")??a.rootKey??(a.randomMode?N[Math.floor(Math.random()*N.length)]:"C"))),s=M(x(k.url.searchParams.get("quality")??a.chordType??(a.randomMode?y[Math.floor(Math.random()*y.length)]:"maj7"))),v=M(x(a.inversion??(a.randomMode?Math.floor(Math.random()*4):0))),i=M(x(a.voicing??(a.randomMode?Z[Math.floor(Math.random()*Z.length)]:"full-right")));function $(){const o=N[Math.floor(Math.random()*N.length)],t=y[Math.floor(Math.random()*y.length)],r=Math.floor(Math.random()*4);C(d,o,!0),C(s,t,!0),C(v,r,!0)}function ee(){$(),a.onComplete?.()}function te(o){const u=["C","C#","Db","D","D#","Eb","E","F","F#","Gb","G","G#","Ab","A","A#","Bb","B"].indexOf(e(d))>=10?"3":Ae,l=e(d)+u,h=He[l],m=xe(h,e(s),e(v));return Ne(m,e(i))}function oe(o,t,r,u){const l=r.map(m=>m%12),h=t.noteNumber%12;if(l.includes(h)){if(r.includes(t.noteNumber))return{isCorrect:!0,message:"Correct chord tone!",collected:!0,resetCollected:!1};if(e(i).startsWith("rootless"))return{isCorrect:!0,message:"Correct chord tone (octave ignored)!",collected:!0,resetCollected:!1}}return{isCorrect:!1,message:"Not a chord tone. Try again!",collected:!1,resetCollected:!0}}function ae(o){const t=o.target;C(s,t.value,!0)}function re(o){const t=o.target;C(v,parseInt(t.value),!0)}function ne(o){const t=o.target;C(i,t.value,!0)}function le(o){try{const t=Te(e(d),e(s),e(v),e(i));return{leftHand:t.leftHand,rightHand:t.rightHand,selectedNote:e(d)}}catch{return{selectedNote:"C",leftHand:[[]],rightHand:[["C4","E4","G4"]]}}}function se(o,t){if(e(i).startsWith("rootless")){const r=new Set(o.map(l=>l%12)),u=new Set(t.map(l=>l%12));return r.size===u.size&&[...r].every(l=>u.has(l))}return o.length===t.length&&o.every(r=>t.includes(r))}function ie(){}let ce=K(()=>`${e(d)} ${e(s)}`),de=K(()=>a.prompt??e(ce));Me(Q,{get randomMode(){return a.randomMode},generateExpectedNotes:te,generateScoreProps:le,validateNoteEvent:oe,isCompleted:se,onReset:ie,onComplete:ee,get initialNote(){return e(d)},description:Y,get progressiveHints(){return a.progressiveHints},get prompt(){return e(de)},showTempoControl:!0,timingModeLabel:"Play chord on beat",children:t=>{var r=he(),u=fe(r);{var l=h=>{var m=Pe(),T=p(m),_=n(p(T),2);_.__change=ae,Ce(_,21,()=>Ie,be,(ve,B)=>{var b=Re(),ue=p(b,!0);c(b);var q={};X(()=>{pe(ue,e(B)),q!==(q=e(B))&&(b.value=(b.__value=e(B))??"")}),F(ve,b)}),c(_);var S;L(_),c(T);var A=n(T,2),f=n(p(A),2);f.__change=re;var H=p(f);H.value=H.__value=0;var I=n(H);I.value=I.__value=1;var R=n(I);R.value=R.__value=2;var j=n(R);j.value=j.__value=3,c(f);var z;L(f),c(A);var O=n(A,2),g=n(p(O),2);g.__change=ne;var P=p(g);P.value=P.__value="full-right";var D=n(P);D.value=D.__value="full-left";var E=n(D);E.value=E.__value="1735";var V=n(E);V.value=V.__value="1537";var w=n(V);w.value=w.__value="rootless-a";var U=n(w);U.value=U.__value="rootless-b",c(g);var W;L(g),c(O),c(m),X(()=>{S!==(S=e(s))&&(_.value=(_.__value=e(s))??"",G(_,e(s))),z!==(z=e(v))&&(f.value=(f.__value=e(v))??"",G(f,e(v))),W!==(W=e(i))&&(g.value=(g.__value=e(i))??"",G(g,e(i)))}),F(h,m)};ye(u,h=>{!a.randomMode&&!k.url.searchParams.get("unitId")&&h(l)})}F(t,r)},$$slots:{default:!0}}),_e()}ge(["change"]);export{Se as component};
