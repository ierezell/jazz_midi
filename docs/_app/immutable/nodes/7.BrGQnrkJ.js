import{f as I,a as H}from"../chunks/CmtjIIgE.js";import{o as L}from"../chunks/B7Ycrqw2.js";import{p as O,U as x,V as P,W as j,a as w,v as d,X as D,Z as N,s as y,c as l,t as V,r as p}from"../chunks/ipsVM-65.js";import{s as u}from"../chunks/Brx6x_Mu.js";import{B,c as U,a as W}from"../chunks/n6RJpNS9.js";import{N as k,D as F,I as X,A as h}from"../chunks/DTRnenjV.js";var Z=I('<div class="flash-card svelte-1a0o1e6"><div class="card-content svelte-1a0o1e6"><div class="prompt svelte-1a0o1e6"> </div> <div class="subtext svelte-1a0o1e6"> </div> <div class="counter svelte-1a0o1e6"> </div></div></div>');function Y(g,M){O(M,!0);let i=x(P({type:"note",prompt:"Loading...",expectedNotes:[]})),v=x(0);const _=10;function m(e){const a=["note","interval","chord"],n=a[Math.floor(Math.random()*a.length)],o=k[`${e}${F}`];if(n==="note")return{type:"note",prompt:e,subtext:"Play the note",expectedNotes:[o]};if(n==="interval"){const t=Object.keys(X),r=t[Math.floor(Math.random()*t.length)],s=U(e,r);return{type:"interval",prompt:`${e} + ${r}`,subtext:"Play the interval (Root + Note)",expectedNotes:[o,s]}}else{const t=["major","minor","maj7","min7","dom7"],r=t[Math.floor(Math.random()*t.length)],s=W(o,r),c=[s.root,s.third,s.fifth];return s.seventh&&c.push(s.seventh),{type:"chord",prompt:`${e} ${r}`,subtext:"Play the chord",expectedNotes:c}}}L(()=>{const e=h[Math.floor(Math.random()*h.length)];N(i,m(e),!0)});function C(e){return d(i).expectedNotes}function T(e){return{leftHand:[],rightHand:[],selectedNote:e}}function E(e,a,n,o){const t=n.includes(a.noteNumber);return{isCorrect:t,message:t?"Correct!":"Wrong note!",collected:t,resetCollected:!t}}function $(e,a){const n=new Set(e);return a.every(t=>n.has(t))}function b(){}function A(){if(D(v),d(v)<_){const e=h[Math.floor(Math.random()*h.length)];N(i,m(e),!0)}}B(g,{description:"Test your speed! Identify and play the notes, intervals, or chords shown.",exerciseType:"partition",generateExpectedNotes:C,generateScoreProps:T,validateNoteEvent:E,isCompleted:$,onReset:b,onComplete:A,showScore:!0,randomMode:!0,initialNote:"C",children:(a,n=j)=>{var o=Z(),t=l(o),r=l(t),s=l(r,!0);p(r);var c=y(r,2),R=l(c,!0);p(c);var f=y(c,2),S=l(f);p(f),p(t),p(o),V(()=>{u(s,d(i).prompt),u(R,d(i).subtext),u(S,`Card ${d(v)+1} / 10`)}),H(a,o)},$$slots:{default:!0}}),w()}export{Y as component};
