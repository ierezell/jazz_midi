import{t as M,a as y}from"../chunks/D4BXdcC1.js";import{p as Q,a5 as S,a6 as U,a7 as s,k as e,c as f,a as V,s as l,a8 as n,r as _,t as C}from"../chunks/Dpbo9POk.js";import{s as I}from"../chunks/DHZI45yO.js";import{i as W}from"../chunks/CjAJ5wv6.js";import{e as X,i as Y}from"../chunks/Drm_huYl.js";import{S as Z,K as E,b as ee,e as te,o as oe}from"../chunks/xsHg306o.js";import{o as ae}from"../chunks/BvgYcItv.js";import{N as b,m as se,R as re,A as le,g as ne}from"../chunks/BiFJXFoK.js";var ie=M("<option> </option>"),ce=M('<p class="svelte-1m3v1yp"> </p>'),pe=M('<main class="svelte-1m3v1yp"><h1>Scales</h1> <h2>Major Scale</h2> <!> <!> <br> <br> <!> <label for="note-select" class="svelte-1m3v1yp">Select a Note:</label> <select class="svelte-1m3v1yp"><option>--Choose a Note--</option><!></select> <!></main>');function Ne(F,B){Q(B,!0);let i=S(U([])),D=s(()=>e(i).map(t=>t.noteNumber)),g,c=S("C"),x=s(()=>e(c)+"4"),H=s(()=>se[e(c)]),O=s(()=>Array.from(new Set(e(H).map(t=>t.slice(0,-1))))),p=s(()=>e(O).map(t=>t+"4")),A=s(()=>e(p).map(t=>b[t])),r=[],u=S(""),m=null,d=null;function P(t){const o=ne(t);o.type==="on"?(n(i,[o,...e(i)],!0),r.push(o.noteNumber),r=[...new Set(r)],r.every(a=>e(A).includes(a))?r.length===7?(n(u,"Bravo!"),d&&d.play(),r=[]):n(u,`${7-r.length} notes to go`):(n(u,"Try again"),m&&m.play(),r=[])):n(i,e(i).filter(a=>a.noteFullName!==o.noteFullName),!0)}ae(async()=>{m=new Audio(te),m.volume=.5,m.loop=!1,d=new Audio(oe),d.volume=.5,d.loop=!1;try{g=await re(),console.log("Scale MIDI Access obtained:",g),g.inputs.forEach(o=>{o.onmidimessage=P})}catch(t){console.error("Failed to obtain MIDI Access:",t)}});var h=pe(),j=l(f(h),4);const R=s(()=>[...e(p).map(t=>t.replace("4","3")),e(p)[0]].reduce((t,o)=>(t.push([o]),t),[])),T=s(()=>[...e(p),e(p)[0].replace("4","5")].reduce((t,o)=>(t.push([o]),t),[]));Z(j,{get selectedNote(){return e(c)},get leftHand(){return e(R)},get rightHand(){return e(T)}});var k=l(j,2);const q=s(()=>b[e(x)]+7);E(k,{get midiNotes(){return e(A)},get middleC(){return e(q)},octaves:2});var w=l(k,6);const $=s(()=>b[e(x)]+7);E(w,{get midiNotes(){return e(D)},get middleC(){return e($)},octaves:2});var v=l(w,4),N=f(v);N.value=((N.__value="")==null,"");var z=l(N);X(z,17,()=>le,Y,(t,o)=>{var a=ie(),K={},L=f(a,!0);_(a),C(()=>{K!==(K=e(o))&&(a.value=(a.__value=e(o))==null?"":e(o)),I(L,e(o))}),y(t,a)}),_(v);var G=l(v,2);{var J=t=>{var o=ce(),a=f(o,!0);_(o),C(()=>I(a,e(u))),y(t,o)};W(G,t=>{e(u)&&t(J)})}_(h),ee(v,()=>e(c),t=>n(c,t)),y(F,h),V()}export{Ne as component};
