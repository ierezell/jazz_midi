import"../chunks/NZTpNUN0.js";import{p as I,c as L,aT as W,k as n,f as k,b as x,aq as P,d as v,r as g,at as T,a as D,as as O,s as h,t as V,R as S}from"../chunks/Bz4zNOrf.js";import{d as z}from"../chunks/CJmofs9R.js";import{i as F}from"../chunks/CYH6PDW9.js";import{r as J,i as K,f as Q}from"../chunks/DlE_GaT1.js";import{a as U}from"../chunks/CxG9t42Z.js";import{M,S as X,N as Y}from"../chunks/BclH9Fha.js";import{B as Z}from"../chunks/DLRTzOat.js";function ee(d,l){const s=d.target;S(l,s.checked,!0)}function te(d,l){const s=d.target;S(l,s.value,!0)}var ae=k('<div class="control-group svelte-qe37du"><label class="svelte-qe37du"><input type="checkbox" class="svelte-qe37du"/> Sequential Mode (play in order)</label></div> <div class="control-group svelte-qe37du"><label for="scaleMode" class="svelte-qe37du">Scale mode:</label> <select id="scaleMode" class="svelte-qe37du"><option class="svelte-qe37du">Major</option><option class="svelte-qe37du">Minor</option></select></div>',1),oe=k('<div class="scale-controls svelte-qe37du"><!></div>');function ve(d,l){I(l,!0);let s=P(!0),u=P("Maj");function q(o){const t=Y[o+"4"],a=X[n(u)].map(e=>t+e);return console.debug(`Scale for ${o}4:`,a.map(e=>M[e])),a}function $(o){const a=q(o).map(i=>M[i]),e=[],r=a.map(i=>[i]);return{selectedNote:o,leftHand:e,rightHand:r}}function j(o,t,a,e){return n(s)?A(t,a,e):R(t,a,e)}function A(o,t,a){const e=a.length,r=t[e];return o.noteNumber===r?e===t.length-1?{isCorrect:!0,message:"Perfect scale! ðŸŽµâœ¨"}:{isCorrect:!0,message:`Good! Note ${e+1}/${t.length}`}:{isCorrect:!1,message:`Wrong note! Expected ${M[r]?.slice(0,-1)||r.toString()} (note ${e+1})`}}function R(o,t,a){if(t.includes(o.noteNumber)){const e=a.filter(r=>t.includes(r));return e.length===t.length?{isCorrect:!0,message:"Perfect scale! ðŸŽµ"}:{isCorrect:!0,message:`Good! ${e.length}/${t.length} notes`}}else return{isCorrect:!1,message:"Wrong note!"}}function w(o,t){if(n(s))return o.length===t.length&&o.every((a,e)=>a===t[e]);{const a=[...new Set(o)],e=[...new Set(t)];return a.length===e.length&&a.every(r=>e.includes(r))}}{const o=(e,r=W)=>{var i=oe(),B=v(i);{var G=m=>{var b=ae(),f=D(b),N=v(f),p=v(N);J(p),p.__change=[ee,s],O(),g(N),g(f);var C=h(f,2),c=h(v(C),2);c.__change=[te,u];var _=v(c);_.value=_.__value="Maj";var y=h(_);y.value=y.__value="Min",g(c);var E;K(c),g(C),V(()=>{E!==(E=n(u))&&(c.value=(c.__value=n(u))??"",Q(c,n(u)))}),U(p,()=>n(s),H=>S(s,H)),x(m,b)};F(B,m=>{l.randomMode||m(G)})}g(i),x(e,i)};let t=T(()=>l.randomMode?"Random Scale":"Scale Practice"),a=T(()=>n(s)?"Play the scale notes in order":"Play all scale notes in any order");Z(d,{get exerciseTitle(){return n(t)},get exerciseDescription(){return n(a)},get randomMode(){return l.randomMode},generateExpectedNotes:q,generateScoreProps:$,validateNoteEvent:j,isCompleted:w,children:o,$$slots:{default:!0}})}L()}z(["change"]);export{ve as component};
