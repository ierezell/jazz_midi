import"../chunks/NZTpNUN0.js";import{d as Me,o as Ke,s as R}from"../chunks/Chha1ELk.js";import{p as we,f as x,d as s,at as G,r as n,s as i,t as E,b as T,c as Re,ad as L,aq as le,aT as qe,k as e,as as j,a as ke}from"../chunks/D14S_uxs.js";import{p as De,i as A}from"../chunks/DKDO6a7q.js";import{N as ce,M as D,e as Je,i as Ue,A as Qe}from"../chunks/CB_yojb1.js";import{r as We,g as Xe,s as q,i as ve,f as de}from"../chunks/Bd7mbu-w.js";import{B as Ye,c as he,a as Ze}from"../chunks/CyUssLSY.js";const ue={root:"#e74c3c",third:"#f39c12",fifth:"#3498db",seventh:"#9b59b6",extension:"#2ecc71",tension:"#DDA0DD",none:"transparent"};function $e(N,r){r.onToggle(!r.showChordTones)}var et=x('<div class="color-legend svelte-12nsc9v"><div class="legend-item svelte-12nsc9v"><div class="color-dot svelte-12nsc9v"></div> <span class="svelte-12nsc9v">Root</span></div> <div class="legend-item svelte-12nsc9v"><div class="color-dot svelte-12nsc9v"></div> <span class="svelte-12nsc9v">Third</span></div> <div class="legend-item svelte-12nsc9v"><div class="color-dot svelte-12nsc9v"></div> <span class="svelte-12nsc9v">Fifth</span></div> <div class="legend-item svelte-12nsc9v"><div class="color-dot svelte-12nsc9v"></div> <span class="svelte-12nsc9v">Seventh</span></div></div>'),tt=x('<div class="chord-tone-toggle svelte-12nsc9v"><label class="toggle-container svelte-12nsc9v"><input type="checkbox" aria-label="Show chord tone colors" class="svelte-12nsc9v"/> <span class="toggle-switch svelte-12nsc9v"></span> <span class="toggle-label svelte-12nsc9v">Show Chord Tones</span></label> <!></div>');function ot(N,r){we(r,!0);let d=De(r,"colors",3,ue);var h=tt(),f=s(h),p=s(f);We(p),p.__change=[$e,r],G(4),n(f);var J=i(f,2);{var V=S=>{var C=et(),z=s(C),U=s(z);G(2),n(z);var I=i(z,2),B=s(I);G(2),n(I);var O=i(I,2),Q=s(O);G(2),n(O);var K=i(O,2),a=s(K);G(2),n(K),n(C),E(()=>{q(U,`background-color: ${d().root??""}`),q(B,`background-color: ${d().third??""}`),q(Q,`background-color: ${d().fifth??""}`),q(a,`background-color: ${d().seventh??""}`)}),T(S,C)};A(J,S=>{r.showChordTones&&S(V)})}n(h),E(()=>Xe(p,r.showChordTones)),T(N,h),Re()}Me(["change"]);function nt(N,r){const d=N.target;L(r,d.value,!0)}function rt(N,r){const d=N.target;L(r,parseInt(d.value),!0)}function st(N,r){const d=N.target;L(r,d.value,!0)}var at=x("<option> </option>"),it=x('<div class="control-group svelte-1hty940"><label for="chord-type" class="svelte-1hty940">Chord Type:</label> <select id="chord-type" class="svelte-1hty940"></select></div> <div class="control-group svelte-1hty940"><label for="inversion" class="svelte-1hty940">Inversion:</label> <select id="inversion" class="svelte-1hty940"><option>Root</option><option>1st</option><option>2nd</option><option>3rd</option></select></div> <div class="control-group svelte-1hty940"><label for="voicing" class="svelte-1hty940">Voicing:</label> <select id="voicing" class="svelte-1hty940"><option>Full</option><option>Left Hand</option><option>Right Hand</option><option>Split</option></select></div>',1),lt=x('<button class="svelte-1hty940"> </button>'),ct=x('<div class="control-group chord-tone-controls svelte-1hty940"><!></div>'),vt=x('<div class="completion svelte-1hty940">ðŸŽ‰ Chord Completed!</div>'),dt=x('<div class="chord-info svelte-1hty940"><h2 class="chord-display svelte-1hty940"> </h2> <div class="chord-details svelte-1hty940"><span> </span> <span> </span></div></div> <div class="controls svelte-1hty940"><!> <div class="control-group svelte-1hty940"><button class="svelte-1hty940">Reset</button> <!></div> <!></div> <div class="exercise-status svelte-1hty940"><div class="progress"> </div> <div class="mistakes"> </div> <!></div>',1);function yt(N,r){we(r,!0);let d=De(r,"randomMode",3,!1),h=le("maj7"),f=le(0),p=le("full");Ke(()=>{d()&&(r.randomChordType&&L(h,r.randomChordType,!0),r.randomInversion!==void 0&&L(f,r.randomInversion,!0))});function J(a){const o=a+"4",g=ce[o],t=he(g,e(h),e(f));console.log("Generating score data:",{rootNote:o,rootMidi:g,currentChord:t,chordType:e(h),voicing:e(p),inversion:e(f)});const _=[t.root,t.third,t.fifth,t.seventh].filter(c=>c!==void 0);switch(e(p)){case"full":const c={leftHandNotes:[],rightHandNotes:[_.map(u=>D[u])]};return console.log("Full voicing result:",c),c;case"left-hand":return{leftHandNotes:[[t.root,t.seventh].filter(u=>u!==void 0).map(u=>D[u])],rightHandNotes:[]};case"right-hand":const y=[t.third,t.fifth];return{leftHandNotes:[],rightHandNotes:[y.map(u=>D[u])]};case"split":const H=[t.root-12,(t.seventh||t.root)-12].filter(u=>u>=24),P=[t.third,t.fifth];return{leftHandNotes:[H.map(u=>D[u])],rightHandNotes:[P.map(u=>D[u])]};default:return{leftHandNotes:[],rightHandNotes:[_.map(u=>D[u])]}}}function V(a){const o=a+"4",g=ce[o],t=he(g,e(h),e(f)),_=[t.root,t.third,t.fifth,t.seventh].filter(c=>c!==void 0);switch(e(p)){case"full":return _;case"left-hand":return[t.root,t.seventh].filter(y=>y!==void 0);case"right-hand":return[t.third,t.fifth];case"split":const c=[t.root-12,(t.seventh||t.root)-12].filter(y=>y>=24),l=[t.third,t.fifth];return[...c,...l];default:return _}}function S(a,o){return o.includes(a.noteNumber)?{isCorrect:!0,message:"Correct chord tone!"}:{isCorrect:!1,message:"Not a chord tone. Try again!"}}let C=j(()=>({name:`${e(h)}`,voicing:e(p),inversion:e(f)}));function z(a){try{const o=J(a);return console.log("Generated score data:",{selectedNote:a,chordType:e(h),voicing:e(p),inversion:e(f),scoreData:o}),{title:e(C).name,leftHandNotes:o.leftHandNotes,rightHandNotes:o.rightHandNotes}}catch(o){return console.error("Error generating score data:",o),{title:"C Major",leftHandNotes:[],rightHandNotes:[["C4","E4","G4"]]}}}function U(a,o){const g=a%12,t=o.root%12,_=o.third%12,c=o.fifth%12,l=o.seventh?o.seventh%12:null;return g===t?"root":g===_?"third":g===c?"fifth":l!==null&&g===l?"seventh":"none"}function I(a,o=ue){return o[a]}function B(a,o,g,t=ue){const _=[];for(let c=a;c<=o;c++){const l=U(c,g),y=I(l,t);_.push({midiNote:c,noteNumber:c,role:l,color:y})}return _}function O(a){const o=a+"4",g=ce[o],t=he(g,e(h),e(f)),_=V(a),c=Ze(_),l=c.middleC-Math.floor(c.octaves/2)*12,y=l+c.octaves*12,H={root:t.root,third:t.third,fifth:t.fifth,seventh:t.seventh};return B(l,y,H)}function Q(a){console.log("Generating keyboard props for note:",a,"chordType:",e(h),"inversion:",e(f));const o=O(a);return console.log("Generated chord tone info:",o),{chordToneInfo:o,showChordTones:!0}}function K(){d()&&r.onRandomComplete&&setTimeout(()=>{r.onRandomComplete()},1500)}{const a=(c,l=qe)=>{var y=dt(),H=ke(y),P=s(H),u=s(P);n(P);var fe=i(P,2),W=s(fe),Ee=s(W);n(W);var ge=i(W,2),Se=s(ge);n(ge),n(fe),n(H);var X=i(H,2),_e=s(X);{var ze=v=>{var m=it(),k=ke(m),b=i(s(k),2);b.__change=[nt,h],Je(b,21,()=>Qe,Ue,(Ve,ie)=>{var F=at(),Be=s(F,!0);n(F);var He={};E(()=>{R(Be,e(ie)),He!==(He=e(ie))&&(F.value=(F.__value=e(ie))??"")}),T(Ve,F)}),n(b);var ye;ve(b),n(k);var ee=i(k,2),M=i(s(ee),2);M.__change=[rt,f];var te=s(M);te.value=te.__value=0;var oe=i(te);oe.value=oe.__value=1;var ne=i(oe);ne.value=ne.__value=2;var Ce=i(ne);Ce.value=Ce.__value=3,n(M);var Ne;ve(M),n(ee);var be=i(ee,2),w=i(s(be),2);w.__change=[st,p];var re=s(w);re.value=re.__value="full";var se=i(re);se.value=se.__value="left-hand";var ae=i(se);ae.value=ae.__value="right-hand";var Te=i(ae);Te.value=Te.__value="split",n(w);var xe;ve(w),n(be),E(()=>{ye!==(ye=e(h))&&(b.value=(b.__value=e(h))??"",de(b,e(h))),Ne!==(Ne=e(f))&&(M.value=(M.__value=e(f))??"",de(M,e(f))),xe!==(xe=e(p))&&(w.value=(w.__value=e(p))??"",de(w,e(p)))}),T(v,m)};A(_e,v=>{d()||v(ze)})}var Y=i(_e,2),pe=s(Y);pe.__click=function(...v){l().resetExercise?.apply(this,v)};var Ie=i(pe,2);{var Oe=v=>{var m=lt();m.__click=function(...b){l().toggleDebug?.apply(this,b)};var k=s(m);n(m),E(()=>R(k,`${l().debugMode?"Hide":"Show"} Debug`)),T(v,m)};A(Ie,v=>{d()||v(Oe)})}n(Y);var Pe=i(Y,2);{var Fe=v=>{var m=ct(),k=s(m);ot(k,{get showChordTones(){return l().showChordTones},get onToggle(){return l().setShowChordTones}}),n(m),T(v,m)};A(Pe,v=>{d()||v(Fe)})}n(X);var me=i(X,2),Z=s(me),Ge=s(Z);n(Z);var $=i(Z,2),je=s($);n($);var Ae=i($,2);{var Le=v=>{var m=vt();T(v,m)};A(Ae,v=>{l().completed&&v(Le)})}n(me),E(v=>{R(u,`${l().selectedNote??""} ${e(C).name??""}`),R(Ee,`Voicing: ${e(C).voicing??""}`),R(Se,`Inversion: ${e(C).inversion===0?"Root":e(C).inversion===1?"1st":e(C).inversion===2?"2nd":"3rd"}`),R(Ge,`Progress: ${v??""}%`),R(je,`Mistakes: ${l().mistakes??""}`)},[()=>Math.round(l().currentNotes.filter(v=>l().expectedNotes.includes(v)).length/l().expectedNotes.length*100)]),T(c,y)};let o=j(()=>d()?"Random Chord":"Jazz Chord Practice"),g=j(()=>d()?`Play the ${r.randomNote}${e(h)} chord`:"Practice playing jazz chords with different voicings and inversions"),t=j(()=>d()?r.randomNote:void 0),_=j(()=>({title:e(C).name}));Ye(N,{get exerciseTitle(){return e(o)},get exerciseDescription(){return e(g)},get initialSelectedNote(){return e(t)},get randomMode(){return d()},generateExpectedNotes:V,generateScoreProps:z,generateKeyboardProps:Q,validateNoteEvent:S,get scoreProps(){return e(_)},customControls:!0,onExerciseComplete:K,children:a,$$slots:{default:!0}})}return Re({createChordToneMapping:B})}Me(["change","click"]);export{yt as component};
