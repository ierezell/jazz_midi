import{_ as se}from"../chunks/PPVm8Dsz.js";import{f as L,a as $}from"../chunks/Bdvgn338.js";import{p as Me,U as I,V as re,g as Ve,Z as o,k as e,W as je,X as ke,a as ze,Y as Te,s,c as a,t as D,r as n,_ as $e}from"../chunks/ZtE6Gyvq.js";import{d as De,s as P}from"../chunks/BnZ86L-c.js";import{e as ge,i as me}from"../chunks/BFmSp7VO.js";import{i as be}from"../chunks/CdTPX8-T.js";import{i as ie,s as ae,d as Le,b as He,r as qe}from"../chunks/U2hmf67d.js";import{a as le,b as Ae,B as Fe,g as Be}from"../chunks/BJLlDXwa.js";import{N as ve}from"../chunks/CXrKfc7O.js";const Ue=(R,N,H)=>{const d=R[N];return d?typeof d=="function"?d():Promise.resolve(d):new Promise((l,p)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(p.bind(null,new Error("Unknown variable dynamic import: "+N+(N.split("/").length!==H?". Note that variables only represent file names one level deep.":""))))})},We=["autumn-leaves","blue-bossa","all-the-things-you-are"],Ge=async()=>{const R=We.map(d=>Ue(Object.assign({"../../../lib/data/songs/all-the-things-you-are.json":()=>se(()=>import("../chunks/2UkcjGIk.js"),[],import.meta.url),"../../../lib/data/songs/autumn-leaves.json":()=>se(()=>import("../chunks/BdeHQ9Rf.js"),[],import.meta.url),"../../../lib/data/songs/blue-bossa.json":()=>se(()=>import("../chunks/DHqQcmTd.js"),[],import.meta.url)}),`../../../lib/data/songs/${d}.json`,7));return{songs:(await Promise.all(R)).map(d=>d.default)}},lt=Object.freeze(Object.defineProperty({__proto__:null,load:Ge},Symbol.toStringTag,{value:"Module"}));var Ke=L('<div class="song-info svelte-n1uxvh"> </div>'),Xe=L('<div class="song-info svelte-n1uxvh"> </div>'),Ye=L('<div><div class="chord-name svelte-n1uxvh"> </div></div>'),Ze=L("<option> </option>"),Je=L('<div class="song-controls svelte-n1uxvh"><div class="song-header svelte-n1uxvh"><h2 class="svelte-n1uxvh"> </h2> <!> <!> <div class="chord-progress svelte-n1uxvh"> </div></div> <div class="chord-progression svelte-n1uxvh"></div> <div class="control-group svelte-n1uxvh"><label for="song" class="svelte-n1uxvh">Song:</label> <select id="song" class="svelte-n1uxvh"></select></div> <div class="control-group svelte-n1uxvh"><label for="voicing" class="svelte-n1uxvh">Voicing:</label> <select id="voicing" class="svelte-n1uxvh"><option>Full Right Hand</option><option>Full Left Hand</option><option>Split (1-7-3-5)</option><option>Split (1-5-3-7)</option></select></div> <div class="control-group svelte-n1uxvh"><label class="svelte-n1uxvh"><input type="checkbox"/> Optimize Voice Leading</label></div> <div class="control-group svelte-n1uxvh"><label for="inversion" class="svelte-n1uxvh">Inversion:</label> <select id="inversion" class="svelte-n1uxvh"><option>Root Position</option><option>1st Inversion</option><option>2nd Inversion</option><option>3rd Inversion</option></select></div></div>');function vt(R,N){Me(N,!0);const H="Practice chord progressions from real songs. Play each chord in the progression.",d=N.data.songs;let l=I(re(d[0])),p=I(0),M=I("full-right"),G=I(0),u=I(re(new Set)),V=I(re([])),b=I(!1);Ve(()=>{o(p,0),o(u,new Set,!0),e(b)&&o(V,K(e(l).chords),!0)});function xe(){o(u,new Set,!0)}function q(){return e(l).chords[e(p)]}function K(r){if(r.length===0)return[];const t=[0],v=[0,1,2,3];for(let g=1;g<r.length;g++){const _=r[g-1],h=r[g],S=t[g-1],j=_.note+"3",A=ve[j],w=le(A,_.type,S),F=[w.root,w.third,w.fifth,w.seventh].filter(O=>O!==void 0);let B=0,k=1/0;for(const O of v){const z=h.note+"3",T=ve[z],f=le(T,h.type,O),U=[f.root,f.third,f.fifth,f.seventh].filter(x=>x!==void 0),E=Ae(F,U);E<k&&(k=E,B=O)}t.push(B)}return t}function X(){return e(b)&&e(V).length>e(p)?e(V)[e(p)]:e(G)}function Ce(r){const t=q(),v=t.note+"3",g=ve[v],_=X(),h=le(g,t.type,_);return[h.root,h.third,h.fifth,h.seventh].filter(j=>j!==void 0)}function ye(r){const t=q(),v=X(),{leftHand:g,rightHand:_}=Be(t.note,t.type,v,e(M));return{selectedNote:t.note,leftHand:g,rightHand:_}}function Ne(r,t,v,g){if(v.includes(t.noteNumber))if(o(u,new Set([...e(u),t.noteNumber]),!0),e(u).size===v.length){const _=q();return{isCorrect:!0,message:`Perfect ${`${_.note}${_.type}`}! ðŸŽµâœ¨`,collected:!0,resetCollected:!1}}else return{isCorrect:!0,message:`Good! ${e(u).size}/${v.length} notes`,collected:!0,resetCollected:!1};else return o(u,new Set,!0),{isCorrect:!1,message:"Wrong note!",collected:!1,resetCollected:!0}}function Ie(r,t){const v=[...new Set(t)];return e(u).size===v.length}function Se(){e(p)<e(l).chords.length-1?(Te(p),o(u,new Set,!0)):(o(p,0),o(u,new Set,!0))}function we(r){const t=r.target;o(M,t.value,!0),o(u,new Set,!0)}function Oe(r){const t=r.target;o(G,parseInt(t.value),!0),o(u,new Set,!0)}function Ee(){o(b,!e(b)),e(b)&&o(V,K(e(l).chords),!0),o(u,new Set,!0)}function Pe(r){const t=r.target,v=parseInt(t.value);o(l,d[v],!0),o(p,0),o(u,new Set,!0),e(b)&&o(V,K(e(l).chords),!0)}{const r=(v,g=je)=>{var _=Je(),h=a(_),S=a(h),j=a(S,!0);n(S);var A=s(S,2);{var w=c=>{var i=Ke(),y=a(i);n(i),D(()=>P(y,`by ${e(l).composer??""}`)),$(c,i)};be(A,c=>{e(l).composer&&c(w)})}var F=s(A,2);{var B=c=>{var i=Xe(),y=a(i);n(i),D(()=>P(y,`Key: ${e(l).key??""}`)),$(c,i)};be(F,c=>{e(l).key&&c(B)})}var k=s(F,2),O=a(k);n(k),n(h);var z=s(h,2);ge(z,21,()=>e(l).chords,me,(c,i,y)=>{var m=Ye();let W;var fe=a(m),Re=a(fe);n(fe),n(m),D(()=>{W=He(m,1,"chord-box svelte-n1uxvh",null,W,{current:y===e(p),completed:y<e(p)}),P(Re,`${e(i).note??""}${e(i).type??""}`)}),$(c,m)}),n(z);var T=s(z,2),f=s(a(T),2);f.__change=Pe,ge(f,21,()=>d,me,(c,i,y)=>{var m=Ze(),W=a(m,!0);n(m),m.value=m.__value=y,D(()=>P(W,e(i).name)),$(c,m)}),n(f);var U;ie(f),n(T);var E=s(T,2),x=s(a(E),2);x.__change=we;var Y=a(x);Y.value=Y.__value="full-right";var Z=s(Y);Z.value=Z.__value="full-left";var J=s(Z);J.value=J.__value="1735";var ce=s(J);ce.value=ce.__value="1537",n(x);var ue;ie(x),n(E);var Q=s(E,2),de=a(Q),ee=a(de);qe(ee),ee.__change=Ee,$e(),n(de),n(Q);var pe=s(Q,2),C=s(a(pe),2);C.__change=Oe;var te=a(C);te.value=te.__value="0";var oe=s(te);oe.value=oe.__value="1";var ne=s(oe);ne.value=ne.__value="2";var _e=s(ne);_e.value=_e.__value="3",n(C);var he;ie(C),n(pe),n(_),D((c,i)=>{P(j,e(l).name),P(O,`Chord ${e(p)+1} of ${e(l).chords.length??""}`),U!==(U=c)&&(f.value=(f.__value=c)??"",ae(f,c)),ue!==(ue=e(M))&&(x.value=(x.__value=e(M))??"",ae(x,e(M))),Le(ee,e(b)),C.disabled=e(b),he!==(he=i)&&(C.value=(C.__value=i)??"",ae(C,i))},[()=>d.indexOf(e(l)),()=>e(b)?X():e(G)]),$(v,_)};let t=ke(()=>q().note);Fe(R,{randomMode:!1,generateExpectedNotes:Ce,generateScoreProps:ye,validateNoteEvent:Ne,isCompleted:Ie,onReset:xe,onComplete:Se,get initialNote(){return e(t)},description:H,exerciseType:"progression",children:r,$$slots:{default:!0}})}ze()}De(["change"]);export{vt as component,lt as universal};
