import"../chunks/NZTpNUN0.js";import{d as Ce,o as Oe,s as z}from"../chunks/DqFET-oV.js";import{p as ye,f as x,d as n,as as E,r as t,s,t as M,b as T,c as be,ad as A,aq as oe,aT as Fe,k as e,at as H,a as me}from"../chunks/CDrHVJbW.js";import{p as Te,i as P}from"../chunks/Ce3K4QLS.js";import{N as Le,e as Ve,i as je,A as Be}from"../chunks/Ce2LPhVx.js";import{r as qe,g as Je,s as O,i as ne,f as se}from"../chunks/CH0v-n_N.js";import{B as Ue,c as Ge}from"../chunks/D2YpDNXC.js";const re={root:"#e74c3c",third:"#f39c12",fifth:"#3498db",seventh:"#9b59b6",extension:"#2ecc71",tension:"#DDA0DD",none:"transparent"};function Ke(p,o){o.onToggle(!o.showChordTones)}var Qe=x('<div class="color-legend svelte-12nsc9v"><div class="legend-item svelte-12nsc9v"><div class="color-dot svelte-12nsc9v"></div> <span class="svelte-12nsc9v">Root</span></div> <div class="legend-item svelte-12nsc9v"><div class="color-dot svelte-12nsc9v"></div> <span class="svelte-12nsc9v">Third</span></div> <div class="legend-item svelte-12nsc9v"><div class="color-dot svelte-12nsc9v"></div> <span class="svelte-12nsc9v">Fifth</span></div> <div class="legend-item svelte-12nsc9v"><div class="color-dot svelte-12nsc9v"></div> <span class="svelte-12nsc9v">Seventh</span></div></div>'),We=x('<div class="chord-tone-toggle svelte-12nsc9v"><label class="toggle-container svelte-12nsc9v"><input type="checkbox" aria-label="Show chord tone colors" class="svelte-12nsc9v"/> <span class="toggle-switch svelte-12nsc9v"></span> <span class="toggle-label svelte-12nsc9v">Show Chord Tones</span></label> <!></div>');function Xe(p,o){ye(o,!0);let i=Te(o,"colors",3,re);var u=We(),f=n(u),m=n(f);qe(m),m.__change=[Ke,o],E(4),t(f);var F=s(f,2);{var L=C=>{var R=Qe(),D=n(R),V=n(D);E(2),t(D);var I=s(D,2),c=n(I);E(2),t(I);var l=s(I,2),_=n(l);E(2),t(l);var r=s(l,2),g=n(r);E(2),t(r),t(R),M(()=>{O(V,`background-color: ${i().root??""}`),O(c,`background-color: ${i().third??""}`),O(_,`background-color: ${i().fifth??""}`),O(g,`background-color: ${i().seventh??""}`)}),T(C,R)};P(F,C=>{o.showChordTones&&C(L)})}t(u),M(()=>Je(m,o.showChordTones)),T(p,u),be()}Ce(["change"]);function Ye(p,o){const i=p.target;A(o,i.value,!0)}function Ze(p,o){const i=p.target;A(o,parseInt(i.value),!0)}function $e(p,o){const i=p.target;A(o,i.value,!0)}var et=x("<option> </option>"),tt=x('<div class="control-group svelte-1hty940"><label for="chord-type" class="svelte-1hty940">Chord Type:</label> <select id="chord-type" class="svelte-1hty940"></select></div> <div class="control-group svelte-1hty940"><label for="inversion" class="svelte-1hty940">Inversion:</label> <select id="inversion" class="svelte-1hty940"><option>Root</option><option>1st</option><option>2nd</option><option>3rd</option></select></div> <div class="control-group svelte-1hty940"><label for="voicing" class="svelte-1hty940">Voicing:</label> <select id="voicing" class="svelte-1hty940"><option>Full</option><option>Left Hand</option><option>Right Hand</option><option>Split</option></select></div>',1),ot=x('<button class="svelte-1hty940"> </button>'),nt=x('<div class="control-group chord-tone-controls svelte-1hty940"><!></div>'),st=x('<div class="completion svelte-1hty940">ðŸŽ‰ Chord Completed!</div>'),rt=x('<div class="chord-info svelte-1hty940"><h2 class="chord-display svelte-1hty940"> </h2> <div class="chord-details svelte-1hty940"><span> </span> <span> </span></div></div> <div class="controls svelte-1hty940"><!> <div class="control-group svelte-1hty940"><button class="svelte-1hty940">Reset</button> <!></div> <!></div> <div class="exercise-status svelte-1hty940"><div class="progress"> </div> <div class="mistakes"> </div> <!></div>',1);function ut(p,o){ye(o,!0);let i=Te(o,"randomMode",3,!1),u=oe("maj7"),f=oe(0),m=oe("full");Oe(()=>{i()&&(o.randomChordType&&A(u,o.randomChordType,!0),o.randomInversion!==void 0&&A(f,o.randomInversion,!0))});function F(c){const l=c+"4",_=Le[l],r=Ge(_,e(u),e(f)),g=[r.root,r.third,r.fifth,r.seventh].filter(d=>d!==void 0);switch(e(m)){case"full":return g;case"left-hand":return[r.root,r.seventh].filter(b=>b!==void 0);case"right-hand":return[r.third,r.fifth];case"split":const d=[r.root-12,(r.seventh||r.root)-12].filter(b=>b>=24),v=[r.third,r.fifth];return[...d,...v];default:return g}}function L(c,l){return l.includes(c.noteNumber)?{isCorrect:!0,message:"Correct chord tone!"}:{isCorrect:!1,message:"Not a chord tone. Try again!"}}let C=H(()=>({name:`${e(u)}`,voicing:e(m),inversion:e(f)}));function R(c,l){const _=c%12,r=l.root%12,g=l.third%12,d=l.fifth%12,v=l.seventh?l.seventh%12:null;return _===r?"root":_===g?"third":_===d?"fifth":v!==null&&_===v?"seventh":"none"}function D(c,l=re){return l[c]}function V(c,l,_,r=re){const g=[];for(let d=c;d<=l;d++){const v=R(d,_),b=D(v,r);g.push({midiNote:d,noteNumber:d,role:v,color:b})}return g}function I(){i()&&o.onRandomComplete&&setTimeout(()=>{o.onRandomComplete()},1500)}{const c=(d,v=Fe)=>{var b=rt(),j=me(b),B=n(j),xe=n(B);t(B);var ae=s(B,2),q=n(ae),Ne=n(q);t(q);var ie=s(q,2),ke=n(ie);t(ie),t(ae),t(j);var J=s(j,2),le=n(J);{var we=a=>{var h=tt(),N=me(h),y=s(n(N),2);y.__change=[Ye,u],Ve(y,21,()=>Be,je,(Pe,te)=>{var S=et(),Ae=n(S,!0);t(S);var pe={};M(()=>{z(Ae,e(te)),pe!==(pe=e(te))&&(S.value=(S.__value=e(te))??"")}),T(Pe,S)}),t(y);var de;ne(y),t(N);var Q=s(N,2),k=s(n(Q),2);k.__change=[Ze,f];var W=n(k);W.value=W.__value=0;var X=s(W);X.value=X.__value=1;var Y=s(X);Y.value=Y.__value=2;var he=s(Y);he.value=he.__value=3,t(k);var ue;ne(k),t(Q);var _e=s(Q,2),w=s(n(_e),2);w.__change=[$e,m];var Z=n(w);Z.value=Z.__value="full";var $=s(Z);$.value=$.__value="left-hand";var ee=s($);ee.value=ee.__value="right-hand";var fe=s(ee);fe.value=fe.__value="split",t(w);var ge;ne(w),t(_e),M(()=>{de!==(de=e(u))&&(y.value=(y.__value=e(u))??"",se(y,e(u))),ue!==(ue=e(f))&&(k.value=(k.__value=e(f))??"",se(k,e(f))),ge!==(ge=e(m))&&(w.value=(w.__value=e(m))??"",se(w,e(m)))}),T(a,h)};P(le,a=>{i()||a(we)})}var U=s(le,2),ve=n(U);ve.__click=function(...a){v().resetExercise?.apply(this,a)};var ze=s(ve,2);{var Me=a=>{var h=ot();h.__click=function(...y){v().toggleDebug?.apply(this,y)};var N=n(h);t(h),M(()=>z(N,`${v().debugMode?"Hide":"Show"} Debug`)),T(a,h)};P(ze,a=>{i()||a(Me)})}t(U);var Re=s(U,2);{var De=a=>{var h=nt(),N=n(h);Xe(N,{get showChordTones(){return v().showChordTones},get onToggle(){return v().setShowChordTones}}),t(h),T(a,h)};P(Re,a=>{i()||a(De)})}t(J);var ce=s(J,2),G=n(ce),Ie=n(G);t(G);var K=s(G,2),Se=n(K);t(K);var Ee=s(K,2);{var He=a=>{var h=st();T(a,h)};P(Ee,a=>{v().completed&&a(He)})}t(ce),M(a=>{z(xe,`${v().selectedNote??""} ${e(C).name??""}`),z(Ne,`Voicing: ${e(C).voicing??""}`),z(ke,`Inversion: ${e(C).inversion===0?"Root":e(C).inversion===1?"1st":e(C).inversion===2?"2nd":"3rd"}`),z(Ie,`Progress: ${a??""}%`),z(Se,`Mistakes: ${v().mistakes??""}`)},[()=>Math.round(v().currentNotes.filter(a=>v().expectedNotes.includes(a)).length/v().expectedNotes.length*100)]),T(d,b)};let l=H(()=>i()?"Random Chord":"Jazz Chord Practice"),_=H(()=>i()?`Play the ${o.randomNote}${e(u)} chord`:"Practice playing jazz chords with different voicings and inversions"),r=H(()=>i()?o.randomNote:void 0),g=H(()=>({title:e(C).name}));Ue(p,{get exerciseTitle(){return e(l)},get exerciseDescription(){return e(_)},exerciseType:"chord",get initialSelectedNote(){return e(r)},get randomMode(){return i()},generateExpectedNotes:F,validateNoteEvent:L,keyboardProps:{chordToneInfo:[],showChordTones:!0},get scoreProps(){return e(g)},customControls:!0,onExerciseComplete:I,children:c,$$slots:{default:!0}})}return be({createChordToneMapping:V})}Ce(["change","click"]);export{ut as component};
