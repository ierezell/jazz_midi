import"../chunks/NZTpNUN0.js";import{d as oe,s as j,o as be,a as me}from"../chunks/BJdPA1W9.js";import{w as le,A as we,q as ke,at as ye,au as Me,z as Ce,G as Ie,I as Te,v as Ee,J as je,M as Ne,U as Ve,L as Se,p as ne,ar as X,a as Y,b as x,c as ie,f as T,d as c,s as d,r as l,t as V,k as e,ap as I,R as U,g as Ae,S as p,av as Ue,ao as Pe}from"../chunks/wFTEGHnI.js";import{i as P}from"../chunks/DB4UBEnh.js";import{e as z,i as F,A as ce,a as de,b as qe,c as ve,d as ue,f as De}from"../chunks/M4Hk-hxN.js";import{r as J,d as W}from"../chunks/BBAnfavV.js";import{component as Re}from"./4.DNISxq2F.js";import{component as Ge}from"./7.C3bP02OE.js";import{component as Le}from"./8.D1tJX4v9.js";function Ke(u,s,r){le&&we();var E=u,M=Ve,C,b,f=null,m=ke()?ye:Me;function h(){C&&Se(C),f!==null&&(f.lastChild.remove(),E.before(f),f=null),C=b}Ce(()=>{if(m(M,M=s())){var g=E,w=je();w&&(f=document.createDocumentFragment(),f.append(g=Ie())),b=Te(()=>r(g)),w?Ee.add_callback(h):h()}}),le&&(E=Ne)}const fe=["chord","scale","II-V-I"];var Oe=(u,s)=>s(u),ze=(u,s)=>s(u),Fe=(u,s)=>s.onClose(),Je=(u,s,r)=>s("allowedExerciseTypes",e(r),u.currentTarget.checked),We=T('<label class="checkbox-label svelte-1giufxc"><input type="checkbox"/> <span> </span></label>'),Ze=(u,s,r)=>s("allowedNotes",e(r),u.currentTarget.checked),Be=T('<label class="checkbox-label svelte-1giufxc"><input type="checkbox"/> <span> </span></label>'),He=(u,s,r)=>s("allowedChordTypes",e(r),u.currentTarget.checked),Qe=T('<label class="checkbox-label svelte-1giufxc"><input type="checkbox"/> <span> </span></label>'),Xe=(u,s,r)=>s("allowedInversions",e(r).toString(),u.currentTarget.checked),Ye=T('<label class="checkbox-label svelte-1giufxc"><input type="checkbox"/> <span> </span></label>'),$e=(u,s,r)=>s("allowedScaleModes",e(r),u.currentTarget.checked),ea=T('<label class="checkbox-label svelte-1giufxc"><input type="checkbox"/> <span> </span></label>'),aa=(u,s,r)=>s("allowedVoicings",e(r),u.currentTarget.checked),sa=T('<label class="checkbox-label svelte-1giufxc"><input type="checkbox"/> <span> </span></label>'),ta=T('<div class="popup-overlay svelte-1giufxc" role="dialog" aria-modal="true" aria-label="Configure exercises" tabindex="0"><div class="popup-content svelte-1giufxc"><button type="button" class="close-btn svelte-1giufxc" aria-label="Close">Ã—</button> <h2 class="svelte-1giufxc">Exercise Configuration</h2> <div class="config-grid svelte-1giufxc"><div class="config-section svelte-1giufxc"><h3 class="svelte-1giufxc">Exercise Types</h3> <div class="checkbox-grid svelte-1giufxc"></div></div> <div class="config-section svelte-1giufxc"><h3 class="svelte-1giufxc">Notes</h3> <div class="checkbox-grid svelte-1giufxc"></div></div> <div class="config-section svelte-1giufxc"><h3 class="svelte-1giufxc">Chord Types</h3> <div class="checkbox-grid svelte-1giufxc"></div></div> <div class="config-section svelte-1giufxc"><h3 class="svelte-1giufxc">Inversions</h3> <div class="checkbox-grid svelte-1giufxc"></div></div> <div class="config-section svelte-1giufxc"><h3 class="svelte-1giufxc">Scale Modes</h3> <div class="checkbox-grid svelte-1giufxc"></div></div> <div class="config-section svelte-1giufxc"><h3 class="svelte-1giufxc">Voicings</h3> <div class="checkbox-grid svelte-1giufxc"></div></div></div></div></div>');function ra(u,s){ne(s,!0);function r(f,m,h){let g=[];switch(f){case"allowedExerciseTypes":g=[...s.allowedExerciseTypes];break;case"allowedNotes":g=[...s.allowedNotes];break;case"allowedChordTypes":g=[...s.allowedChordTypes];break;case"allowedInversions":g=[...s.allowedInversions];break;case"allowedScaleModes":g=[...s.allowedScaleModes];break;case"allowedVoicings":g=[...s.allowedVoicings];break}if(h)g.push(m);else if(g.length>1){const w=g.indexOf(m);w>-1&&g.splice(w,1)}s.onUpdate(f,g.sort())}function E(f){(f instanceof MouseEvent&&f.target.classList.contains("popup-overlay")||f instanceof KeyboardEvent&&f.key==="Escape")&&s.onClose()}var M=X(),C=Y(M);{var b=f=>{var m=ta();m.__click=[Oe,E],m.__keydown=[ze,E];var h=c(m),g=c(h);g.__click=[Fe,s];var w=d(g,4),N=c(w),q=d(c(N),2);z(q,21,()=>fe,F,(k,i)=>{var v=We(),o=c(v);J(o),o.__change=[Je,r,i];var a=d(o,2),t=c(a,!0);l(a),l(v),V((n,_)=>{W(o,n),j(t,_)},[()=>s.allowedExerciseTypes.includes(e(i)),()=>e(i).charAt(0).toUpperCase()+e(i).slice(1)]),x(k,v)}),l(q),l(N);var D=d(N,2),$=d(c(D),2);z($,21,()=>ce,F,(k,i)=>{var v=Be(),o=c(v);J(o),o.__change=[Ze,r,i];var a=d(o,2),t=c(a,!0);l(a),l(v),V(n=>{W(o,n),j(t,e(i))},[()=>s.allowedNotes.includes(e(i))]),x(k,v)}),l($),l(D);var S=d(D,2),R=d(c(S),2);z(R,21,()=>de,F,(k,i)=>{var v=Qe(),o=c(v);J(o),o.__change=[He,r,i];var a=d(o,2),t=c(a,!0);l(a),l(v),V(n=>{W(o,n),j(t,e(i))},[()=>s.allowedChordTypes.includes(e(i))]),x(k,v)}),l(R),l(S);var A=d(S,2),G=d(c(A),2);z(G,21,()=>qe,F,(k,i)=>{var v=Ye(),o=c(v);J(o),o.__change=[Xe,r,i];var a=d(o,2),t=c(a,!0);l(a),l(v),V(n=>{W(o,n),j(t,e(i)===0?"Root":`${e(i)}${e(i)===1?"st":e(i)===2?"nd":"rd"}`)},[()=>s.allowedInversions.includes(e(i))]),x(k,v)}),l(G),l(A);var Z=d(A,2),ee=d(c(Z),2);z(ee,21,()=>ve,F,(k,i)=>{var v=ea(),o=c(v);J(o),o.__change=[$e,r,i];var a=d(o,2),t=c(a,!0);l(a),l(v),V(n=>{W(o,n),j(t,e(i))},[()=>s.allowedScaleModes.includes(e(i))]),x(k,v)}),l(ee),l(Z);var B=d(Z,2),H=d(c(B),2);z(H,21,()=>ue,F,(k,i)=>{var v=sa(),o=c(v);J(o),o.__change=[aa,r,i];var a=d(o,2),t=c(a,!0);l(a),l(v),V((n,_)=>{W(o,n),j(t,_)},[()=>s.allowedVoicings.includes(e(i)),()=>e(i).charAt(0).toUpperCase()+e(i).slice(1)]),x(k,v)}),l(H),l(B),l(w),l(h),l(m),x(f,m)};P(C,f=>{s.showPopup&&f(b)})}x(u,M),ie()}oe(["click","keydown","change"]);var la=(u,s)=>p(s,!0),oa=T('<div class="exercise-info svelte-2ui56j"><span class="exercise-type svelte-2ui56j"> </span> <span class="exercise-description svelte-2ui56j"> </span> <button class="config-btn svelte-2ui56j" type="button">âš™ï¸ Config</button> <button class="new-exercise-btn svelte-2ui56j">ğŸ² New</button></div>'),na=T('<div class="completion-overlay svelte-2ui56j"><div class="completion-message svelte-2ui56j"><h2 class="svelte-2ui56j">ğŸ‰ Exercise Completed!</h2> <p class="svelte-2ui56j">Great job! Next random exercise in <strong> </strong> seconds...</p> <button class="skip-btn svelte-2ui56j">Skip Wait</button></div></div>'),ia=T('<div class="loading svelte-2ui56j">Generating random exercise...</div>'),ca=T('<div class="random-exercise svelte-2ui56j"><div class="random-header svelte-2ui56j"><!></div> <!> <!> <!></div>');function ba(u,s){ne(s,!0);let r=I(U({type:"chord",key:"C",chordType:"maj7",voicing:"full",inversion:0,description:"Cmaj - Random Voicing"})),E=I(0),M=I(!1),C=I(0),b=null,f=I(U(ce)),m=I(U(de)),h=I(U([0,1,2,3])),g=I(U(ve)),w=I(U(ue)),N=I(U(fe)),q=I(!1);Ae(()=>{e(M)&&e(r)&&(b&&clearInterval(b),p(C,3),b=setInterval(()=>{Ue(C,-1),e(C)<=0&&(b&&clearInterval(b),S(),p(M,!1))},1e3))});function D(){const a=e(N)[Math.floor(Math.random()*e(N).length)],t=e(f)[Math.floor(Math.random()*e(f).length)];return $(a,t)}function $(a,t){switch(a){case"chord":{const n=e(m)[Math.floor(Math.random()*e(m).length)];let _=e(h)[Math.floor(Math.random()*e(h).length)],y=e(w)[Math.floor(Math.random()*e(w).length)];return De.includes(n)&&_>2&&(_=e(h)[Math.floor(Math.random()*(e(h).length-1))]),{type:a,key:t,chordType:n,voicing:y,inversion:_,description:`${t}${n}${_>0?` (${_}st inversion)`:""} - ${y}`}}case"scale":{const n=e(g)[Math.floor(Math.random()*e(g).length)];return{type:a,key:t,scaleMode:n,description:`${t} ${n}`}}case"II-V-I":{const n=e(h)[Math.floor(Math.random()*e(h).length)];let _=e(w)[Math.floor(Math.random()*e(w).length)];return{type:a,key:t,voicing:_,inversion:n,description:`${t} II-V-I Progression${n>0?` (${n}st inversion)`:""} ${_}`}}default:throw new Error(`Unknown exercise type: ${a}`)}}function S(){p(r,D(),!0),p(E,Date.now(),!0),p(M,!1),b&&(clearInterval(b),b=null),p(C,0)}function R(){p(M,!0)}be(()=>{p(r,D(),!0)}),me(()=>{b&&clearInterval(b)});var A=ca(),G=c(A),Z=c(G);{var ee=a=>{var t=oa(),n=c(t),_=c(n,!0);l(n);var y=d(n,2),Q=c(y,!0);l(y);var L=d(y,2);L.__click=[la,q];var ae=d(L,2);ae.__click=S,l(t),V(()=>{j(_,e(r).type),j(Q,e(r).description)}),x(a,t)};P(Z,a=>{e(r)&&a(ee)})}l(G);var B=d(G,2);ra(B,{get showPopup(){return e(q)},get allowedNotes(){return e(f)},get allowedChordTypes(){return e(m)},get allowedInversions(){return e(h)},get allowedScaleModes(){return e(g)},get allowedVoicings(){return e(w)},get allowedExerciseTypes(){return e(N)},onClose:()=>p(q,!1),onUpdate:(a,t)=>{switch(a){case"allowedNotes":p(f,t,!0);break;case"allowedChordTypes":p(m,t,!0);break;case"allowedInversions":p(h,t.map(Number),!0);break;case"allowedScaleModes":p(g,t,!0);break;case"allowedVoicings":p(w,t,!0);break;case"allowedExerciseTypes":p(N,t,!0);break}}});var H=d(B,2);{var k=a=>{var t=na(),n=c(t),_=d(c(n),2),y=d(c(_)),Q=c(y,!0);l(y),Pe(),l(_);var L=d(_,2);L.__click=S,l(n),l(t),V(()=>j(Q,e(C))),x(a,t)};P(H,a=>{e(M)&&a(k)})}var i=d(H,2);{var v=a=>{var t=X(),n=Y(t);Ke(n,()=>e(E),_=>{var y=X(),Q=Y(y);{var L=K=>{Re(K,{randomMode:!0,onComplete:R,get chordType(){return e(r).chordType},get inversion(){return e(r).inversion},get voicing(){return e(r).voicing}})},ae=K=>{var te=X(),ge=Y(te);{var _e=O=>{Ge(O,{randomMode:!0,onComplete:R,get scaleMode(){return e(r).scaleMode},sequentialMode:Math.random()>.5})},he=O=>{var re=X(),pe=Y(re);{var xe=se=>{Le(se,{randomMode:!0,onComplete:R,get inversion(){return e(r).inversion},get voicing(){return e(r).voicing}})};P(pe,se=>{e(r).type==="II-V-I"&&se(xe)},!0)}x(O,re)};P(ge,O=>{e(r).type==="scale"?O(_e):O(he,!1)},!0)}x(K,te)};P(Q,K=>{e(r).type==="chord"?K(L):K(ae,!1)})}x(_,y)}),x(a,t)},o=a=>{var t=ia();x(a,t)};P(i,a=>{e(r)?a(v):a(o,!1)})}l(A),x(u,A),ie()}oe(["click"]);export{ba as component};
