import"../chunks/NZTpNUN0.js";import{d as te,o as oe,s as M}from"../chunks/Chha1ELk.js";import{p as se,f as b,b as p,c as re,aT as ne,k as t,as as P,d as c,a as ie,s as _,t as S,aq as ae,ad as ce,b2 as le,r as a}from"../chunks/D14S_uxs.js";import{p as de,i as W}from"../chunks/DKDO6a7q.js";import{e as ve,M as y,N as x,i as ue}from"../chunks/CB_yojb1.js";import{a as he}from"../chunks/Bd7mbu-w.js";import{B as me,c as D}from"../chunks/CyUssLSY.js";import{u as fe}from"../chunks/gEm8VZDO.js";var ge=b('<div class="control-group svelte-453sxh"><button class="debug-btn svelte-453sxh"> </button> <button class="reset-btn svelte-453sxh">Reset</button></div>'),Ce=b('<div class="control-group svelte-453sxh"><button class="reset-btn svelte-453sxh">Reset</button></div>'),pe=b("<div> </div>"),_e=b('<div class="completion svelte-453sxh">ðŸŽ‰ ii-V-I Completed!</div>'),xe=b('<div class="progression-controls svelte-453sxh"><!> <div class="chord-progress svelte-453sxh"></div></div> <div class="exercise-status svelte-453sxh"><div class="current-chord svelte-453sxh"> </div> <div class="progress svelte-453sxh"> </div> <div class="mistakes svelte-453sxh"> </div> <!></div>',1),be=b('<div class="progression-exercise svelte-453sxh"><!></div>');function Te(z,m){se(m,!0);let f=de(m,"randomMode",3,!1),r=ae(0);function j(e){const o=x[e+"4"]+2,v=x[e+"4"]+7,l=x[e+"4"],u=D(o,"min7"),n=D(v,"7"),R=D(l,"maj7"),g=[u,n,R][t(r)];return[g.root,g.third,g.fifth,g.seventh].filter(T=>T!=null)}function A(e,o,v){if(o.includes(e.noteNumber)){const l=v.filter(n=>o.includes(n)).length,u=o.length;return l===u?t(r)<2?(setTimeout(()=>{le(r)},1e3),{isCorrect:!0,message:q()}):{isCorrect:!0,message:q()}:{isCorrect:!0,message:`Good! ${l}/${u} notes for ${C("C")[t(r)]}`}}return{isCorrect:!1,message:`Wrong note! Expected: ${C()[t(r)]}`}}function F(e,o){return o.length===0?!1:e.filter(u=>o.includes(u)).length===o.length&&t(r)===2}function C(e="C"){const o=x[e+"4"]+2,v=x[e+"4"]+7,l=x[e+"4"];return[`${y[o].slice(0,-1)}m7`,`${y[v].slice(0,-1)}7`,`${y[l].slice(0,-1)}maj7`]}function q(){return t(r)<2?`Great! Now play ${C()[t(r)+1]}`:"Perfect! Complete ii-V-I progression! ðŸŽµâœ¨"}function H(){f()&&m.onRandomComplete?setTimeout(()=>{m.onRandomComplete()},1500):fe.updateNoteProgress("C","progression",void 0,!0,10,100)}function J(){ce(r,0)}let K=P(()=>{const e=f()?m.randomNote:"C";return{notes:j(e||"C").map(o=>y[o]),highlightedNotes:[],title:`${e||"C"} ii-V-I: ${C(e||"C")[t(r)]} (${t(r)+1}/3)`}});oe(()=>{});var I=be(),L=c(I);{const e=(u,n=ne)=>{var R=xe(),k=ie(R),g=c(k);{var T=s=>{var i=ge(),d=c(i);d.__click=function(...N){n().toggleDebug?.apply(this,N)};var h=c(d);a(d);var E=_(d,2);E.__click=function(...N){n().resetExercise?.apply(this,N)},a(i),S(()=>M(h,`${n().debugMode?"Disable":"Enable"} Debug Mode`)),p(s,i)},O=s=>{var i=Ce(),d=c(i);d.__click=function(...h){n().resetExercise?.apply(this,h)},a(i),p(s,i)};W(g,s=>{f()?s(O,!1):s(T)})}var B=_(g,2);ve(B,21,()=>C(n().selectedNote),ue,(s,i,d)=>{var h=pe();let E;var N=c(h,!0);a(h),S(ee=>{E=he(h,1,"chord-indicator svelte-453sxh",null,E,ee),M(N,t(i))},[()=>({active:d===t(r),completed:d<t(r)})]),p(s,h)}),a(B),a(k);var G=_(k,2),$=c(G),Q=c($);a($);var V=_($,2),U=c(V);a(V);var w=_(V,2),X=c(w);a(w);var Y=_(w,2);{var Z=s=>{var i=_e();p(s,i)};W(Y,s=>{n().completed&&s(Z)})}a(G),S((s,i)=>{M(Q,`Current: ${s??""} (${t(r)+1}/3)`),M(U,`Progress: ${i??""}%`),M(X,`Mistakes: ${n().mistakes??""}`)},[()=>C(n().selectedNote)[t(r)],()=>Math.round(n().currentNotes.filter(s=>n().expectedNotes.includes(s)).length/n().expectedNotes.length*100)]),p(u,R)};let o=P(()=>f()?"Random ii-V-I Progression":"ii-V-I Progression"),v=P(()=>f()?`Play ${m.randomNote} ii-V-I progression`:"Play each chord in sequence: ii7 - V7 - Imaj7"),l=P(()=>f()?m.randomNote:"C");me(L,{get exerciseTitle(){return t(o)},get exerciseDescription(){return t(v)},get initialSelectedNote(){return t(l)},get randomMode(){return f()},generateExpectedNotes:j,validateNoteEvent:A,isCompleted:F,get scoreProps(){return t(K)},keyboardProps:{chordToneInfo:[],showChordTones:!0},customControls:!0,onExerciseComplete:H,onExerciseReset:J,children:e,$$slots:{default:!0}})}a(I),p(z,I),re()}te(["click"]);export{Te as component};
