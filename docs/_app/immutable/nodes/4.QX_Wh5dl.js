import{t as x,a as N}from"../chunks/D4BXdcC1.js";import{p as te,a5 as b,a6 as oe,a7 as s,k as e,c as p,a as ae,s as r,r as c,a8 as i,t as w}from"../chunks/Dpbo9POk.js";import{s as I}from"../chunks/DHZI45yO.js";import{i as se}from"../chunks/CjAJ5wv6.js";import{e as H,i as P}from"../chunks/Drm_huYl.js";import{S as le,K as R,b as q,e as re,o as ne}from"../chunks/xsHg306o.js";import{o as ie}from"../chunks/BvgYcItv.js";import{c as pe,N as E,M as ce,R as ve,A as ue,a as de,g as me}from"../chunks/BiFJXFoK.js";var _e=x("<option> </option>"),fe=x("<option> </option>"),he=x('<p class="svelte-1m3v1yp"> </p>'),ge=x('<main class="svelte-1m3v1yp"><h1>Scales</h1> <h2>Major Scale</h2> <!> <!> <br> <br> <!> <label for="note-select" class="svelte-1m3v1yp">Select a Note:</label> <select class="svelte-1m3v1yp"><option>--Choose a Note--</option><!></select> <label for="chord-select" class="svelte-1m3v1yp">Select a Type:</label> <select class="svelte-1m3v1yp"><option>--Choose a Chord Type--</option><!></select> <!></main>');function Te(z,G){te(G,!0);let v=b(oe([])),J=s(()=>e(v).map(t=>t.noteNumber)),M,f=b("C"),S=b("maj7"),A=s(()=>e(f)+"4"),h=s(()=>pe(E[e(A)],e(S))),u=s(()=>[e(h).root,e(h).third,e(h).fifth,e(h).seventh].filter(t=>t!=null&&t!=null)),F=s(()=>e(u).map(t=>ce[t].slice(0,-1)+"4")),l=[],d=b(""),m=null,_=null;function L(t){const o=me(t);o.type==="on"?(i(v,[o,...e(v)],!0),l.push(o.noteNumber),l=[...new Set(l)],l.every(a=>e(u).includes(a))?l.length===e(u).length?(i(d,"Bravo!"),_&&_.play(),l=[]):i(d,`${e(u).length-l.length} notes to go`):(i(d,"Try again"),m&&m.play(),l=[])):i(v,e(v).filter(a=>a.noteFullName!==o.noteFullName),!0)}ie(async()=>{m=new Audio(re),m.volume=.5,m.loop=!1,_=new Audio(ne),_.volume=.5,_.loop=!1;try{M=await ve(),console.log("Scale MIDI Access obtained:",M),M.inputs.forEach(o=>{o.onmidimessage=L})}catch(t){console.error("Failed to obtain MIDI Access:",t)}});var C=ge(),K=r(p(C),4);const O=s(()=>[e(F).map(t=>t.replace("4","3"))]),Q=s(()=>[e(F).map(t=>t.replace("4","4"))]);le(K,{get selectedNote(){return e(f)},get leftHand(){return e(O)},get rightHand(){return e(Q)}});var j=r(K,2);const U=s(()=>E[e(A)]+11);R(j,{get midiNotes(){return e(u)},get middleC(){return e(U)},octaves:2});var B=r(j,6);const V=s(()=>E[e(A)]+11);R(B,{get midiNotes(){return e(J)},get middleC(){return e(V)},octaves:2});var g=r(B,4),T=p(g);T.value=((T.__value="")==null,"");var W=r(T);H(W,17,()=>ue,P,(t,o)=>{var a=_e(),$={},n=p(a,!0);c(a),w(()=>{$!==($=e(o))&&(a.value=(a.__value=e(o))==null?"":e(o)),I(n,e(o))}),N(t,a)}),c(g);var y=r(g,4),k=p(y);k.value=((k.__value="")==null,"");var X=r(k);H(X,17,()=>de,P,(t,o,a,$)=>{var n=fe(),D={},ee=p(n,!0);c(n),w(()=>{D!==(D=e(o))&&(n.value=(n.__value=e(o))==null?"":e(o)),I(ee,e(o))}),N(t,n)}),c(y);var Y=r(y,2);{var Z=t=>{var o=he(),a=p(o,!0);c(o),w(()=>I(a,e(d))),N(t,o)};se(Y,t=>{e(d)&&t(Z)})}c(C),q(g,()=>e(f),t=>i(f,t)),q(y,()=>e(S),t=>i(S,t)),N(z,C),ae()}export{Te as component};
