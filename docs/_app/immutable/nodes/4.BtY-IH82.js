import"../chunks/NZTpNUN0.js";import{p as fe,N as H,O as V,c as he,P as _e,f as K,a as F,k as e,Q as $,s as n,d as C,r as c,b as T,R as k,S as ee,t as E,T as ge}from"../chunks/DekTh3_k.js";import{d as pe,s as B}from"../chunks/BEn0398A.js";import{i as G}from"../chunks/De59rqUo.js";import{A as te,N as me,D as Ce,e as ye,i as Me,a as be}from"../chunks/BcYS4v02.js";import{i as O,s as S}from"../chunks/9bBOD8_0.js";import{B as Te,g as ke,c as xe}from"../chunks/Bq00vTX4.js";function Ne(v,t){const u=v.target;k(t,u.value,!0)}function je(v,t){const u=v.target;k(t,parseInt(u.value),!0)}function He(v,t){const u=v.target;k(t,u.value,!0)}var Ee=K("<option> </option>"),Re=K('<div class="control-group svelte-t0jkd5"><label for="chord-type" class="svelte-t0jkd5">Chord Type:</label> <select id="chord-type"></select></div> <div class="control-group svelte-t0jkd5"><label for="inversion" class="svelte-t0jkd5">Inversion:</label> <select id="inversion"><option>Root</option><option>1st</option><option>2nd</option><option>3rd</option></select></div> <div class="control-group svelte-t0jkd5"><label for="voicing" class="svelte-t0jkd5">Voicing:</label> <select id="voicing"><option>Full Right Hand</option><option>Full Left Hand</option><option>1 & 7 Left / 3 & 5 Right</option><option>1 & 5 Left / 3 & 7 Right</option></select></div>',1),Ae=K('<!> <div class="controls svelte-t0jkd5"><!></div>',1);function Be(v,t){fe(t,!0);const u="Play the notes of the displayed chord on your MIDI keyboard. Try to match the voicing and inversion shown.";let Q=["maj7","min7","7","dom7","half-dim7","dim7"],f=H(V(t.chordType??(t.randomMode?Q[Math.floor(Math.random()*Q.length)]:"maj7"))),h=H(V(t.inversion??(t.randomMode?Math.floor(Math.random()*4):0))),_=H(V(t.voicing??(t.randomMode?te[Math.floor(Math.random()*te.length)]:"full-right"))),j=H(!1);function oe(){k(j,!1)}function ae(l){const a=l+Ce,g=me[a],o=xe(g,e(f),e(h)),y=[o.root,o.third,o.fifth,o.seventh].filter(r=>r!==void 0);switch(e(_)){case"full-right":return y;case"full-left":return y.map(r=>r-12).filter(r=>r>=24);case"1735":return[o.root-12,(o.seventh||o.root)-12,o.third,o.fifth].filter(r=>r!==void 0&&r>=24);case"1537":return[o.root-12,o.fifth-12,o.third,o.seventh||o.root].filter(r=>r!==void 0&&r>=24);default:return y}}function re(l,a,g){return g.includes(a.noteNumber)?{isCorrect:!0,message:"Correct chord tone!",collected:!0,resetCollected:!1}:{isCorrect:!1,message:"Not a chord tone. Try again!",collected:!1,resetCollected:!0}}function ne(l){try{const a=ke(l,e(f),e(h),e(_));return console.debug("Generated score data:",{selectedNote:l,chordType:e(f),voicing:e(_),inversion:e(h),scoreData:a}),{leftHand:a.leftHand,rightHand:a.rightHand,selectedNote:l}}catch(a){return console.error("Error generating score data:",a),{selectedNote:"C",leftHand:[[]],rightHand:[["C4","E4","G4"]]}}}function le(l,a){return l.length===a.length&&l.every(g=>a.includes(g))}Te(v,{get randomMode(){return t.randomMode},generateExpectedNotes:ae,generateScoreProps:ne,validateNoteEvent:re,isCompleted:le,onReset:oe,get onComplete(){return t.onComplete},get initialNote(){return t.rootKey},description:u,children:(a,g=_e)=>{var o=Ae();const y=$(()=>e(j)),r=$(()=>g().completed);var U=F(o);{var ie=i=>{var d=ee();E(()=>B(d,k(j,!0))),T(i,d)},se=i=>{var d=ge(),x=F(d);{var s=M=>{var b=ee();E(()=>B(b,k(j,!1))),T(M,b)};G(x,M=>{!e(r)&&e(y)&&M(s)},!0)}T(i,d)};G(U,i=>{e(r)&&!e(y)?i(ie):i(se,!1)})}var q=n(U,2),de=C(q);{var ce=i=>{var d=Re(),x=F(d),s=n(C(x),2);s.__change=[Ne,f],ye(s,21,()=>be,Me,(ve,P)=>{var N=Ee(),ue=C(N,!0);c(N);var Z={};E(()=>{B(ue,e(P)),Z!==(Z=e(P))&&(N.value=(N.__value=e(P))??"")}),T(ve,N)}),c(s);var M;O(s),c(x);var b=n(x,2),p=n(C(b),2);p.__change=[je,h];var R=C(p);R.value=R.__value=0;var A=n(R);A.value=A.__value=1;var D=n(A);D.value=D.__value=2;var z=n(D);z.value=z.__value=3,c(p);var J;O(p),c(b);var W=n(b,2),m=n(C(W),2);m.__change=[He,_];var I=C(m);I.value=I.__value="full-right";var w=n(I);w.value=w.__value="full-left";var L=n(w);L.value=L.__value="1735";var X=n(L);X.value=X.__value="1537",c(m);var Y;O(m),c(W),E(()=>{M!==(M=e(f))&&(s.value=(s.__value=e(f))??"",S(s,e(f))),J!==(J=e(h))&&(p.value=(p.__value=e(h))??"",S(p,e(h))),Y!==(Y=e(_))&&(m.value=(m.__value=e(_))??"",S(m,e(_)))}),T(i,d)};G(de,i=>{t.randomMode||i(ce)})}c(q),T(a,o)},$$slots:{default:!0}}),he()}pe(["change"]);export{Be as component};
