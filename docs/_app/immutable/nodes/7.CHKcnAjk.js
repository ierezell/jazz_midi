import"../chunks/NZTpNUN0.js";import{d as ae,s as T,o as ce,a as ie}from"../chunks/BEn0398A.js";import{q as ee,A as ne,w as de,av as ve,aw as ue,z as _e,G as he,I as fe,x as ge,J as pe,M as xe,U as be,L as we,p as se,T as Y,a as $,b as m,c as te,f as y,d as o,s as d,r as l,t as j,k as e,N as M,O as S,g as me,R as w,W as ke,V as ye}from"../chunks/DekTh3_k.js";import{i as Z}from"../chunks/De59rqUo.js";import{e as G,i as q,c as Ie,a as Me,f as Ce,d as le,A as re,g as Te}from"../chunks/BcYS4v02.js";import{r as L,e as O}from"../chunks/9bBOD8_0.js";function Ee(u,t,c){ee&&ne();var E=u,C=be,I,p,_=null,x=de()?ve:ue;function f(){I&&we(I),_!==null&&(_.lastChild.remove(),E.before(_),_=null),I=p}_e(()=>{if(x(C,C=t())){var h=E,b=pe();b&&(_=document.createDocumentFragment(),_.append(h=he())),p=fe(()=>c(h)),b?ge.add_callback(f):f()}}),ee&&(E=xe)}const je=["chord","scale","II-V-I"];var Ne=(u,t)=>t(u),Ve=(u,t)=>t(u),Ae=(u,t)=>t.onClose(),Se=(u,t,c)=>t("allowedExerciseTypes",e(c),u.currentTarget.checked),Ue=y('<label class="checkbox-label svelte-1giufxc"><input type="checkbox"/> <span> </span></label>'),Pe=(u,t,c)=>t("allowedNotes",e(c),u.currentTarget.checked),Re=y('<label class="checkbox-label svelte-1giufxc"><input type="checkbox"/> <span> </span></label>'),De=(u,t,c)=>t("allowedChordTypes",e(c),u.currentTarget.checked),Ge=y('<label class="checkbox-label svelte-1giufxc"><input type="checkbox"/> <span> </span></label>'),qe=(u,t,c)=>t("allowedInversions",e(c).toString(),u.currentTarget.checked),Le=y('<label class="checkbox-label svelte-1giufxc"><input type="checkbox"/> <span> </span></label>'),Oe=(u,t,c)=>t("allowedScaleModes",e(c),u.currentTarget.checked),Fe=y('<label class="checkbox-label svelte-1giufxc"><input type="checkbox"/> <span> </span></label>'),Ke=(u,t,c)=>t("allowedVoicings",e(c),u.currentTarget.checked),We=y('<label class="checkbox-label svelte-1giufxc"><input type="checkbox"/> <span> </span></label>'),ze=y('<div class="popup-overlay svelte-1giufxc" role="dialog" aria-modal="true" aria-label="Configure exercises" tabindex="0"><div class="popup-content svelte-1giufxc"><button type="button" class="close-btn svelte-1giufxc" aria-label="Close">√ó</button> <h2 class="svelte-1giufxc">Exercise Configuration</h2> <div class="config-grid svelte-1giufxc"><div class="config-section svelte-1giufxc"><h3 class="svelte-1giufxc">Exercise Types</h3> <div class="checkbox-grid svelte-1giufxc"></div></div> <div class="config-section svelte-1giufxc"><h3 class="svelte-1giufxc">Notes</h3> <div class="checkbox-grid svelte-1giufxc"></div></div> <div class="config-section svelte-1giufxc"><h3 class="svelte-1giufxc">Chord Types</h3> <div class="checkbox-grid svelte-1giufxc"></div></div> <div class="config-section svelte-1giufxc"><h3 class="svelte-1giufxc">Inversions</h3> <div class="checkbox-grid svelte-1giufxc"></div></div> <div class="config-section svelte-1giufxc"><h3 class="svelte-1giufxc">Scale Modes</h3> <div class="checkbox-grid svelte-1giufxc"></div></div> <div class="config-section svelte-1giufxc"><h3 class="svelte-1giufxc">Voicings</h3> <div class="checkbox-grid svelte-1giufxc"></div></div></div></div></div>');function Je(u,t){se(t,!0);function c(_,x,f){let h=[];switch(_){case"allowedExerciseTypes":h=[...t.allowedExerciseTypes];break;case"allowedNotes":h=[...t.allowedNotes];break;case"allowedChordTypes":h=[...t.allowedChordTypes];break;case"allowedInversions":h=[...t.allowedInversions];break;case"allowedScaleModes":h=[...t.allowedScaleModes];break;case"allowedVoicings":h=[...t.allowedVoicings];break}if(f)h.push(x);else if(h.length>1){const b=h.indexOf(x);b>-1&&h.splice(b,1)}t.onUpdate(_,h.sort())}function E(_){(_ instanceof MouseEvent&&_.target.classList.contains("popup-overlay")||_ instanceof KeyboardEvent&&_.key==="Escape")&&t.onClose()}var C=Y(),I=$(C);{var p=_=>{var x=ze();x.__click=[Ne,E],x.__keydown=[Ve,E];var f=o(x),h=o(f);h.__click=[Ae,t];var b=d(h,4),N=o(b),U=d(o(N),2);G(U,21,()=>je,q,(k,i)=>{var v=Ue(),a=o(v);L(a),a.__change=[Se,c,i];var s=d(a,2),r=o(s,!0);l(s),l(v),j((n,g)=>{O(a,n),T(r,g)},[()=>t.allowedExerciseTypes.includes(e(i)),()=>e(i).charAt(0).toUpperCase()+e(i).slice(1)]),m(k,v)}),l(U),l(N);var P=d(N,2),B=d(o(P),2);G(B,21,()=>Ie,q,(k,i)=>{var v=Re(),a=o(v);L(a),a.__change=[Pe,c,i];var s=d(a,2),r=o(s,!0);l(s),l(v),j(n=>{O(a,n),T(r,e(i))},[()=>t.allowedNotes.includes(e(i))]),m(k,v)}),l(B),l(P);var V=d(P,2),R=d(o(V),2);G(R,21,()=>Me,q,(k,i)=>{var v=Ge(),a=o(v);L(a),a.__change=[De,c,i];var s=d(a,2),r=o(s,!0);l(s),l(v),j(n=>{O(a,n),T(r,e(i))},[()=>t.allowedChordTypes.includes(e(i))]),m(k,v)}),l(R),l(V);var A=d(V,2),H=d(o(A),2);G(H,21,()=>Ce,q,(k,i)=>{var v=Le(),a=o(v);L(a),a.__change=[qe,c,i];var s=d(a,2),r=o(s,!0);l(s),l(v),j(n=>{O(a,n),T(r,e(i)===0?"Root":`${e(i)}${e(i)===1?"st":e(i)===2?"nd":"rd"}`)},[()=>t.allowedInversions.includes(e(i))]),m(k,v)}),l(H),l(A);var F=d(A,2),K=d(o(F),2);G(K,21,()=>le,q,(k,i)=>{var v=Fe(),a=o(v);L(a),a.__change=[Oe,c,i];var s=d(a,2),r=o(s,!0);l(s),l(v),j(n=>{O(a,n),T(r,e(i))},[()=>t.allowedScaleModes.includes(e(i))]),m(k,v)}),l(K),l(F);var W=d(F,2),Q=d(o(W),2);G(Q,21,()=>re,q,(k,i)=>{var v=We(),a=o(v);L(a),a.__change=[Ke,c,i];var s=d(a,2),r=o(s,!0);l(s),l(v),j((n,g)=>{O(a,n),T(r,g)},[()=>t.allowedVoicings.includes(e(i)),()=>e(i).charAt(0).toUpperCase()+e(i).slice(1)]),m(k,v)}),l(Q),l(W),l(b),l(f),l(x),m(_,x)};Z(I,_=>{t.showPopup&&_(p)})}m(u,C),te()}ae(["click","keydown","change"]);var Ze=(u,t)=>w(t,!0),Be=y('<div class="exercise-info svelte-2ui56j"><span class="exercise-type svelte-2ui56j"> </span> <span class="exercise-description svelte-2ui56j"> </span> <button class="config-btn svelte-2ui56j" type="button">‚öôÔ∏è Config</button> <button class="new-exercise-btn svelte-2ui56j">üé≤ New</button></div>'),He=y('<div class="completion-overlay svelte-2ui56j"><div class="completion-message svelte-2ui56j"><h2 class="svelte-2ui56j">üéâ Exercise Completed!</h2> <p class="svelte-2ui56j">Great job! Next random exercise in <strong> </strong> seconds...</p> <button class="skip-btn svelte-2ui56j">Skip Wait</button></div></div>'),Qe=y("<div> </div>"),Xe=y('<div class="loading svelte-2ui56j">Generating random exercise...</div>'),Ye=y('<div class="random-exercise svelte-2ui56j"><div class="random-header svelte-2ui56j"><!></div> <!> <!> <!></div>');function ra(u,t){se(t,!0);let c=M(S({type:"chord",key:"C",chordType:"maj7",voicing:"full-right",inversion:0,description:"Cmaj - Random Voicing"})),E=M(0),C=M(!1),I=M(0),p=null,_=M(S(["C","F","G"])),x=M(S(["maj7","min7","7","major","minor"])),f=M(S([0,1,2,3])),h=M(S(le)),b=M(S(re)),N=M(S(["chord","II-V-I","scale"])),U=M(!1);me(()=>{e(C)&&e(c)&&(p&&clearInterval(p),w(I,3),p=setInterval(()=>{ke(I,-1),e(I)<=0&&(p&&clearInterval(p),V(),w(C,!1))},1e3))});function P(){const a=e(N)[Math.floor(Math.random()*e(N).length)],s=e(_)[Math.floor(Math.random()*e(_).length)];return B(a,s)}function B(a,s){switch(a){case"chord":{const r=e(x)[Math.floor(Math.random()*e(x).length)];let n=e(f)[Math.floor(Math.random()*e(f).length)],g=e(b)[Math.floor(Math.random()*e(b).length)];return Te.includes(r)&&n>2&&(n=e(f)[Math.floor(Math.random()*(e(f).length-1))]),{type:a,key:s,chordType:r,voicing:g,inversion:n,description:`${s}${r}${n>0?` (${n}st inversion)`:""} - ${g}`}}case"scale":{const r=e(h)[Math.floor(Math.random()*e(h).length)];return{type:a,key:s,scaleMode:r,description:`${s} ${r}`}}case"II-V-I":{const r=e(f)[Math.floor(Math.random()*e(f).length)];let n=e(b)[Math.floor(Math.random()*e(b).length)];return{type:a,key:s,voicing:n,inversion:r,description:`${s} II-V-I Progression${r>0?` (${r}st inversion)`:""} ${n}`}}default:throw new Error(`Unknown exercise type: ${a}`)}}function V(){w(c,P(),!0),w(E,Date.now(),!0),w(C,!1),p&&(clearInterval(p),p=null),w(I,0)}ce(()=>{w(c,P(),!0)}),ie(()=>{p&&clearInterval(p)});var R=Ye(),A=o(R),H=o(A);{var F=a=>{var s=Be(),r=o(s),n=o(r,!0);l(r);var g=d(r,2),z=o(g,!0);l(g);var D=d(g,2);D.__click=[Ze,U];var J=d(D,2);J.__click=V,l(s),j(()=>{T(n,e(c).type),T(z,e(c).description)}),m(a,s)};Z(H,a=>{e(c)&&a(F)})}l(A);var K=d(A,2);Je(K,{get showPopup(){return e(U)},get allowedNotes(){return e(_)},get allowedChordTypes(){return e(x)},get allowedInversions(){return e(f)},get allowedScaleModes(){return e(h)},get allowedVoicings(){return e(b)},get allowedExerciseTypes(){return e(N)},onClose:()=>w(U,!1),onUpdate:(a,s)=>{switch(a){case"allowedNotes":w(_,s,!0);break;case"allowedChordTypes":w(x,s,!0);break;case"allowedInversions":w(f,s.map(Number),!0);break;case"allowedScaleModes":w(h,s,!0);break;case"allowedVoicings":w(b,s,!0);break;case"allowedExerciseTypes":w(N,s,!0);break}}});var W=d(K,2);{var Q=a=>{var s=He(),r=o(s),n=d(o(r),2),g=d(o(n)),z=o(g,!0);l(g),ye(),l(n);var D=d(n,2);D.__click=V,l(r),l(s),j(()=>T(z,e(I))),m(a,s)};Z(W,a=>{e(C)&&a(Q)})}var k=d(W,2);{var i=a=>{var s=Y(),r=$(s);Ee(r,()=>e(E),n=>{var g=Y(),z=$(g);{var D=J=>{var X=Qe(),oe=o(X);l(X),j(()=>T(oe,`Random exercise type: ${e(c).type??""} (component not implemented)`)),m(J,X)};Z(z,J=>{e(c).type==="chord"&&J(D)})}m(n,g)}),m(a,s)},v=a=>{var s=Xe();m(a,s)};Z(k,a=>{e(c)?a(i):a(v,!1)})}l(R),m(u,R),te()}ae(["click"]);export{ra as component};
