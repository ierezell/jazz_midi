import"../chunks/NZTpNUN0.js";import{p as fe,O as R,P as F,Q as he,c as _e,R as T,k as e,f as K,a as j,b as M,s as n,S as $,d as C,r as c,T as ee,t as D,V as ge}from"../chunks/DFYG1ZU2.js";import{d as pe,s as B}from"../chunks/BgsxT_DW.js";import{i as G}from"../chunks/iFgn1dkZ.js";import{f as te,N as me,D as Ce,e as ye,i as be,b as xe}from"../chunks/Cxn_sF4j.js";import{i as O,s as S}from"../chunks/DD47jCIl.js";import{B as Me,a as Te,g as Ne}from"../chunks/CcldRWvO.js";function He(v,t){const u=v.target;T(t,u.value,!0)}function Ee(v,t){const u=v.target;T(t,parseInt(u.value),!0)}function Re(v,t){const u=v.target;T(t,u.value,!0)}var De=K("<option> </option>"),Ie=K('<div class="control-group svelte-b6xay4"><label for="chord-type" class="svelte-b6xay4">Chord Type:</label> <select id="chord-type"></select></div> <div class="control-group svelte-b6xay4"><label for="inversion" class="svelte-b6xay4">Inversion:</label> <select id="inversion"><option>Root</option><option>1st</option><option>2nd</option><option>3rd</option></select></div> <div class="control-group svelte-b6xay4"><label for="voicing" class="svelte-b6xay4">Voicing:</label> <select id="voicing"><option>Full Right Hand</option><option>Full Left Hand</option><option>1 & 7 Left / 3 & 5 Right</option><option>1 & 5 Left / 3 & 7 Right</option></select></div>',1),Ve=K('<!> <div class="controls svelte-b6xay4"><!></div>',1);function Be(v,t){fe(t,!0);const u="Play the notes of the displayed chord on your MIDI keyboard. Try to match the voicing and inversion shown.";let Q=["maj7","min7","7","dom7","half-dim7","dim7"],f=R(F(t.chordType??(t.randomMode?Q[Math.floor(Math.random()*Q.length)]:"maj7"))),h=R(F(t.inversion??(t.randomMode?Math.floor(Math.random()*4):0))),_=R(F(t.voicing??(t.randomMode?te[Math.floor(Math.random()*te.length)]:"full-right"))),E=R(!1);function oe(){T(E,!1)}function ae(l){const a=l+Ce,g=me[a],o=Te(g,e(f),e(h)),y=[o.root,o.third,o.fifth,o.seventh].filter(r=>r!==void 0);switch(e(_)){case"full-right":return y;case"full-left":return y.map(r=>r-12).filter(r=>r>=24);case"1735":return[o.root-12,(o.seventh||o.root)-12,o.third,o.fifth].filter(r=>r!==void 0&&r>=24);case"1537":return[o.root-12,o.fifth-12,o.third,o.seventh||o.root].filter(r=>r!==void 0&&r>=24);default:return y}}function re(l,a,g){return g.includes(a.noteNumber)?{isCorrect:!0,message:"Correct chord tone!",collected:!0,resetCollected:!1}:{isCorrect:!1,message:"Not a chord tone. Try again!",collected:!1,resetCollected:!0}}function ne(l){try{const a=Ne(l,e(f),e(h),e(_));return console.debug("Generated score data:",{selectedNote:l,chordType:e(f),voicing:e(_),inversion:e(h),scoreData:a}),{leftHand:a.leftHand,rightHand:a.rightHand,selectedNote:l}}catch(a){return console.error("Error generating score data:",a),{selectedNote:"C",leftHand:[[]],rightHand:[["C4","E4","G4"]]}}}function le(l,a){return l.length===a.length&&l.every(g=>a.includes(g))}Me(v,{get randomMode(){return t.randomMode},generateExpectedNotes:ae,generateScoreProps:ne,validateNoteEvent:re,isCompleted:le,onReset:oe,get onComplete(){return t.onComplete},get initialNote(){return t.rootKey},description:u,children:(a,g=he)=>{const o=$(()=>e(E)),y=$(()=>g().completed);var r=Ve(),U=j(r);{var ie=i=>{var d=ee();D(()=>B(d,T(E,!0))),M(i,d)},se=i=>{var d=ge(),N=j(d);{var s=b=>{var x=ee();D(()=>B(x,T(E,!1))),M(b,x)};G(N,b=>{!e(y)&&e(o)&&b(s)},!0)}M(i,d)};G(U,i=>{e(y)&&!e(o)?i(ie):i(se,!1)})}var q=n(U,2),de=C(q);{var ce=i=>{var d=Ie(),N=j(d),s=n(C(N),2);s.__change=[He,f],ye(s,21,()=>xe,be,(ve,k)=>{var H=De(),ue=C(H,!0);c(H);var Z={};D(()=>{B(ue,e(k)),Z!==(Z=e(k))&&(H.value=(H.__value=e(k))??"")}),M(ve,H)}),c(s);var b;O(s),c(N);var x=n(N,2),p=n(C(x),2);p.__change=[Ee,h];var I=C(p);I.value=I.__value=0;var V=n(I);V.value=V.__value=1;var w=n(V);w.value=w.__value=2;var z=n(w);z.value=z.__value=3,c(p);var J;O(p),c(x);var W=n(x,2),m=n(C(W),2);m.__change=[Re,_];var A=C(m);A.value=A.__value="full-right";var L=n(A);L.value=L.__value="full-left";var P=n(L);P.value=P.__value="1735";var X=n(P);X.value=X.__value="1537",c(m);var Y;O(m),c(W),D(()=>{b!==(b=e(f))&&(s.value=(s.__value=e(f))??"",S(s,e(f))),J!==(J=e(h))&&(p.value=(p.__value=e(h))??"",S(p,e(h))),Y!==(Y=e(_))&&(m.value=(m.__value=e(_))??"",S(m,e(_)))}),M(i,d)};G(de,i=>{t.randomMode||i(ce)})}c(q),M(a,r)},$$slots:{default:!0}}),_e()}pe(["change"]);export{Be as component};
