import{f as S,a as p,c as at,t as Ee}from"../chunks/Bdvgn338.js";import{a as nt}from"../chunks/BRJReVLM.js";import{p as ot,U as _,V as it,W as rt,k as e,X as re,a as dt,Z as r,s as a,c as s,t as y,Y as X,r as t,f as lt}from"../chunks/ZtE6Gyvq.js";import{d as ct,s as R}from"../chunks/BnZ86L-c.js";import{e as de,i as le}from"../chunks/BbjHMeAY.js";import{i as T}from"../chunks/CdTPX8-T.js";import{j as ut,r as ht,c as w,h as ge}from"../chunks/C2lzuMI8.js";import{t as mt,f as vt}from"../chunks/BmZ7kVW3.js";import{a as pt}from"../chunks/CVoLLLxN.js";import{B as ft}from"../chunks/DBDa-pHI.js";const bt="pop",gt="Pop Groove",Ht="LH: Whole-note octaves. RH: Syncopated quarter-note feel (1, 2, 2.5, 4).",_t=100,$t="4/4",xt=["F","Am","G","Dm"],Rt=!0,Lt=1,Ct=[{beat:1,hand:"LH"},{beat:1,hand:"RH"},{beat:2,hand:"RH"},{beat:2.5,hand:"RH"},{beat:4,hand:"RH"}],yt={id:bt,name:gt,description:Ht,suggestedBpm:_t,timeSignature:$t,defaultChords:xt,isProgression:Rt,measures:Lt,hits:Ct},St="rock",kt="Rock Driving",Bt="LH: Driving eighth-note octaves. RH: Steady chords.",Pt=120,Mt="4/4",Dt=["C","F","Bb","Eb"],Tt=!0,wt=1,Et=[{beat:1,hand:"LH"},{beat:1.5,hand:"LH"},{beat:2,hand:"LH"},{beat:2.5,hand:"LH"},{beat:3,hand:"LH"},{beat:3.5,hand:"LH"},{beat:4,hand:"LH"},{beat:4.5,hand:"LH"},{beat:1,hand:"RH"},{beat:2,hand:"RH"},{beat:3,hand:"RH"},{beat:4,hand:"RH"}],Ft={id:St,name:kt,description:Bt,suggestedBpm:Pt,timeSignature:Mt,defaultChords:Dt,isProgression:Tt,measures:wt,hits:Et},Nt="jazz-charleston",zt="Jazz (Charleston)",Gt='The classic Charleston rhythm. RH hits on 1 and the "and" of 2.',It=140,Ot="4/4",Wt=["Dm7","G7","Cmaj7"],At=!0,jt=1,qt=[{beat:1,hand:"LH"},{beat:1,hand:"RH"},{beat:2.5,hand:"RH"}],Yt={id:Nt,name:zt,description:Gt,suggestedBpm:It,timeSignature:Ot,defaultChords:Wt,isProgression:At,measures:jt,hits:qt},Jt="funk-basic",Qt="Funk Stabs",Ut='Syncopated RH "chanks" on 16th-note off-beats.',Vt=95,Xt="4/4",Zt=["Cm7","F9"],Kt=!0,es=1,ts=[{beat:1,hand:"LH"},{beat:1.25,hand:"RH"},{beat:2,hand:"LH"},{beat:2.75,hand:"RH"},{beat:3,hand:"LH"},{beat:4,hand:"RH"},{beat:4.5,hand:"RH"}],ss={id:Jt,name:Qt,description:Ut,suggestedBpm:Vt,timeSignature:Xt,defaultChords:Zt,isProgression:Kt,measures:es,hits:ts},as="herbie-funk",ns="Herbie Hancock Funk",os='G minor funk blues. Syncopated LH bassline and RH hits on the "and" of 1.',is=105,rs="4/4",ds=["Gm7","C7","D7"],ls=!0,cs=2,us=[{beat:1,hand:"LH"},{beat:1.5,hand:"RH"},{beat:2,hand:"LH"},{beat:2.5,hand:"LH"},{beat:3,hand:"LH"},{beat:4.5,hand:"RH"},{beat:5,hand:"LH"},{beat:6,hand:"RH"},{beat:7.5,hand:"RH"},{beat:8,hand:"LH"}],hs={id:as,name:ns,description:os,suggestedBpm:is,timeSignature:rs,defaultChords:ds,isProgression:ls,measures:cs,hits:us},ms="latin-montuno",vs="Latin (Montuno)",ps="Highly syncopated Montuno pattern focusing on off-beats.",fs=120,bs="4/4",gs=["Cm","Ebaug","Eb","Ebaug"],Hs=!0,_s=2,$s=[{beat:1.5,hand:"RH"},{beat:2,hand:"RH"},{beat:2.5,hand:"RH"},{beat:3.5,hand:"RH"},{beat:4,hand:"RH"},{beat:4.5,hand:"RH"},{beat:5.5,hand:"RH"},{beat:6,hand:"RH"},{beat:6.5,hand:"RH"},{beat:7.5,hand:"RH"},{beat:8,hand:"RH"},{beat:8.5,hand:"RH"}],xs={id:ms,name:vs,description:ps,suggestedBpm:fs,timeSignature:bs,defaultChords:gs,isProgression:Hs,measures:_s,hits:$s},Rs="blues-shuffle",Ls="Blues Shuffle",Cs="Loping triplet feel. LH plays a walking shuffle pattern.",ys=90,Ss="4/4",ks=["G7","C7","D7"],Bs=!0,Ps=1,Ms=[{beat:1,hand:"LH"},{beat:1.66,hand:"LH"},{beat:2,hand:"LH"},{beat:2.66,hand:"LH"},{beat:3,hand:"LH"},{beat:3.66,hand:"LH"},{beat:4,hand:"LH"},{beat:4.66,hand:"LH"},{beat:1,hand:"RH"},{beat:2.66,hand:"RH"},{beat:4,hand:"RH"}],Ds={id:Rs,name:Ls,description:Cs,suggestedBpm:ys,timeSignature:Ss,defaultChords:ks,isProgression:Bs,measures:Ps,hits:Ms},Ts="country-waltz",ws="Country Waltz",Es="Boom-chick-chick feel in 6/8. LH alternates Root and Fifth.",Fs=110,Ns="6/8",zs=["F","C/E","D7"],Gs=!0,Is=1,Os=[{beat:1,hand:"LH"},{beat:2,hand:"RH"},{beat:3,hand:"RH"},{beat:4,hand:"LH"},{beat:5,hand:"RH"},{beat:6,hand:"RH"}],Ws={id:Ts,name:ws,description:Es,suggestedBpm:Fs,timeSignature:Ns,defaultChords:zs,isProgression:Gs,measures:Is,hits:Os},As="blues-shells",js="Blues Shells",qs="LH: Root-Fifth walking. RH: Root-3-7 Shell voicings on beats 2 and 4.",Ys=80,Js="4/4",Qs=["G7","C7","G7","D7"],Us=!0,Vs=1,Xs=[{beat:1,hand:"LH"},{beat:2,hand:"LH"},{beat:2,hand:"RH"},{beat:3,hand:"LH"},{beat:4,hand:"LH"},{beat:4,hand:"RH"}],Zs={id:As,name:js,description:qs,suggestedBpm:Ys,timeSignature:Js,defaultChords:Qs,isProgression:Us,measures:Vs,hits:Xs},Ks="funk-root-chord",ea="Funk Root-Chord",ta='LH: Punchy roots on 1 and 3. RH: 16th-note chord stabs on the "e" and "a".',sa=90,aa="4/4",na=["E9","A13"],oa=!0,ia=1,ra=[{beat:1,hand:"LH"},{beat:1.25,hand:"RH"},{beat:1.75,hand:"RH"},{beat:3,hand:"LH"},{beat:3.25,hand:"RH"},{beat:3.75,hand:"RH"}],da={id:Ks,name:ea,description:ta,suggestedBpm:sa,timeSignature:aa,defaultChords:na,isProgression:oa,measures:ia,hits:ra},ce=[yt,Ft,Yt,ss,hs,xs,Ds,Ws,Zs,da];var la=S("<option> </option>"),ca=S("<div></div>"),ua=S('<div><span class="hit-dot svelte-14dx2m1"></span> <span class="hit-label svelte-14dx2m1"> </span></div>'),ha=S('<div class="playhead svelte-14dx2m1"></div>'),ma=S('<div class="sync-meter-card card-premium svelte-14dx2m1"><span class="label svelte-14dx2m1">LH/RH Sync</span> <div class="sync-gauge svelte-14dx2m1"><div class="sync-axis svelte-14dx2m1"></div> <div class="sync-marker svelte-14dx2m1"></div></div> <span class="sync-val svelte-14dx2m1"> </span></div>'),va=S('<div class="timing-feedback-container svelte-14dx2m1"><div><span class="feedback-msg svelte-14dx2m1"> </span> <span class="diff-val svelte-14dx2m1"> </span></div> <!></div>'),pa=S('<div class="coordination-summary svelte-14dx2m1"><span> </span> <span> </span> <span> </span></div>'),fa=S('<div class="completion-cta card-premium svelte-14dx2m1"><h3 class="svelte-14dx2m1">Target Reached!</h3> <p class="svelte-14dx2m1"><!></p> <button class="finish-btn svelte-14dx2m1">Finish Exercise</button> <!></div>'),ba=S('<span class="chord-tag svelte-14dx2m1"> </span>'),ga=S('<div class="rhythm-exercise-content svelte-14dx2m1"><div class="rhythm-header card-premium svelte-14dx2m1"><div class="pattern-selector svelte-14dx2m1"><label for="pattern-select" class="svelte-14dx2m1">Musical Style</label> <select id="pattern-select" class="select-premium svelte-14dx2m1"></select></div> <div class="rhythm-controls"><div class="hand-isolation svelte-14dx2m1"><span class="label svelte-14dx2m1" id="solo-focus-label">Solo Focus</span> <div class="toggle-group svelte-14dx2m1" role="group" aria-labelledby="solo-focus-label"><button>Both</button> <button>LH Only</button> <button>RH Only</button></div></div> <button> </button> <div class="bpm-input svelte-14dx2m1"><label for="bpm" class="svelte-14dx2m1"> </label> <input id="bpm" type="range" min="40" max="200"/></div></div></div> <div class="timeline-container card-premium svelte-14dx2m1"><div class="timeline-labels svelte-14dx2m1"><span>1</span><span>&</span><span>2</span><span>&</span> <span>3</span><span>&</span><span>4</span><span>&</span></div> <div class="timeline-track svelte-14dx2m1"><!>  <!> <!></div></div> <div class="feedback-area svelte-14dx2m1"><!> <!> <div class="chord-display card-premium svelte-14dx2m1"><span class="label svelte-14dx2m1">Current Sequence:</span> <div class="chords svelte-14dx2m1"></div></div></div></div>');function Ba(Fe,Ne){ot(Ne,!0);let z=_(100),k=_(!1),G=_(0),I=_(0),O=_(0),W=_(0),B=_(null),Z=_(""),A=_(null),u=_("none"),ue=0,he=0,m=null,K=0,ee=null,ze=25,Ge=.1,E=_(0),j=[],q=[],me=_(it(ce[0].id)),L=re(()=>ce.find(h=>h.id===e(me))||ce[0]);const Ie=.15,Oe=60;function We(){const h=60/e(z)/4;K+=h,X(E);const C=e(L).measures*4*4;e(E)>=C&&r(E,0)}function Ae(h,C){const se=h/4+1;if(q.push({beat:se,time:C}),!!m&&h%4===0){const D=m.createOscillator(),f=m.createGain();D.connect(f),f.connect(m.destination);const b=h/4%(parseInt(e(L).timeSignature[0])||4)===0;D.frequency.value=b?880:440,f.gain.value=.2,D.start(C),D.stop(C+.05)}}function He(){if(m){for(;K<m.currentTime+Ge;)Ae(e(E),K),We();ee=window.setTimeout(He,ze)}}function je(){e(k)||(m||(m=new AudioContext),r(k,!0),r(E,0),K=m.currentTime+.1,He())}function te(){r(k,!1),ee&&(window.clearTimeout(ee),ee=null),q=[],r(B,null),r(Z,"")}function qe(){e(k)?te():je()}function Ye(h){return[60]}function Je(h){return{selectedNote:h,leftHand:[],rightHand:[]}}function Qe(h,C,se,D){if(!e(k)||!m)return{isCorrect:!1,message:"Start the metronome first!",collected:!1,resetCollected:!1};const f=m.currentTime;q=q.filter($=>$.time>f-1);let b=1/0;const P=C.noteNumber<Oe?"LH":"RH";if(e(u)!=="none"&&P!==e(u))return{isCorrect:!1,message:`Focus on ${e(u)}!`,collected:!1,resetCollected:!1};for(const $ of q)for(const F of e(L).hits){if(F.hand!==P)continue;const ae=F.beat-$.beat,Y=$.time+ae*(60/e(z))-f;Math.abs(Y)<Math.abs(b)&&(b=Y)}const M=Math.abs(b);if(r(B,b*1e3),M<=Ie){let $="Perfect!";return M>.05&&($=b>0?"Early":"Late"),r(Z,$,!0),X(G),P==="LH"?X(I):X(O),j.push(M*1e3),P==="LH"?ue=f:he=f,Math.abs(ue-he)<.2&&(r(A,(he-ue)*1e3),X(W)),{isCorrect:!0,message:`${P}: ${$} (${Math.round(b*1e3)}ms)`,collected:!0,resetCollected:!0}}else return r(Z,"Miss"),{isCorrect:!1,message:"Off beat!",collected:!1,resetCollected:!1}}function _e(h,C){return e(u)!=="none"?e(G)>=32:e(G)>=32&&e(I)>=8&&e(O)>=8&&e(W)>=8}function Ue(){r(G,0),r(I,0),r(O,0),r(W,0),j=[],te()}nt(()=>{te(),m&&m.close()});{const h=(se,D=rt)=>{var f=ga(),b=s(f),P=s(b),M=a(s(P),2);M.__change=te,de(M,21,()=>ce,le,(n,i)=>{var o=la(),g=s(o,!0);t(o);var d={};y(()=>{R(g,e(i).name),d!==(d=e(i).id)&&(o.value=(o.__value=e(i).id)??"")}),p(n,o)}),t(M),t(P);var $=a(P,2),F=s($),ae=a(s(F),2),ne=s(ae);ne.__click=()=>r(u,"none");let Y;var ve=a(ne,2);ve.__click=()=>r(u,"LH");let $e;var xe=a(ve,2);xe.__click=()=>r(u,"RH");let Re;t(ae),t(F);var J=a(F,2);let Le;J.__click=qe;var Ve=s(J,!0);t(J);var Ce=a(J,2),pe=s(Ce),Xe=s(pe);t(pe);var ye=a(pe,2);ht(ye),t(Ce),t($),t(b);var fe=a(b,2),Se=a(s(fe),2),ke=s(Se);de(ke,17,()=>Array(e(L).measures*16),le,(n,i,o)=>{const g=re(()=>o%4===0),d=re(()=>o%2===0);var v=ca();let H;y(()=>H=w(v,1,"subdivision-mark svelte-14dx2m1",null,H,{whole:e(g),half:e(d)})),p(n,v)});var Be=a(ke,2);{var Ze=n=>{var i=at(),o=lt(i);de(o,17,()=>e(L).hits,le,(g,d)=>{var v=ua();let H;var N=a(s(v),2),Q=s(N,!0);t(N),t(v),y(()=>{H=w(v,1,"hit-marker svelte-14dx2m1",null,H,{lh:e(d).hand==="LH",rh:e(d).hand==="RH",dimmed:e(u)!=="none"&&e(d).hand!==e(u)}),ge(v,`left: ${(e(d).beat-1)/(e(L).measures*4)*100}%`),R(Q,e(d).hand)}),mt(3,v,()=>vt),p(g,v)}),p(n,i)};T(Be,n=>{e(k)&&n(Ze)})}var Ke=a(Be,2);{var et=n=>{var i=ha();y(()=>ge(i,`left: ${e(E)/(e(L).measures*16)*100}%`)),p(n,i)};T(Ke,n=>{e(k)&&n(et)})}t(Se),t(fe);var Pe=a(fe,2),Me=s(Pe);{var tt=n=>{var i=va(),o=s(i);let g;var d=s(o),v=s(d,!0);t(d);var H=a(d,2),N=s(H);t(H),t(o);var Q=a(o,2);{var l=c=>{var x=ma(),U=a(s(x),2),V=a(s(U),2);t(U);var oe=a(U,2),ie=s(oe,!0);t(oe),t(x),y(be=>{ge(V,`left: ${50+e(A)/100*50}%`),R(ie,be)},[()=>Math.abs(e(A))<10?"Locked":`${Math.round(e(A))}ms`]),p(c,x)};T(Q,c=>{e(A)!==null&&c(l)})}t(i),y((c,x)=>{g=w(o,1,"timing-feedback svelte-14dx2m1",null,g,c),R(v,e(Z)),R(N,`${e(B)>0?"+":""}${x??""}ms`)},[()=>({perfect:Math.abs(e(B))<50,near:Math.abs(e(B))>=50&&Math.abs(e(B))<120,miss:Math.abs(e(B))>=120}),()=>Math.round(e(B))]),p(n,i)};T(Me,n=>{e(B)!==null&&n(tt)})}var De=a(Me,2);{var st=n=>{var i=fa(),o=a(s(i),2),g=s(o);{var d=l=>{var c=Ee("Hit target: 32 hits + balanced hands + 8 synced pairs.");p(l,c)},v=l=>{var c=Ee("You've completed 32 hits. Click below to save your stats.");p(l,c)};T(g,l=>{e(u)==="none"?l(d):l(v,!1)})}t(o);var H=a(o,2);H.__click=()=>{const l=j.length>0?j.reduce((c,x)=>c+x,0)/j.length:void 0;D().completeExercise({avgDeviationMs:l,leftHandHits:e(I),rightHandHits:e(O),coordinatedHits:e(W)})};var N=a(H,2);{var Q=l=>{var c=pa(),x=s(c),U=s(x);t(x);var V=a(x,2),oe=s(V);t(V);var ie=a(V,2),be=s(ie);t(ie),t(c),y(()=>{R(U,`LH: ${e(I)??""}`),R(oe,`RH: ${e(O)??""}`),R(be,`Synced: ${e(W)??""}`)}),p(l,c)};T(N,l=>{e(u)==="none"&&l(Q)})}t(i),y(l=>H.disabled=l,[()=>!_e()]),p(n,i)};T(De,n=>{e(G)>=32&&n(st)})}var Te=a(De,2),we=a(s(Te),2);de(we,21,()=>e(L).defaultChords,le,(n,i)=>{var o=ba(),g=s(o,!0);t(o),y(()=>R(g,e(i))),p(n,o)}),t(we),t(Te),t(Pe),t(f),y(()=>{Y=w(ne,1,"svelte-14dx2m1",null,Y,{active:e(u)==="none"}),$e=w(ve,1,"svelte-14dx2m1",null,$e,{active:e(u)==="LH"}),Re=w(xe,1,"svelte-14dx2m1",null,Re,{active:e(u)==="RH"}),Le=w(J,1,"action-btn svelte-14dx2m1",null,Le,{playing:e(k)}),R(Ve,e(k)?"Stop":"Start Metronome"),R(Xe,`BPM: ${e(z)??""}`)}),ut(M,()=>e(me),n=>r(me,n)),pt(ye,()=>e(z),n=>r(z,n)),p(se,f)};let C=re(()=>`Style: ${e(L).name}. ${e(L).description}`);ft(Fe,{randomMode:!1,generateExpectedNotes:Ye,generateScoreProps:Je,validateNoteEvent:Qe,isCompleted:_e,onReset:Ue,onComplete:()=>{},initialNote:"C",get description(){return e(C)},showScore:!1,showTempoControl:!1,showTrainingControl:!1,exerciseType:"rhythm",children:h,$$slots:{default:!0}})}dt()}ct(["change","click"]);export{Ba as component};
