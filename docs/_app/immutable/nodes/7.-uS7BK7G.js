import"../chunks/NZTpNUN0.js";import{d as ge,s as E,o as ke,a as xe}from"../chunks/BgsxT_DW.js";import{v as ve,B as ye,aw as Me,ax as Ce,ay as Ie,A as Te,I as Ee,J as Ne,x as Ve,K as Se,N as Ae,U as Ue,M as je,p as pe,V as Y,a as J,b as h,c as _e,f as M,d as i,s as d,r as o,t as V,k as e,O as T,P as j,g as Ke,R as m,az as Pe,W as Re,S as le}from"../chunks/DFYG1ZU2.js";import{i as K}from"../chunks/iFgn1dkZ.js";import{e as L,i as W,a as De,b as qe,c as Ge,d as ue,f as he,g as Oe}from"../chunks/Cxn_sF4j.js";import{r as z,e as B}from"../chunks/DD47jCIl.js";import{component as Fe}from"./4.4S8FW4On.js";import{component as Le}from"./8.BcOZ9itr.js";import{component as We}from"./10.Bttv9k-y.js";function ze(g,t,r){ve&&ye();var N=g,C=Ue,I,b,p=null,w=Me()?Ce:Ie;function f(){I&&je(I),p!==null&&(p.lastChild.remove(),N.before(p),p=null),I=b}Te(()=>{if(w(C,C=t())){var _=N,k=Se();k&&(p=document.createDocumentFragment(),p.append(_=Ee())),b=Ne(()=>r(_)),k?Ve.add_callback(f):f()}}),ve&&(N=Ae)}const Be=["chord","scale","II-V-I"];var Je=(g,t)=>t(g),Ze=(g,t)=>t(g),He=(g,t)=>t.onClose(),Qe=(g,t,r)=>t("allowedExerciseTypes",e(r),g.currentTarget.checked),Xe=M('<label class="checkbox-label svelte-pgit1g"><input type="checkbox"/> <span> </span></label>'),Ye=(g,t,r)=>t("allowedNotes",e(r),g.currentTarget.checked),$e=M('<label class="checkbox-label svelte-pgit1g"><input type="checkbox"/> <span> </span></label>'),ea=(g,t,r)=>t("allowedChordTypes",e(r),g.currentTarget.checked),aa=M('<label class="checkbox-label svelte-pgit1g"><input type="checkbox"/> <span> </span></label>'),ta=(g,t,r)=>t("allowedInversions",e(r).toString(),g.currentTarget.checked),ra=M('<label class="checkbox-label svelte-pgit1g"><input type="checkbox"/> <span> </span></label>'),sa=(g,t,r)=>t("allowedScaleModes",e(r),g.currentTarget.checked),oa=M('<label class="checkbox-label svelte-pgit1g"><input type="checkbox"/> <span> </span></label>'),la=(g,t,r)=>t("allowedVoicings",e(r),g.currentTarget.checked),na=M('<label class="checkbox-label svelte-pgit1g"><input type="checkbox"/> <span> </span></label>'),ia=M('<div class="popup-overlay svelte-pgit1g" role="dialog" aria-modal="true" aria-label="Configure exercises" tabindex="0"><div class="popup-content svelte-pgit1g"><button type="button" class="close-btn svelte-pgit1g" aria-label="Close">Ã—</button> <h2 class="svelte-pgit1g">Exercise Configuration</h2> <div class="config-grid svelte-pgit1g"><div class="config-section svelte-pgit1g"><h3 class="svelte-pgit1g">Exercise Types</h3> <div class="checkbox-grid svelte-pgit1g"></div></div> <div class="config-section svelte-pgit1g"><h3 class="svelte-pgit1g">Notes</h3> <div class="checkbox-grid svelte-pgit1g"></div></div> <div class="config-section svelte-pgit1g"><h3 class="svelte-pgit1g">Chord Types</h3> <div class="checkbox-grid svelte-pgit1g"></div></div> <div class="config-section svelte-pgit1g"><h3 class="svelte-pgit1g">Inversions</h3> <div class="checkbox-grid svelte-pgit1g"></div></div> <div class="config-section svelte-pgit1g"><h3 class="svelte-pgit1g">Scale Modes</h3> <div class="checkbox-grid svelte-pgit1g"></div></div> <div class="config-section svelte-pgit1g"><h3 class="svelte-pgit1g">Voicings</h3> <div class="checkbox-grid svelte-pgit1g"></div></div></div></div></div>');function ca(g,t){pe(t,!0);function r(p,w,f){let _=[];switch(p){case"allowedExerciseTypes":_=[...t.allowedExerciseTypes];break;case"allowedNotes":_=[...t.allowedNotes];break;case"allowedChordTypes":_=[...t.allowedChordTypes];break;case"allowedInversions":_=[...t.allowedInversions];break;case"allowedScaleModes":_=[...t.allowedScaleModes];break;case"allowedVoicings":_=[...t.allowedVoicings];break}if(f)_.push(w);else if(_.length>1){const k=_.indexOf(w);k>-1&&_.splice(k,1)}t.onUpdate(p,_.sort())}function N(p){(p instanceof MouseEvent&&p.target.classList.contains("popup-overlay")||p instanceof KeyboardEvent&&p.key==="Escape")&&t.onClose()}var C=Y(),I=J(C);{var b=p=>{var w=ia();w.__click=[Je,N],w.__keydown=[Ze,N];var f=i(w),_=i(f);_.__click=[He,t];var k=d(_,4),S=i(k),P=d(i(S),2);L(P,21,()=>Be,W,(x,c)=>{var v=Xe(),l=i(v);z(l),l.__change=[Qe,r,c];var a=d(l,2),s=i(a,!0);o(a),o(v),V((n,u)=>{B(l,n),E(s,u)},[()=>t.allowedExerciseTypes.includes(e(c)),()=>e(c).charAt(0).toUpperCase()+e(c).slice(1)]),h(x,v)}),o(P),o(S);var R=d(S,2),$=d(i(R),2);L($,21,()=>De,W,(x,c)=>{var v=$e(),l=i(v);z(l),l.__change=[Ye,r,c];var a=d(l,2),s=i(a,!0);o(a),o(v),V(n=>{B(l,n),E(s,e(c))},[()=>t.allowedNotes.includes(e(c))]),h(x,v)}),o($),o(R);var A=d(R,2),D=d(i(A),2);L(D,21,()=>qe,W,(x,c)=>{var v=aa(),l=i(v);z(l),l.__change=[ea,r,c];var a=d(l,2),s=i(a,!0);o(a),o(v),V(n=>{B(l,n),E(s,e(c))},[()=>t.allowedChordTypes.includes(e(c))]),h(x,v)}),o(D),o(A);var U=d(A,2),q=d(i(U),2);L(q,21,()=>Ge,W,(x,c)=>{var v=ra(),l=i(v);z(l),l.__change=[ta,r,c];var a=d(l,2),s=i(a,!0);o(a),o(v),V(n=>{B(l,n),E(s,e(c)===0?"Root":`${e(c)}${e(c)===1?"st":e(c)===2?"nd":"rd"}`)},[()=>t.allowedInversions.includes(e(c))]),h(x,v)}),o(q),o(U);var Z=d(U,2),ee=d(i(Z),2);L(ee,21,()=>ue,W,(x,c)=>{var v=oa(),l=i(v);z(l),l.__change=[sa,r,c];var a=d(l,2),s=i(a,!0);o(a),o(v),V(n=>{B(l,n),E(s,e(c))},[()=>t.allowedScaleModes.includes(e(c))]),h(x,v)}),o(ee),o(Z);var H=d(Z,2),Q=d(i(H),2);L(Q,21,()=>he,W,(x,c)=>{var v=na(),l=i(v);z(l),l.__change=[la,r,c];var a=d(l,2),s=i(a,!0);o(a),o(v),V((n,u)=>{B(l,n),E(s,u)},[()=>t.allowedVoicings.includes(e(c)),()=>e(c).charAt(0).toUpperCase()+e(c).slice(1)]),h(x,v)}),o(Q),o(H),o(k),o(f),o(w),h(p,w)};K(I,p=>{t.showPopup&&p(b)})}h(g,C),_e()}ge(["click","keydown","change"]);var da=(g,t)=>m(t,!0),va=M('<div class="exercise-info svelte-1cwrm9k"><span class="exercise-type svelte-1cwrm9k"> </span> <span class="exercise-description svelte-1cwrm9k"> </span> <button class="config-btn svelte-1cwrm9k" type="button">âš™ï¸ Config</button> <button class="new-exercise-btn svelte-1cwrm9k">ğŸ² New</button></div>'),ga=M('<div class="completion-overlay svelte-1cwrm9k"><div class="completion-message svelte-1cwrm9k"><h2 class="svelte-1cwrm9k">ğŸ‰ Exercise Completed!</h2> <p class="svelte-1cwrm9k">Great job! Next random exercise in <strong> </strong> seconds...</p> <button class="skip-btn svelte-1cwrm9k">Skip Wait</button></div></div>'),pa=M("<!> <div> </div>",1),_a=M('<div class="loading svelte-1cwrm9k">Generating random exercise...</div>'),ua=M('<div class="random-exercise svelte-1cwrm9k"><div class="random-header svelte-1cwrm9k"><!></div> <!> <!> <!></div>');function Ca(g,t){pe(t,!0);let r=T(j({type:"chord",key:"C",chordType:"maj7",voicing:"full-right",inversion:0,description:"Cmaj - Random Voicing"})),N=T(0),C=T(!1),I=T(0),b=null,p=T(j(["C","F","G"])),w=T(j(["maj7","min7","7","major","minor"])),f=T(j([0,1,2,3])),_=T(j(ue)),k=T(j(he)),S=T(j(["chord","II-V-I","scale"])),P=T(!1);Ke(()=>{e(C)&&e(r)&&(b&&clearInterval(b),m(I,3),b=setInterval(()=>{Pe(I,-1),e(I)<=0&&(b&&clearInterval(b),A(),m(C,!1))},1e3))});function R(){const a=e(S)[Math.floor(Math.random()*e(S).length)],s=e(p)[Math.floor(Math.random()*e(p).length)];return $(a,s)}function $(a,s){switch(a){case"chord":{const n=e(w)[Math.floor(Math.random()*e(w).length)];let u=e(f)[Math.floor(Math.random()*e(f).length)],y=e(k)[Math.floor(Math.random()*e(k).length)];return Oe.includes(n)&&u>2&&(u=e(f)[Math.floor(Math.random()*(e(f).length-1))]),{type:a,key:s,chordType:n,voicing:y,inversion:u,description:`${s}${n}${u>0?` (${u}st inversion)`:""} - ${y}`}}case"scale":{const n=e(_)[Math.floor(Math.random()*e(_).length)];return{type:a,key:s,scaleMode:n,description:`${s} ${n}`}}case"II-V-I":{const n=e(f)[Math.floor(Math.random()*e(f).length)];let u=e(k)[Math.floor(Math.random()*e(k).length)];return{type:a,key:s,voicing:u,inversion:n,description:`${s} II-V-I Progression${n>0?` (${n}st inversion)`:""} ${u}`}}default:throw new Error(`Unknown exercise type: ${a}`)}}function A(){m(r,R(),!0),m(N,Date.now(),!0),m(C,!1),b&&(clearInterval(b),b=null),m(I,0)}function D(){m(C,!0)}ke(()=>{m(r,R(),!0)}),xe(()=>{b&&clearInterval(b)});var U=ua(),q=i(U),Z=i(q);{var ee=a=>{var s=va(),n=i(s),u=i(n,!0);o(n);var y=d(n,2),X=i(y,!0);o(y);var G=d(y,2);G.__click=[da,P];var te=d(G,2);te.__click=A,o(s),V(()=>{E(u,e(r).type),E(X,e(r).description)}),h(a,s)};K(Z,a=>{e(r)&&a(ee)})}o(q);var H=d(q,2);ca(H,{get showPopup(){return e(P)},get allowedNotes(){return e(p)},get allowedChordTypes(){return e(w)},get allowedInversions(){return e(f)},get allowedScaleModes(){return e(_)},get allowedVoicings(){return e(k)},get allowedExerciseTypes(){return e(S)},onClose:()=>m(P,!1),onUpdate:(a,s)=>{switch(a){case"allowedNotes":m(p,s,!0);break;case"allowedChordTypes":m(w,s,!0);break;case"allowedInversions":m(f,s.map(Number),!0);break;case"allowedScaleModes":m(_,s,!0);break;case"allowedVoicings":m(k,s,!0);break;case"allowedExerciseTypes":m(S,s,!0);break}}});var Q=d(H,2);{var x=a=>{var s=ga(),n=i(s),u=d(i(n),2),y=d(i(u)),X=i(y,!0);o(y),Re(),o(u);var G=d(u,2);G.__click=A,o(n),o(s),V(()=>E(X,e(I))),h(a,s)};K(Q,a=>{e(C)&&a(x)})}var c=d(Q,2);{var v=a=>{var s=Y(),n=J(s);ze(n,()=>e(N),u=>{var y=Y(),X=J(y);{var G=O=>{{let ae=le(()=>e(r).chordType||"maj7"),re=le(()=>e(r).inversion||0),se=le(()=>e(r).voicing||"full-right");Fe(O,{randomMode:!0,onComplete:D,get chordType(){return e(ae)},get inversion(){return e(re)},get voicing(){return e(se)},get rootKey(){return e(r).key}})}},te=O=>{var ae=Y(),re=J(ae);{var se=F=>{Le(F,{randomMode:!0,onComplete:D,get scaleMode(){return e(r).scaleMode},sequentialMode:Math.random()>.5,get rootKey(){return e(r).key}})},fe=F=>{var ne=Y(),me=J(ne);{var be=oe=>{var ie=pa(),ce=J(ie);We(ce,{randomMode:!0,onComplete:D,get inversion(){return e(r).inversion},get voicing(){return e(r).voicing},get rootKey(){return e(r).key}});var de=d(ce,2),we=i(de);o(de),V(()=>E(we,`Random exercise type: ${e(r).type??""} (component not implemented)`)),h(oe,ie)};K(me,oe=>{e(r).type==="II-V-I"&&oe(be)},!0)}h(F,ne)};K(re,F=>{e(r).type==="scale"?F(se):F(fe,!1)},!0)}h(O,ae)};K(X,O=>{e(r).type==="chord"?O(G):O(te,!1)})}h(u,y)}),h(a,s)},l=a=>{var s=_a();h(a,s)};K(c,a=>{e(r)?a(v):a(l,!1)})}o(U),h(g,U),_e()}ge(["click"]);export{Ca as component};
