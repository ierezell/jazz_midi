import{f as T,a as A}from"../chunks/Bdvgn338.js";import{o as B}from"../chunks/BRJReVLM.js";import{p as k,V as N,U as f,W as L,k as e,X as x,a as O,Y as W,s as C,c as p,t as Y,Z as m,r as g}from"../chunks/ZtE6Gyvq.js";import{s as M}from"../chunks/BnZ86L-c.js";import{N as y,M as G,A as $}from"../chunks/CXrKfc7O.js";import{B as K}from"../chunks/BJLlDXwa.js";var U=T('<div class="partition-content svelte-bt7wu1"><h2 class="svelte-bt7wu1">Sight Reading Exercise</h2> <p class="note-count svelte-bt7wu1"> </p> <p class="progress-text svelte-bt7wu1"> </p></div>');function F(b,u){k(u,!0);const _="Read and play the sequence of notes shown on the musical staff. Perfect for improving sight-reading skills!";N(u.range||["C3","C6"]);let o=f(N([])),l=f("right"),n=f(0);function h(){const s=Math.floor(Math.random()*10)+1,t=[];m(l,Math.random()<.5?"left":"right",!0);const r=e(l)==="left"?1:3,i=e(l)==="left"?2:4;for(let c=0;c<s;c++){const a=$[Math.floor(Math.random()*$.length)],d=Math.floor(Math.random()*(i-r+1))+r;t.push(`${a}${d}`)}m(o,t,!0),m(n,0)}B(()=>{h()});function w(s){if(e(n)<e(o).length){const t=e(o)[e(n)];if(t&&y[t])return[y[t]]}return[]}function q(s,t,r){const i=r[0];if(t.noteNumber===i)return W(n),e(o).length-e(n)===0?{isCorrect:!0,message:`Perfect! All ${e(o).length} notes completed! ðŸŽµâœ¨`,collected:!0,resetCollected:!0}:{isCorrect:!0,message:`Good! ${e(n)}/${e(o).length} notes played`,collected:!0,resetCollected:!1};{const c=G[t.noteNumber],a=e(o)[e(n)];return{isCorrect:!1,message:`Wrong note! You played ${c}, expected ${a}`,collected:!1,resetCollected:!1}}}function S(s){const t=e(o).map(r=>[r]);return{selectedNote:s,leftHand:e(l)==="left"?t:[],rightHand:e(l)==="right"?t:[]}}function R(s,t){return e(n)===e(o).length}function E(){h()}{const s=(i,c=L)=>{var a=U(),d=C(p(a),2),H=p(d);g(d);var v=C(d,2),P=p(v);g(v),g(a),Y(()=>{M(H,`${e(l)==="left"?"Left Hand (Bass Clef)":"Right Hand (Treble Clef)"} -
				${e(o).length??""} notes`),M(P,`${e(n)??""}/${e(o).length??""} notes played`)}),A(i,a)};let t=x(()=>u.onComplete??(()=>{})),r=x(()=>u.rootKey||"C");K(b,{randomMode:!0,generateExpectedNotes:w,generateScoreProps:S,validateNoteEvent:q,isCompleted:R,onReset:E,get onComplete(){return e(t)},get initialNote(){return e(r)},description:_,exerciseType:"partition",children:s,$$slots:{default:!0}})}O()}export{F as component};
