import"../chunks/CWj6FrbW.js";import{d as ie,o as ne,s as P}from"../chunks/BmhLxRLF.js";import{p as ce,o as g,q as de,f as q,a as ue,d as i,s as N,t as ve,k as e,b as D,c as ge,v as o,w as r,r as n,x as pe,y as R}from"../chunks/CiAnzwjR.js";import{i as me}from"../chunks/9NUL7pul.js";import{r as fe}from"../chunks/BW5o5L06.js";import{b as be}from"../chunks/DGHu0SAT.js";import{B as Ne,m as h,a as _}from"../chunks/DfZBKltH.js";import{N as he,m as _e,a as xe}from"../chunks/X11iEPzw.js";var Me=q('<div class="completion svelte-1dw6gjo">ðŸŽ‰ Scale Completed!</div>'),ye=q('<div class="scale-controls svelte-1dw6gjo"><div class="control-group svelte-1dw6gjo"><button class="debug-btn svelte-1dw6gjo"> </button> <button class="reset-btn svelte-1dw6gjo">Reset</button></div> <div class="control-group svelte-1dw6gjo"><label class="svelte-1dw6gjo"><input type="checkbox" class="svelte-1dw6gjo"/> Sequential Mode (play in order)</label></div></div> <div class="exercise-status svelte-1dw6gjo"><div class="progress svelte-1dw6gjo"> </div> <div class="mistakes svelte-1dw6gjo"> </div> <!></div>',1),je=q('<div class="scale-exercise svelte-1dw6gjo"><!></div>');function Ce(W,z){ce(z,!0);let m=g("C"),x=g(!0),d=g(de([])),u=g(0),f=g(!1),b=g(!1),c=g(""),I=r(()=>e(u)>=3),F=r(()=>e(u)>=6),y=r(()=>e(d).map(t=>t.noteNumber)),H=r(()=>xe[e(m)]),J=r(()=>Array.from(new Set(e(H).map(t=>t.slice(0,-1))))),C=r(()=>e(J).map(t=>t+"4")),s=r(()=>e(C).map(t=>he[t])),L=r(()=>({selectedNote:e(m),midiNotes:e(y),noteEvents:e(d),debugMode:e(b),showNoteNames:e(I),showKeyboard:e(F),feedbackMessage:e(c),errorCount:e(u),completed:e(f)})),Q=r(()=>({notes:e(C),highlightedNotes:e(y).map(t=>_e(t)),title:`${e(m)} Major Scale`}));function U(t){o(m,t,!0),j()}function K(){o(b,!e(b)),e(b)?h.enableDebugMode():h.disableDebugMode()}function j(){o(u,0),o(d,[],!0),o(f,!1),o(c,""),h.resetExercise()}function V(t){o(d,[t,...e(d).slice(0,9)],!0),t.type==="on"&&(e(x)?X(t):Y(t))}function X(t){const v=e(d).filter(a=>a.type==="on"&&e(s).includes(a.noteNumber)).length-1,p=e(s)[v];t.noteNumber===p?v===e(s).length-1?(o(f,!0),o(c,"Perfect scale! ðŸŽµâœ¨"),_.playSuccess()):o(c,`Good! Note ${v+1}/${e(s).length}`):(R(u),o(c,`Wrong note! Expected note ${v+1}`),_.playError())}function Y(t){const p=e(d).filter(a=>a.type==="on").map(a=>a.noteNumber).filter(a=>e(s).includes(a));e(s).includes(t.noteNumber)?p.length===e(s).length?(o(f,!0),o(c,"Perfect scale! ðŸŽµ"),_.playSuccess()):o(c,`Good! ${p.length}/${e(s).length} notes`):(R(u),o(c,"Wrong note!"),_.playError())}ne(()=>(h.connect(V),_.initialize(),()=>{h.disconnect()}));var w=je(),Z=i(w);{let t=r(()=>`${e(m)} Major Scale`),v=r(()=>e(x)?"Play the scale notes in order":"Play all scale notes in any order");Ne(Z,{get exerciseState(){return e(L)},get exerciseTitle(){return e(t)},get exerciseDescription(){return e(v)},get expectedNotes(){return e(s)},get scoreProps(){return e(Q)},onNoteSelect:U,onDebugToggle:K,onReset:j,customControls:!0,children:(p,a)=>{var T=ye(),S=ue(T),$=i(S),M=i($);M.__click=K;var ee=i(M);n(M);var te=N(M,2);te.__click=j,n($);var O=N($,2),A=i(O),B=i(A);fe(B),pe(),n(A),n(O),n(S);var G=N(S,2),k=i(G),oe=i(k);n(k);var E=N(k,2),se=i(E);n(E);var re=N(E,2);{var ae=l=>{var le=Me();D(l,le)};me(re,l=>{e(f)&&l(ae)})}n(G),ve(l=>{P(ee,`${e(b)?"Disable":"Enable"} Debug Mode`),P(oe,`Progress: ${l??""}%`),P(se,`Mistakes: ${e(u)??""}`)},[()=>Math.round(e(y).filter(l=>e(s).includes(l)).length/e(s).length*100)]),be(B,()=>e(x),l=>o(x,l)),D(p,T)},$$slots:{default:!0}})}n(w),D(W,w),ge()}ie(["click"]);export{Ce as component};
