import"../chunks/CWj6FrbW.js";import{d as De,o as Ye,a as Ze,s as y}from"../chunks/BmhLxRLF.js";import{p as Ee,f as N,d as a,t as H,b as C,c as Re,s as r,x as L,r as s,o as m,q as et,k as e,v as h,w as p,y as tt}from"../chunks/CiAnzwjR.js";import{p as ot,i as _e}from"../chunks/9NUL7pul.js";import{e as Me,i as Se,A as st,b as at,c as rt,N as lt}from"../chunks/X11iEPzw.js";import{r as nt,a as it,b as V,i as B,c as q}from"../chunks/BW5o5L06.js";import{B as vt,m as he,a as ue}from"../chunks/DfZBKltH.js";import{D as dt,c as ct}from"../chunks/CoExbraD.js";function ht(g,d){d.onToggle(!d.showChordTones)}var ut=N('<div class="color-legend svelte-gyk12o"><div class="legend-item svelte-gyk12o"><div class="color-dot svelte-gyk12o"></div> <span class="svelte-gyk12o">Root</span></div> <div class="legend-item svelte-gyk12o"><div class="color-dot svelte-gyk12o"></div> <span class="svelte-gyk12o">Third</span></div> <div class="legend-item svelte-gyk12o"><div class="color-dot svelte-gyk12o"></div> <span class="svelte-gyk12o">Fifth</span></div> <div class="legend-item svelte-gyk12o"><div class="color-dot svelte-gyk12o"></div> <span class="svelte-gyk12o">Seventh</span></div></div>'),_t=N('<div class="chord-tone-toggle svelte-gyk12o"><label class="toggle-container svelte-gyk12o"><input type="checkbox" aria-label="Show chord tone colors" class="svelte-gyk12o"/> <span class="toggle-switch svelte-gyk12o"></span> <span class="toggle-label svelte-gyk12o">Show Chord Tones</span></label> <!></div>');function gt(g,d){Ee(d,!0);let i=ot(d,"colors",3,dt);var c=_t(),k=a(c),x=a(k);nt(x),x.__change=[ht,d],L(4),s(k);var w=r(k,2);{var P=f=>{var T=ut(),M=a(T),S=a(M);L(2),s(M);var b=r(M,2),A=a(b);L(2),s(b);var I=r(b,2),J=a(I);L(2),s(I);var n=r(I,2),_=a(n);L(2),s(n),s(T),H(()=>{V(S,`background-color: ${i().root??""}`),V(A,`background-color: ${i().third??""}`),V(J,`background-color: ${i().fifth??""}`),V(_,`background-color: ${i().seventh??""}`)}),C(f,T)};_e(w,f=>{d.showChordTones&&f(P)})}s(c),H(()=>it(x,d.showChordTones)),C(g,c),Re()}De(["change"]);function pt(g,d,i){const c=g.target;h(d,c.value,!0),i()}function ft(g,d,i){const c=g.target;h(d,parseInt(c.value),!0),i()}function mt(g,d,i){const c=g.target;h(d,c.value,!0),i()}var kt=N('<div class="feedback svelte-1vxhkdw" role="alert"> </div>'),xt=(g,d)=>d(g.target.value),bt=N("<option> </option>"),wt=N("<option> </option>"),yt=N('<div class="completion svelte-1vxhkdw">ðŸŽ‰ Exercise Completed!</div>'),Ct=N('<div class="exercise-status svelte-1vxhkdw"><div class="progress"> </div> <div class="mistakes"> </div> <!></div>'),Nt=N('<div class="chord-exercise svelte-1vxhkdw"><header class="exercise-header svelte-1vxhkdw"><h1 class="svelte-1vxhkdw">Jazz Chord Practice</h1> <p class="description svelte-1vxhkdw">Practice playing jazz chords with different voicings and inversions</p></header> <!> <div class="chord-info svelte-1vxhkdw"><h2 class="chord-display svelte-1vxhkdw"> </h2> <div class="chord-details svelte-1vxhkdw"><span> </span> <span> </span></div></div> <div class="controls svelte-1vxhkdw"><div class="control-group svelte-1vxhkdw"><label for="note-select" class="svelte-1vxhkdw">Key:</label> <select id="note-select" class="svelte-1vxhkdw"></select></div> <div class="control-group svelte-1vxhkdw"><label for="chord-type" class="svelte-1vxhkdw">Chord Type:</label> <select id="chord-type" class="svelte-1vxhkdw"></select></div> <div class="control-group svelte-1vxhkdw"><label for="inversion" class="svelte-1vxhkdw">Inversion:</label> <select id="inversion" class="svelte-1vxhkdw"><option>Root</option><option>1st</option><option>2nd</option><option>3rd</option></select></div> <div class="control-group svelte-1vxhkdw"><label for="voicing" class="svelte-1vxhkdw">Voicing:</label> <select id="voicing" class="svelte-1vxhkdw"><option>Full</option><option>Left Hand</option><option>Right Hand</option><option>Split</option></select></div> <div class="control-group svelte-1vxhkdw"><button class="svelte-1vxhkdw">Reset</button> <button class="svelte-1vxhkdw"> </button></div> <div class="control-group chord-tone-controls svelte-1vxhkdw"><!></div></div> <!></div>');function Ht(g,d){Ee(d,!0);let i=m("C"),c=m("maj7"),k=m(0),x=m("full"),w=m(et([])),P=p(()=>e(w).map(t=>t.noteNumber)),f=m(0),T=m(0),M=m(!1),S=m(!1),b=m(""),A=m(!1),I=p(()=>e(f)>=3),J=p(()=>e(f)>=6),n=p(()=>{const t=e(i)+"4",o=lt[t];return rt(o,e(c),e(k))}),_=p(()=>{const t=[e(n).root,e(n).third,e(n).fifth,e(n).seventh].filter(o=>o!==void 0);switch(e(x)){case"full":return t;case"left-hand":return[e(n).root,e(n).seventh].filter(v=>v!==void 0);case"right-hand":return[e(n).third,e(n).fifth];case"split":const o=[e(n).root-12,(e(n).seventh||e(n).root)-12].filter(v=>v>=24),l=[e(n).third,e(n).fifth];return[...o,...l];default:return t}}),U=p(()=>{if(e(_).length===0)return{middleC:60,octaves:2};const t=Math.min(...e(_)),o=Math.max(...e(_)),l=Math.floor((t-12)/12)*12+12,u=Math.ceil((o+12)/12)*12-l,K=Math.max(2,Math.ceil(u/12)),F=l+Math.floor(K*12/2)-6;return{middleC:Math.max(24,F),octaves:Math.min(7,K)}}),Oe=p(()=>{if(e(_).length===0)return!1;const t=[...e(P)].sort(),o=[...e(_)].sort();return t.length===o.length&&t.every((l,v)=>l===o[v])}),j=p(()=>{const t={major:"",minor:"m",maj7:"maj7",min7:"m7",7:"7",diminished:"Â°",augmented:"+",sus2:"sus2",sus4:"sus4"};return{name:`${e(i)} ${e(c)}`,symbol:e(i)+t[e(c)],voicing:e(x),inversion:e(k)}}),$e=p(()=>{const{middleC:t,octaves:o}=e(U),l=t-Math.floor(o/2)*12,v=l+o*12;return ct(l,v,{root:e(n).root,third:e(n).third,fifth:e(n).fifth,seventh:e(n).seventh})});function He(t){var o,l,v,u;h(w,[...e(w),t],!0),e(_).includes(t.noteNumber)?(G("Correct!"),(l=(o=ue).playSound)==null||l.call(o,"success")):(tt(f),G("Try again!"),(u=(v=ue).playSound)==null||u.call(v,"error")),e(Oe)&&Ie()}function Pe(t){h(w,e(w).filter(o=>o.noteNumber!==t.noteNumber),!0)}function G(t,o){h(b,t,!0),setTimeout(()=>{h(b,"")},2e3)}function Ie(){var t,o;h(M,!0),Date.now()-e(T),Math.round((e(_).length-e(f))/e(_).length*100),G("Exercise completed!"),(o=(t=ue).playSound)==null||o.call(t,"success")}function z(){h(w,[],!0),h(f,0),h(M,!1),h(b,""),h(T,Date.now(),!0)}function je(t){h(i,t,!0),z()}function ze(t){h(A,t,!0)}function ge(){h(S,!e(S))}Ye(async()=>{await he.initialize(),he.setEventHandlers({onNoteOn:He,onNoteOff:Pe}),h(T,Date.now(),!0)}),Ze(()=>{he.cleanup()});let Ae=p(()=>({noteEvents:e(w),midiNotes:e(P),selectedNote:e(i),debugMode:e(S),errorCount:e(f),showNoteNames:e(I),showKeyboard:e(J),feedbackMessage:e(b)})),Fe=p(()=>({title:e(j).symbol,showClefs:!0}));var Q=Nt(),pe=r(a(Q),2);{var Le=t=>{var o=kt(),l=a(o,!0);s(o),H(()=>y(l,e(b))),C(t,o)};_e(pe,t=>{e(b)&&t(Le)})}var W=r(pe,2),X=a(W),Ke=a(X,!0);s(X);var fe=r(X,2),Y=a(fe),Ve=a(Y);s(Y);var me=r(Y,2),Be=a(me);s(me),s(fe),s(W);var Z=r(W,2),ee=a(Z),D=r(a(ee),2);D.__change=[xt,je],Me(D,21,()=>st,Se,(t,o)=>{var l=bt(),v=a(l,!0);s(l);var u={};H(()=>{y(v,e(o)),u!==(u=e(o))&&(l.value=(l.__value=e(o))??"")}),C(t,l)}),s(D);var ke;B(D),s(ee);var te=r(ee,2),E=r(a(te),2);E.__change=[pt,c,z],Me(E,21,()=>at,Se,(t,o)=>{var l=wt(),v=a(l,!0);s(l);var u={};H(()=>{y(v,e(o)),u!==(u=e(o))&&(l.value=(l.__value=e(o))??"")}),C(t,l)}),s(E);var xe;B(E),s(te);var oe=r(te,2),R=r(a(oe),2);R.__change=[ft,k,z];var se=a(R);se.value=se.__value=0;var ae=r(se);ae.value=ae.__value=1;var re=r(ae);re.value=re.__value=2;var be=r(re);be.value=be.__value=3,s(R);var we;B(R),s(oe);var le=r(oe,2),O=r(a(le),2);O.__change=[mt,x,z];var ne=a(O);ne.value=ne.__value="full";var ie=r(ne);ie.value=ie.__value="left-hand";var ve=r(ie);ve.value=ve.__value="right-hand";var ye=r(ve);ye.value=ye.__value="split",s(O);var Ce;B(O),s(le);var de=r(le,2),Ne=a(de);Ne.__click=z;var ce=r(Ne,2);ce.__click=ge;var qe=a(ce);s(ce),s(de);var Te=r(de,2),Je=a(Te);gt(Je,{get showChordTones(){return e(A)},onToggle:ze}),s(Te),s(Z);var Ue=r(Z,2);{let t=p(()=>({midiNotes:e(P),middleC:e(U).middleC,octaves:e(U).octaves,interactive:e(S),showLabels:e(I),chordToneInfo:e($e),showChordTones:e(A)}));vt(Ue,{get exerciseState(){return e(Ae)},exerciseTitle:"Current Chord",get expectedNotes(){return e(_)},get scoreProps(){return e(Fe)},get keyboardProps(){return e(t)},onDebugToggle:ge,onReset:z,customControls:!0,children:(o,l)=>{var v=Ct(),u=a(v),K=a(u);s(u);var F=r(u,2),Ge=a(F);s(F);var Qe=r(F,2);{var We=$=>{var Xe=yt();C($,Xe)};_e(Qe,$=>{e(M)&&$(We)})}s(v),H($=>{y(K,`Progress: ${$??""}%`),y(Ge,`Mistakes: ${e(f)??""}`)},[()=>Math.round(e(P).filter($=>e(_).includes($)).length/e(_).length*100)]),C(o,v)},$$slots:{default:!0}})}s(Q),H(()=>{y(Ke,e(j).symbol),y(Ve,`Voicing: ${e(j).voicing??""}`),y(Be,`Inversion: ${e(j).inversion===0?"Root":e(j).inversion===1?"1st":e(j).inversion===2?"2nd":"3rd"}`),ke!==(ke=e(i))&&(D.value=(D.__value=e(i))??"",q(D,e(i))),xe!==(xe=e(c))&&(E.value=(E.__value=e(c))??"",q(E,e(c))),we!==(we=e(k))&&(R.value=(R.__value=e(k))??"",q(R,e(k))),Ce!==(Ce=e(x))&&(O.value=(O.__value=e(x))??"",q(O,e(x))),y(qe,`${e(S)?"Hide":"Show"} Debug`)}),C(g,Q),Re()}De(["change","click"]);export{Ht as component};
