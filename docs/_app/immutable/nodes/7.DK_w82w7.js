import"../chunks/NZTpNUN0.js";import{p as X,c as Y,aT as Z,k as v,f as b,a as R,s as p,d as l,t as D,b as h,aq as ee,r as i,at as y,as as te,ad as I}from"../chunks/CDrHVJbW.js";import{d as re,s as M}from"../chunks/DqFET-oV.js";import{p as se,i as $}from"../chunks/Ce3K4QLS.js";import{r as ae}from"../chunks/CH0v-n_N.js";import{a as oe}from"../chunks/CuTZ8cwO.js";import{M as j,N as ne}from"../chunks/Ce2LPhVx.js";import{B as le}from"../chunks/D2YpDNXC.js";function ie(k,c){const d=k.target;I(c,d.checked,!0)}var ce=b('<div class="control-group svelte-qfr38k"><button class="debug-btn svelte-qfr38k"> </button> <button class="reset-btn svelte-qfr38k">Reset</button></div> <div class="control-group svelte-qfr38k"><label class="svelte-qfr38k"><input type="checkbox" class="svelte-qfr38k"/> Sequential Mode (play in order)</label></div>',1),de=b('<div class="control-group svelte-qfr38k"><button class="reset-btn svelte-qfr38k">Reset</button></div>'),ue=b('<div class="completion svelte-qfr38k">ðŸŽ‰ Scale Completed!</div>'),ve=b('<div class="scale-controls svelte-qfr38k"><!></div> <div class="exercise-status svelte-qfr38k"><div class="progress svelte-qfr38k"> </div> <div class="mistakes svelte-qfr38k"> </div> <!></div>',1);function qe(k,c){X(c,!0);let d=se(c,"randomMode",3,!1),f=ee(!0);function w(r){const e=ne[r+"4"],t=[0,2,4,5,7,9,11].map(o=>e+o);return console.log(`Scale for ${r}4:`,t.map(o=>j[o])),t}function B(r,e,s){return v(f)?G(r,e,s):W(r,e,s)}function G(r,e,s){const t=s.length,o=e[t];return r.noteNumber===o?t===e.length-1?{isCorrect:!0,message:"Perfect scale! ðŸŽµâœ¨"}:{isCorrect:!0,message:`Good! Note ${t+1}/${e.length}`}:{isCorrect:!1,message:`Wrong note! Expected ${j[o]?.slice(0,-1)||o.toString()} (note ${t+1})`}}function W(r,e,s){if(e.includes(r.noteNumber)){const t=s.filter(o=>e.includes(o));return t.length===e.length?{isCorrect:!0,message:"Perfect scale! ðŸŽµ"}:{isCorrect:!0,message:`Good! ${t.length}/${e.length} notes`}}else return{isCorrect:!1,message:"Wrong note!"}}function A(r,e){if(v(f))return r.length===e.length&&r.every((s,t)=>s===e[t]);{const s=[...new Set(r)],t=[...new Set(e)];return s.length===t.length&&s.every(o=>t.includes(o))}}function O(){d()&&c.onRandomComplete&&setTimeout(()=>{c.onRandomComplete()},1500)}{const r=(o,n=Z)=>{var N=ve(),q=R(N),z=l(q);{var F=a=>{var u=ce(),g=R(u),m=l(g);m.__click=function(..._){n().toggleDebug?.apply(this,_)};var U=l(m);i(m);var V=p(m,2);V.__click=function(..._){n().resetExercise?.apply(this,_)},i(g);var P=p(g,2),T=l(P),C=l(T);ae(C),C.__change=[ie,f],te(),i(T),i(P),D(()=>M(U,`${n().debugMode?"Disable":"Enable"} Debug Mode`)),oe(C,()=>v(f),_=>I(f,_)),h(a,u)},H=a=>{var u=de(),g=l(u);g.__click=function(...m){n().resetExercise?.apply(this,m)},i(u),h(a,u)};$(z,a=>{d()?a(H,!1):a(F)})}i(q);var E=p(q,2),x=l(E),J=l(x);i(x);var S=p(x,2),K=l(S);i(S);var L=p(S,2);{var Q=a=>{var u=ue();h(a,u)};$(L,a=>{n().completed&&a(Q)})}i(E),D(a=>{M(J,`Progress: ${a??""}%`),M(K,`Mistakes: ${n().mistakes??""}`)},[()=>Math.round(n().currentNotes.filter(a=>n().expectedNotes.includes(a)).length/n().expectedNotes.length*100)]),h(o,N)};let e=y(()=>d()?"Random Scale":"Scale Practice"),s=y(()=>d()?`Play the ${c.randomNote} major scale`:v(f)?"Play the scale notes in order":"Play all scale notes in any order"),t=y(()=>d()?c.randomNote:void 0);le(k,{get exerciseTitle(){return v(e)},get exerciseDescription(){return v(s)},exerciseType:"scale",get initialSelectedNote(){return v(t)},get randomMode(){return d()},generateExpectedNotes:w,validateNoteEvent:B,isCompleted:A,customControls:!0,onExerciseComplete:O,children:r,$$slots:{default:!0}})}Y()}re(["click","change"]);export{qe as component};
