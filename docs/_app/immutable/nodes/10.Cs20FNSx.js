import{f as w,a as f,t as F,c as z}from"../chunks/Dh1Z6ki8.js";import{p as Ne,U as S,V as he,g as J,k as e,W as be,a as xe,Z as s,f as U,s as _,c as o,t as I,Y as P,r as n,_ as Ce}from"../chunks/DRD-yT8e.js";import{d as Ee,s as y}from"../chunks/Chq1SuiK.js";import{i as x}from"../chunks/J_yv6X8T.js";import{r as ye}from"../chunks/AgGyIM3c.js";import{b as Le}from"../chunks/BoupOGuT.js";import{A as Q,D as Te,N as Me,M as X}from"../chunks/CXrKfc7O.js";import{B as Se}from"../chunks/D_VG9ZNK.js";var we=w('<div class="answer-display svelte-1t6gd2v"><span class="arrow svelte-1t6gd2v">â†’</span> <div class="note-card correct svelte-1t6gd2v"><span class="note-name svelte-1t6gd2v"> </span> <span class="notation-type svelte-1t6gd2v"> </span></div></div>'),Ae=w('<button class="next-note-btn svelte-1t6gd2v">Next Note</button>'),De=w('<div class="note-controls svelte-1t6gd2v"><div class="control-group svelte-1t6gd2v"><label class="svelte-1t6gd2v"><input type="checkbox" class="svelte-1t6gd2v"/> English â†’ Latin</label></div> <!></div>'),ke=w('<div class="note-controls svelte-1t6gd2v"><button class="next-note-btn svelte-1t6gd2v">Next Note</button></div>'),Fe=w('<!> <div class="note-name-exercise svelte-1t6gd2v"><div class="exercise-info svelte-1t6gd2v"><h2 class="svelte-1t6gd2v">Note Name Translation</h2> <p class="instruction svelte-1t6gd2v"><!></p></div> <div class="note-display svelte-1t6gd2v"><div class="note-card svelte-1t6gd2v"><span class="note-name svelte-1t6gd2v"> </span> <span class="notation-type svelte-1t6gd2v"> </span></div> <!></div> <!></div>',1);function Oe($,N){Ne(N,!0);const ee="Identify and play the note name shown. Use either English or Latin notation.",L={C:"Do","C#":"Do#",Db:"Reb",D:"Re","D#":"Re#",Eb:"Mib",E:"Mi",F:"Fa","F#":"Fa#",Gb:"Solb",G:"Sol","G#":"Sol#",Ab:"Lab",A:"La","A#":"La#",Bb:"Sib",B:"Si"};let r=S(he(N.englishToLatin??!0)),p=S(""),c=S("C"),h=S(!1),C=S(!1);function te(){s(h,!1),s(C,!1),A()}J(()=>{e(C)&&N.onComplete&&N.onComplete()});function A(){const i=Q[Math.floor(Math.random()*Q.length)];if(s(c,i,!0),e(r))s(p,i,!0);else{const v=L[i];s(p,v,!0)}s(h,!1)}function q(i){const v=e(c)+Te,b=Me[v];return console.debug(`Note name exercise: ${e(p)} -> ${e(c)}`,`Expected MIDI: ${b}`),[b]}function ae(i){const D=q().map(u=>X[u]).map(u=>[u]);return{selectedNote:i,leftHand:[],rightHand:D}}function se(i,v,b,D){if(b.includes(v.noteNumber)){s(h,!0);const E=e(r)?"English":"Latin",u=e(r)?"Latin":"English",k=e(r)?L[e(c)]:e(c);return setTimeout(()=>{A()},1500),{isCorrect:!0,message:`Perfect! ${e(p)} (${E}) = ${k} (${u}) ðŸŽµâœ¨`,collected:!0,resetCollected:!0,resetMistakes:!0}}else{const E=X[v.noteNumber]?.slice(0,-1),u=e(r)?L[e(c)]:e(c);return{isCorrect:!1,message:`Wrong! You played ${E}. ${e(p)} = ${u}`,collected:!1,resetCollected:!1}}}function oe(i,v){return!1}function ne(i){const v=i.target;s(r,v.checked,!0),e(r)?s(p,e(c),!0):s(p,L[e(c)],!0)}function O(){s(h,!1),s(C,!1),A()}J(()=>{e(p)||A()});{const i=(D,E=be)=>{const u=P(()=>e(C)),k=P(()=>E().completed);var V=Fe(),W=U(V);{var re=t=>{var a=F();I(()=>y(a,s(C,!0))),f(t,a)},le=t=>{var a=z(),g=U(a);{var m=l=>{var d=F();I(()=>y(d,s(C,!1))),f(l,d)};x(g,l=>{!e(k)&&e(u)&&l(m)},!0)}f(t,a)};x(W,t=>{e(k)&&!e(u)?t(re):t(le,!1)})}var Y=_(W,2),R=o(Y),K=_(o(R),2),ie=o(K);{var ve=t=>{var a=F("Play the Latin (SolfÃ¨ge) equivalent of this English note:");f(t,a)},ce=t=>{var a=F("Play the English equivalent of this Latin (SolfÃ¨ge) note:");f(t,a)};x(ie,t=>{e(r)?t(ve):t(ce,!1)})}n(K),n(R);var B=_(R,2),G=o(B),H=o(G),de=o(H,!0);n(H);var Z=_(H,2),fe=o(Z,!0);n(Z),n(G);var ue=_(G,2);{var ge=t=>{var a=we(),g=_(o(a),2),m=o(g),l=o(m,!0);n(m);var d=_(m,2),T=o(d,!0);n(d),n(g),n(a),I(()=>{y(l,e(r)?L[e(c)]:e(c)),y(T,e(r)?"Latin (SolfÃ¨ge)":"English")}),f(t,a)};x(ue,t=>{e(h)&&t(ge)})}n(B);var me=_(B,2);{var pe=t=>{var a=De(),g=o(a),m=o(g),l=o(m);ye(l),l.__change=ne,Ce(),n(m),n(g);var d=_(g,2);{var T=M=>{var j=Ae();j.__click=O,f(M,j)};x(d,M=>{e(h)&&M(T)})}n(a),Le(l,()=>e(r),M=>s(r,M)),f(t,a)},_e=t=>{var a=z(),g=U(a);{var m=l=>{var d=ke(),T=o(d);T.__click=O,n(d),f(l,d)};x(g,l=>{e(h)&&l(m)},!0)}f(t,a)};x(me,t=>{N.randomMode?t(_e,!1):t(pe)})}n(Y),I(()=>{y(de,e(p)),y(fe,e(r)?"English":"Latin (SolfÃ¨ge)")}),f(D,V)};let v=P(()=>N.onComplete??(()=>{})),b=P(()=>N.rootKey||"C");Se($,{randomMode:!0,generateExpectedNotes:q,generateScoreProps:ae,validateNoteEvent:se,isCompleted:oe,onReset:te,get onComplete(){return e(v)},showScore:!1,get initialNote(){return e(b)},description:ee,showTempoControl:!1,showTrainingControl:!1,children:i,$$slots:{default:!0}})}xe()}Ee(["change","click"]);export{Oe as component};
