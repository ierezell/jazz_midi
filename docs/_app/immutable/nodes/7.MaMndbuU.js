import"../chunks/NZTpNUN0.js";import{d as ce,s as j,o as pe,a as xe}from"../chunks/isL9873N.js";import{q as ie,A as be,w as me,au as we,av as ke,z as ye,G as Me,I as Ce,x as Ie,J as Te,M as Ee,U as je,L as Ne,p as de,as as X,a as Y,b as x,c as ve,f as T,d as c,s as d,r as l,t as V,k as e,ao as I,Q as U,g as Ve,R as p,aw as Se,at as Ae,aq as oe}from"../chunks/u8fP_b2Q.js";import{i as q}from"../chunks/Cj8lQ-n9.js";import{e as O,i as z,a as Ue,b as qe,c as Ke,d as ue,f as ge,g as Pe}from"../chunks/DmnNUe2y.js";import{r as J,e as Q}from"../chunks/CXakw2E1.js";import{component as De}from"./4.C21T-iho.js";import{component as Ge}from"./8.R8zWUiHk.js";import{component as Re}from"./9.CAW_8TK1.js";function Le(u,t,s){ie&&be();var E=u,M=je,C,b,g=null,m=me()?we:ke;function h(){C&&Ne(C),g!==null&&(g.lastChild.remove(),E.before(g),g=null),C=b}ye(()=>{if(m(M,M=t())){var f=E,w=Te();w&&(g=document.createDocumentFragment(),g.append(f=Me())),b=Ce(()=>s(f)),w?Ie.add_callback(h):h()}}),ie&&(E=Ee)}const Fe=["chord","scale","II-V-I"];var Oe=(u,t)=>t(u),ze=(u,t)=>t(u),Je=(u,t)=>t.onClose(),Qe=(u,t,s)=>t("allowedExerciseTypes",e(s),u.currentTarget.checked),We=T('<label class="checkbox-label svelte-1giufxc"><input type="checkbox"/> <span> </span></label>'),Ze=(u,t,s)=>t("allowedNotes",e(s),u.currentTarget.checked),Be=T('<label class="checkbox-label svelte-1giufxc"><input type="checkbox"/> <span> </span></label>'),He=(u,t,s)=>t("allowedChordTypes",e(s),u.currentTarget.checked),Xe=T('<label class="checkbox-label svelte-1giufxc"><input type="checkbox"/> <span> </span></label>'),Ye=(u,t,s)=>t("allowedInversions",e(s).toString(),u.currentTarget.checked),$e=T('<label class="checkbox-label svelte-1giufxc"><input type="checkbox"/> <span> </span></label>'),ea=(u,t,s)=>t("allowedScaleModes",e(s),u.currentTarget.checked),aa=T('<label class="checkbox-label svelte-1giufxc"><input type="checkbox"/> <span> </span></label>'),ta=(u,t,s)=>t("allowedVoicings",e(s),u.currentTarget.checked),sa=T('<label class="checkbox-label svelte-1giufxc"><input type="checkbox"/> <span> </span></label>'),ra=T('<div class="popup-overlay svelte-1giufxc" role="dialog" aria-modal="true" aria-label="Configure exercises" tabindex="0"><div class="popup-content svelte-1giufxc"><button type="button" class="close-btn svelte-1giufxc" aria-label="Close">×</button> <h2 class="svelte-1giufxc">Exercise Configuration</h2> <div class="config-grid svelte-1giufxc"><div class="config-section svelte-1giufxc"><h3 class="svelte-1giufxc">Exercise Types</h3> <div class="checkbox-grid svelte-1giufxc"></div></div> <div class="config-section svelte-1giufxc"><h3 class="svelte-1giufxc">Notes</h3> <div class="checkbox-grid svelte-1giufxc"></div></div> <div class="config-section svelte-1giufxc"><h3 class="svelte-1giufxc">Chord Types</h3> <div class="checkbox-grid svelte-1giufxc"></div></div> <div class="config-section svelte-1giufxc"><h3 class="svelte-1giufxc">Inversions</h3> <div class="checkbox-grid svelte-1giufxc"></div></div> <div class="config-section svelte-1giufxc"><h3 class="svelte-1giufxc">Scale Modes</h3> <div class="checkbox-grid svelte-1giufxc"></div></div> <div class="config-section svelte-1giufxc"><h3 class="svelte-1giufxc">Voicings</h3> <div class="checkbox-grid svelte-1giufxc"></div></div></div></div></div>');function la(u,t){de(t,!0);function s(g,m,h){let f=[];switch(g){case"allowedExerciseTypes":f=[...t.allowedExerciseTypes];break;case"allowedNotes":f=[...t.allowedNotes];break;case"allowedChordTypes":f=[...t.allowedChordTypes];break;case"allowedInversions":f=[...t.allowedInversions];break;case"allowedScaleModes":f=[...t.allowedScaleModes];break;case"allowedVoicings":f=[...t.allowedVoicings];break}if(h)f.push(m);else if(f.length>1){const w=f.indexOf(m);w>-1&&f.splice(w,1)}t.onUpdate(g,f.sort())}function E(g){(g instanceof MouseEvent&&g.target.classList.contains("popup-overlay")||g instanceof KeyboardEvent&&g.key==="Escape")&&t.onClose()}var M=X(),C=Y(M);{var b=g=>{var m=ra();m.__click=[Oe,E],m.__keydown=[ze,E];var h=c(m),f=c(h);f.__click=[Je,t];var w=d(f,4),N=c(w),K=d(c(N),2);O(K,21,()=>Fe,z,(k,i)=>{var v=We(),o=c(v);J(o),o.__change=[Qe,s,i];var a=d(o,2),r=c(a,!0);l(a),l(v),V((n,_)=>{Q(o,n),j(r,_)},[()=>t.allowedExerciseTypes.includes(e(i)),()=>e(i).charAt(0).toUpperCase()+e(i).slice(1)]),x(k,v)}),l(K),l(N);var P=d(N,2),$=d(c(P),2);O($,21,()=>Ue,z,(k,i)=>{var v=Be(),o=c(v);J(o),o.__change=[Ze,s,i];var a=d(o,2),r=c(a,!0);l(a),l(v),V(n=>{Q(o,n),j(r,e(i))},[()=>t.allowedNotes.includes(e(i))]),x(k,v)}),l($),l(P);var S=d(P,2),D=d(c(S),2);O(D,21,()=>qe,z,(k,i)=>{var v=Xe(),o=c(v);J(o),o.__change=[He,s,i];var a=d(o,2),r=c(a,!0);l(a),l(v),V(n=>{Q(o,n),j(r,e(i))},[()=>t.allowedChordTypes.includes(e(i))]),x(k,v)}),l(D),l(S);var A=d(S,2),G=d(c(A),2);O(G,21,()=>Ke,z,(k,i)=>{var v=$e(),o=c(v);J(o),o.__change=[Ye,s,i];var a=d(o,2),r=c(a,!0);l(a),l(v),V(n=>{Q(o,n),j(r,e(i)===0?"Root":`${e(i)}${e(i)===1?"st":e(i)===2?"nd":"rd"}`)},[()=>t.allowedInversions.includes(e(i))]),x(k,v)}),l(G),l(A);var W=d(A,2),ee=d(c(W),2);O(ee,21,()=>ue,z,(k,i)=>{var v=aa(),o=c(v);J(o),o.__change=[ea,s,i];var a=d(o,2),r=c(a,!0);l(a),l(v),V(n=>{Q(o,n),j(r,e(i))},[()=>t.allowedScaleModes.includes(e(i))]),x(k,v)}),l(ee),l(W);var Z=d(W,2),B=d(c(Z),2);O(B,21,()=>ge,z,(k,i)=>{var v=sa(),o=c(v);J(o),o.__change=[ta,s,i];var a=d(o,2),r=c(a,!0);l(a),l(v),V((n,_)=>{Q(o,n),j(r,_)},[()=>t.allowedVoicings.includes(e(i)),()=>e(i).charAt(0).toUpperCase()+e(i).slice(1)]),x(k,v)}),l(B),l(Z),l(w),l(h),l(m),x(g,m)};q(C,g=>{t.showPopup&&g(b)})}x(u,M),ve()}ce(["click","keydown","change"]);var oa=(u,t)=>p(t,!0),na=T('<div class="exercise-info svelte-2ui56j"><span class="exercise-type svelte-2ui56j"> </span> <span class="exercise-description svelte-2ui56j"> </span> <button class="config-btn svelte-2ui56j" type="button">⚙️ Config</button> <button class="new-exercise-btn svelte-2ui56j">🎲 New</button></div>'),ia=T('<div class="completion-overlay svelte-2ui56j"><div class="completion-message svelte-2ui56j"><h2 class="svelte-2ui56j">🎉 Exercise Completed!</h2> <p class="svelte-2ui56j">Great job! Next random exercise in <strong> </strong> seconds...</p> <button class="skip-btn svelte-2ui56j">Skip Wait</button></div></div>'),ca=T('<div class="loading svelte-2ui56j">Generating random exercise...</div>'),da=T('<div class="random-exercise svelte-2ui56j"><div class="random-header svelte-2ui56j"><!></div> <!> <!> <!></div>');function ma(u,t){de(t,!0);let s=I(U({type:"chord",key:"C",chordType:"maj7",voicing:"full-right",inversion:0,description:"Cmaj - Random Voicing"})),E=I(0),M=I(!1),C=I(0),b=null,g=I(U(["C","F","G"])),m=I(U(["maj7","min7","7","major","minor"])),h=I(U([0,1,2,3])),f=I(U(ue)),w=I(U(ge)),N=I(U(["chord","II-V-I","scale"])),K=I(!1);Ve(()=>{e(M)&&e(s)&&(b&&clearInterval(b),p(C,3),b=setInterval(()=>{Se(C,-1),e(C)<=0&&(b&&clearInterval(b),S(),p(M,!1))},1e3))});function P(){const a=e(N)[Math.floor(Math.random()*e(N).length)],r=e(g)[Math.floor(Math.random()*e(g).length)];return $(a,r)}function $(a,r){switch(a){case"chord":{const n=e(m)[Math.floor(Math.random()*e(m).length)];let _=e(h)[Math.floor(Math.random()*e(h).length)],y=e(w)[Math.floor(Math.random()*e(w).length)];return Pe.includes(n)&&_>2&&(_=e(h)[Math.floor(Math.random()*(e(h).length-1))]),{type:a,key:r,chordType:n,voicing:y,inversion:_,description:`${r}${n}${_>0?` (${_}st inversion)`:""} - ${y}`}}case"scale":{const n=e(f)[Math.floor(Math.random()*e(f).length)];return{type:a,key:r,scaleMode:n,description:`${r} ${n}`}}case"II-V-I":{const n=e(h)[Math.floor(Math.random()*e(h).length)];let _=e(w)[Math.floor(Math.random()*e(w).length)];return{type:a,key:r,voicing:_,inversion:n,description:`${r} II-V-I Progression${n>0?` (${n}st inversion)`:""} ${_}`}}default:throw new Error(`Unknown exercise type: ${a}`)}}function S(){p(s,P(),!0),p(E,Date.now(),!0),p(M,!1),b&&(clearInterval(b),b=null),p(C,0)}function D(){p(M,!0)}pe(()=>{p(s,P(),!0)}),xe(()=>{b&&clearInterval(b)});var A=da(),G=c(A),W=c(G);{var ee=a=>{var r=na(),n=c(r),_=c(n,!0);l(n);var y=d(n,2),H=c(y,!0);l(y);var R=d(y,2);R.__click=[oa,K];var te=d(R,2);te.__click=S,l(r),V(()=>{j(_,e(s).type),j(H,e(s).description)}),x(a,r)};q(W,a=>{e(s)&&a(ee)})}l(G);var Z=d(G,2);la(Z,{get showPopup(){return e(K)},get allowedNotes(){return e(g)},get allowedChordTypes(){return e(m)},get allowedInversions(){return e(h)},get allowedScaleModes(){return e(f)},get allowedVoicings(){return e(w)},get allowedExerciseTypes(){return e(N)},onClose:()=>p(K,!1),onUpdate:(a,r)=>{switch(a){case"allowedNotes":p(g,r,!0);break;case"allowedChordTypes":p(m,r,!0);break;case"allowedInversions":p(h,r.map(Number),!0);break;case"allowedScaleModes":p(f,r,!0);break;case"allowedVoicings":p(w,r,!0);break;case"allowedExerciseTypes":p(N,r,!0);break}}});var B=d(Z,2);{var k=a=>{var r=ia(),n=c(r),_=d(c(n),2),y=d(c(_)),H=c(y,!0);l(y),Ae(),l(_);var R=d(_,2);R.__click=S,l(n),l(r),V(()=>j(H,e(C))),x(a,r)};q(B,a=>{e(M)&&a(k)})}var i=d(B,2);{var v=a=>{var r=X(),n=Y(r);Le(n,()=>e(E),_=>{var y=X(),H=Y(y);{var R=L=>{{let ae=oe(()=>e(s).chordType||"maj7"),se=oe(()=>e(s).inversion||0),re=oe(()=>e(s).voicing||"full-right");De(L,{randomMode:!0,onComplete:D,get chordType(){return e(ae)},get inversion(){return e(se)},get voicing(){return e(re)},get rootKey(){return e(s).key}})}},te=L=>{var ae=X(),se=Y(ae);{var re=F=>{Ge(F,{randomMode:!0,onComplete:D,get scaleMode(){return e(s).scaleMode},sequentialMode:Math.random()>.5,get rootKey(){return e(s).key}})},fe=F=>{var ne=X(),_e=Y(ne);{var he=le=>{Re(le,{randomMode:!0,onComplete:D,get inversion(){return e(s).inversion},get voicing(){return e(s).voicing},get rootKey(){return e(s).key}})};q(_e,le=>{e(s).type==="II-V-I"&&le(he)},!0)}x(F,ne)};q(se,F=>{e(s).type==="scale"?F(re):F(fe,!1)},!0)}x(L,ae)};q(H,L=>{e(s).type==="chord"?L(R):L(te,!1)})}x(_,y)}),x(a,r)},o=a=>{var r=ca();x(a,r)};q(i,a=>{e(s)?a(v):a(o,!1)})}l(A),x(u,A),ve()}ce(["click"]);export{ma as component};
