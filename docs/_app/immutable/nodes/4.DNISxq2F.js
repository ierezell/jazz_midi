import"../chunks/NZTpNUN0.js";import{p as ce,ap as w,R as q,g as ue,k as e,c as _e,aU as fe,f as J,a as F,aq as $,s as r,d as m,r as v,b as y,as as ee,t as I,S as T,ar as he}from"../chunks/wFTEGHnI.js";import{d as ge,s as L}from"../chunks/BJdPA1W9.js";import{i as P}from"../chunks/DB4UBEnh.js";import{d as te,N as pe,e as me,i as Ce,a as Me}from"../chunks/M4Hk-hxN.js";import{i as U,g as z}from"../chunks/BBAnfavV.js";import{B as be,g as ye,c as xe}from"../chunks/BywGZpRb.js";function He(c,t){const s=c.target;T(t,s.value,!0)}function je(c,t){const s=c.target;T(t,parseInt(s.value),!0)}function ke(c,t){const s=c.target;T(t,s.value,!0)}var Te=J("<option> </option>"),Ne=J('<div class="control-group svelte-t0jkd5"><label for="chord-type" class="svelte-t0jkd5">Chord Type:</label> <select id="chord-type"></select></div> <div class="control-group svelte-t0jkd5"><label for="inversion" class="svelte-t0jkd5">Inversion:</label> <select id="inversion"><option>Root</option><option>1st</option><option>2nd</option><option>3rd</option></select></div> <div class="control-group svelte-t0jkd5"><label for="voicing" class="svelte-t0jkd5">Voicing:</label> <select id="voicing"><option>Full</option><option>Left Hand</option><option>Right Hand</option><option>Split</option></select></div>',1),Ee=J('<!> <div class="controls svelte-t0jkd5"><!></div>',1);function De(c,t){ce(t,!0);let s=["maj7","min7","7","dom7","half-dim7","dim7"],u=w(q(t.chordType??(t.randomMode?s[Math.floor(Math.random()*s.length)]:"maj7"))),_=w(q(t.inversion??(t.randomMode?Math.floor(Math.random()*4):0))),f=w(q(t.voicing??(t.randomMode?te[Math.floor(Math.random()*te.length)]:"full"))),N=w(!1);ue(()=>{e(N)&&t.onComplete&&t.onComplete()});function oe(n){const a=n+"4",h=pe[a],o=xe(h,e(u),e(_)),x=[o.root,o.third,o.fifth,o.seventh].filter(C=>C!==void 0);switch(e(f)){case"full":return x;case"left-hand":return[o.root,o.seventh].filter(H=>H!==void 0);case"right-hand":return[o.third,o.fifth];case"split":const C=[o.root-12,(o.seventh||o.root)-12].filter(H=>H>=24),E=[o.third,o.fifth];return[...C,...E];default:return x}}function ae(n,a,h){return h.includes(a.noteNumber)?{isCorrect:!0,message:"Correct chord tone!"}:{isCorrect:!1,message:"Not a chord tone. Try again!"}}function re(n){try{const a=ye(n,e(u),e(_),e(f));return console.debug("Generated score data:",{selectedNote:n,chordType:e(u),voicing:e(f),inversion:e(_),scoreData:a}),{leftHand:a.leftHand,rightHand:a.rightHand,selectedNote:n}}catch(a){return console.error("Error generating score data:",a),{selectedNote:"C",leftHand:[[]],rightHand:[["C4","E4","G4"]]}}}function ne(n,a){return n.length===a.length&&n.every(h=>a.includes(h))}be(c,{get randomMode(){return t.randomMode},generateExpectedNotes:oe,generateScoreProps:re,validateNoteEvent:ae,isCompleted:ne,children:(a,h=fe)=>{var o=Ee();const x=$(()=>e(N)),C=$(()=>h().completed);var E=F(o);{var H=i=>{var d=ee();I(()=>L(d,T(N,!0))),y(i,d)},ie=i=>{var d=he(),j=F(d);{var l=M=>{var b=ee();I(()=>L(b,T(N,!1))),y(M,b)};P(j,M=>{!e(C)&&e(x)&&M(l)},!0)}y(i,d)};P(E,i=>{e(C)&&!e(x)?i(H):i(ie,!1)})}var K=r(E,2),le=m(K);{var se=i=>{var d=Ne(),j=F(d),l=r(m(j),2);l.__change=[He,u],me(l,21,()=>Me,Ce,(de,G)=>{var k=Te(),ve=m(k,!0);v(k);var Z={};I(()=>{L(ve,e(G)),Z!==(Z=e(G))&&(k.value=(k.__value=e(G))??"")}),y(de,k)}),v(l);var M;U(l),v(j);var b=r(j,2),g=r(m(b),2);g.__change=[je,_];var R=m(g);R.value=R.__value=0;var S=r(R);S.value=S.__value=1;var V=r(S);V.value=V.__value=2;var O=r(V);O.value=O.__value=3,v(g);var Q;U(g),v(b);var W=r(b,2),p=r(m(W),2);p.__change=[ke,f];var A=m(p);A.value=A.__value="full";var B=r(A);B.value=B.__value="left-hand";var D=r(B);D.value=D.__value="right-hand";var X=r(D);X.value=X.__value="split",v(p);var Y;U(p),v(W),I(()=>{M!==(M=e(u))&&(l.value=(l.__value=e(u))??"",z(l,e(u))),Q!==(Q=e(_))&&(g.value=(g.__value=e(_))??"",z(g,e(_))),Y!==(Y=e(f))&&(p.value=(p.__value=e(f))??"",z(p,e(f)))}),y(i,d)};P(le,i=>{t.randomMode||i(se)})}v(K),y(a,o)},$$slots:{default:!0}}),_e()}ge(["change"]);export{De as component};
