import{c as Q,a as h,f as M}from"../chunks/BHFmxDGj.js";import{o as we,a as ke}from"../chunks/BJ7hgZWE.js";import{i as xe,I as ye,aK as Me,b as Ce,p as ve,f as X,a as ge,c as l,s as c,v as e,r as s,t as E,U as C,V as j,n as Ie,X as f,_ as Te,Z as Ee,Y as le}from"../chunks/D-WvxLPx.js";import{d as pe,s as T}from"../chunks/y4LLdheI.js";import{i as U}from"../chunks/DD9bTvrE.js";import{B as Ve}from"../chunks/CJBjcz8a.js";import{a as Ne,b as Se,c as Ae,d as ue,e as he,f as je}from"../chunks/DgZpB3qr.js";import{e as q,i as F}from"../chunks/DiVgXp1T.js";import{r as L,c as W}from"../chunks/C_BxDK4Q.js";import{component as Ue}from"./5.fgfQGZqU.js";import{component as Ke}from"./11.B10SCffm.js";import{component as Pe}from"./13.vagbisIP.js";function Re(Y,v,n){xe&&ye();var N=new Ve(Y),I=!Me();Ce(()=>{var w=v();I&&w!==null&&typeof w=="object"&&(w={}),N.ensure(w,n)})}const Ge=["chord","scale","II-V-I"];var Be=M('<label class="checkbox-label svelte-pgit1g"><input type="checkbox"/> <span> </span></label>'),De=M('<label class="checkbox-label svelte-pgit1g"><input type="checkbox"/> <span> </span></label>'),Oe=M('<label class="checkbox-label svelte-pgit1g"><input type="checkbox"/> <span> </span></label>'),qe=M('<label class="checkbox-label svelte-pgit1g"><input type="checkbox"/> <span> </span></label>'),Fe=M('<label class="checkbox-label svelte-pgit1g"><input type="checkbox"/> <span> </span></label>'),Le=M('<label class="checkbox-label svelte-pgit1g"><input type="checkbox"/> <span> </span></label>'),We=M('<div class="popup-overlay svelte-pgit1g" role="dialog" aria-modal="true" aria-label="Configure exercises" tabindex="0"><div class="popup-content svelte-pgit1g"><button type="button" class="close-btn svelte-pgit1g" aria-label="Close">Ã—</button> <h2 class="svelte-pgit1g">Exercise Configuration</h2> <div class="config-grid svelte-pgit1g"><div class="config-section svelte-pgit1g"><h3 class="svelte-pgit1g">Exercise Types</h3> <div class="checkbox-grid svelte-pgit1g"></div></div> <div class="config-section svelte-pgit1g"><h3 class="svelte-pgit1g">Notes</h3> <div class="checkbox-grid svelte-pgit1g"></div></div> <div class="config-section svelte-pgit1g"><h3 class="svelte-pgit1g">Chord Types</h3> <div class="checkbox-grid svelte-pgit1g"></div></div> <div class="config-section svelte-pgit1g"><h3 class="svelte-pgit1g">Inversions</h3> <div class="checkbox-grid svelte-pgit1g"></div></div> <div class="config-section svelte-pgit1g"><h3 class="svelte-pgit1g">Scale Modes</h3> <div class="checkbox-grid svelte-pgit1g"></div></div> <div class="config-section svelte-pgit1g"><h3 class="svelte-pgit1g">Voicings</h3> <div class="checkbox-grid svelte-pgit1g"></div></div></div></div></div>');function Xe(Y,v){ve(v,!0);function n(_,m,b){let p=[];switch(_){case"allowedExerciseTypes":p=[...v.allowedExerciseTypes];break;case"allowedNotes":p=[...v.allowedNotes];break;case"allowedChordTypes":p=[...v.allowedChordTypes];break;case"allowedInversions":p=[...v.allowedInversions];break;case"allowedScaleModes":p=[...v.allowedScaleModes];break;case"allowedVoicings":p=[...v.allowedVoicings];break}if(b)p.push(m);else if(p.length>1){const x=p.indexOf(m);x>-1&&p.splice(x,1)}v.onUpdate(_,p.sort())}function N(_){(_ instanceof MouseEvent&&_.target.classList.contains("popup-overlay")||_ instanceof KeyboardEvent&&_.key==="Escape")&&v.onClose()}var I=Q(),w=X(I);{var k=_=>{var m=We();m.__click=u=>N(u),m.__keydown=u=>N(u);var b=l(m),p=l(b);p.__click=()=>v.onClose();var x=c(p,4),V=l(x),K=c(l(V),2);q(K,21,()=>Ge,F,(u,i)=>{var d=Be(),o=l(d);L(o),o.__change=a=>n("allowedExerciseTypes",e(i),a.currentTarget.checked);var t=c(o,2),r=l(t,!0);s(t),s(d),E((a,g)=>{W(o,a),T(r,g)},[()=>v.allowedExerciseTypes.includes(e(i)),()=>e(i).charAt(0).toUpperCase()+e(i).slice(1)]),h(u,d)}),s(K),s(V);var P=c(V,2),$=c(l(P),2);q($,21,()=>Ne,F,(u,i)=>{var d=De(),o=l(d);L(o),o.__change=a=>n("allowedNotes",e(i),a.currentTarget.checked);var t=c(o,2),r=l(t,!0);s(t),s(d),E(a=>{W(o,a),T(r,e(i))},[()=>v.allowedNotes.includes(e(i))]),h(u,d)}),s($),s(P);var S=c(P,2),R=c(l(S),2);q(R,21,()=>Se,F,(u,i)=>{var d=Oe(),o=l(d);L(o),o.__change=a=>n("allowedChordTypes",e(i),a.currentTarget.checked);var t=c(o,2),r=l(t,!0);s(t),s(d),E(a=>{W(o,a),T(r,e(i))},[()=>v.allowedChordTypes.includes(e(i))]),h(u,d)}),s(R),s(S);var A=c(S,2),G=c(l(A),2);q(G,21,()=>Ae,F,(u,i)=>{var d=qe(),o=l(d);L(o),o.__change=a=>n("allowedInversions",e(i).toString(),a.currentTarget.checked);var t=c(o,2),r=l(t,!0);s(t),s(d),E(a=>{W(o,a),T(r,e(i)===0?"Root":`${e(i)}${e(i)===1?"st":e(i)===2?"nd":"rd"}`)},[()=>v.allowedInversions.includes(e(i))]),h(u,d)}),s(G),s(A);var Z=c(A,2),ee=c(l(Z),2);q(ee,21,()=>ue,F,(u,i)=>{var d=Fe(),o=l(d);L(o),o.__change=a=>n("allowedScaleModes",e(i),a.currentTarget.checked);var t=c(o,2),r=l(t,!0);s(t),s(d),E(a=>{W(o,a),T(r,e(i))},[()=>v.allowedScaleModes.includes(e(i))]),h(u,d)}),s(ee),s(Z);var z=c(Z,2),H=c(l(z),2);q(H,21,()=>he,F,(u,i)=>{var d=Le(),o=l(d);L(o),o.__change=a=>n("allowedVoicings",e(i),a.currentTarget.checked);var t=c(o,2),r=l(t,!0);s(t),s(d),E((a,g)=>{W(o,a),T(r,g)},[()=>v.allowedVoicings.includes(e(i)),()=>e(i).charAt(0).toUpperCase()+e(i).slice(1)]),h(u,d)}),s(H),s(z),s(x),s(b),s(m),h(_,m)};U(w,_=>{v.showPopup&&_(k)})}h(Y,I),ge()}pe(["click","keydown","change"]);var Ye=M('<div class="exercise-info svelte-1cwrm9k"><span class="exercise-type svelte-1cwrm9k"> </span> <span class="exercise-description svelte-1cwrm9k"> </span> <button class="config-btn svelte-1cwrm9k" type="button">âš™ï¸ Config</button> <button class="new-exercise-btn svelte-1cwrm9k">ğŸ² New</button></div>'),Ze=M('<div class="completion-overlay svelte-1cwrm9k"><div class="completion-message svelte-1cwrm9k"><h2 class="svelte-1cwrm9k">ğŸ‰ Exercise Completed!</h2> <p class="svelte-1cwrm9k">Great job! Next random exercise in <strong> </strong> seconds...</p> <button class="skip-btn svelte-1cwrm9k">Skip Wait</button></div></div>'),ze=M("<!> <div> </div>",1),He=M('<div class="loading svelte-1cwrm9k">Generating random exercise...</div>'),Je=M('<div class="random-exercise svelte-1cwrm9k"><div class="random-header svelte-1cwrm9k"><!></div> <!> <!> <!></div>');function da(Y,v){ve(v,!0);let n=C(j({type:"chord",key:"C",chordType:"maj7",voicing:"full-right",inversion:0,description:"Cmaj - Random Voicing"})),N=C(0),I=C(!1),w=C(0),k=null,_=C(j(["C","F","G"])),m=C(j(["maj7","min7","7","major","minor"])),b=C(j([0,1,2,3])),p=C(j(ue)),x=C(j(he)),V=C(j(["chord","II-V-I","scale"])),K=C(!1);Ie(()=>{e(I)&&e(n)&&(k&&clearInterval(k),f(w,3),k=setInterval(()=>{Te(w,-1),e(w)<=0&&(k&&clearInterval(k),S(),f(I,!1))},1e3))});function P(){const t=e(V)[Math.floor(Math.random()*e(V).length)],r=e(_)[Math.floor(Math.random()*e(_).length)];return $(t,r)}function $(t,r){switch(t){case"chord":{const a=e(m)[Math.floor(Math.random()*e(m).length)];let g=e(b)[Math.floor(Math.random()*e(b).length)],y=e(x)[Math.floor(Math.random()*e(x).length)];return je.includes(a)&&g>2&&(g=e(b)[Math.floor(Math.random()*(e(b).length-1))]),{type:t,key:r,chordType:a,voicing:y,inversion:g,description:`${r}${a}${g>0?` (${g}st inversion)`:""} - ${y}`}}case"scale":{const a=e(p)[Math.floor(Math.random()*e(p).length)];return{type:t,key:r,scaleMode:a,description:`${r} ${a}`}}case"II-V-I":{const a=e(b)[Math.floor(Math.random()*e(b).length)];let g=e(x)[Math.floor(Math.random()*e(x).length)];return{type:t,key:r,voicing:g,inversion:a,description:`${r} II-V-I Progression${a>0?` (${a}st inversion)`:""} ${g}`}}default:throw new Error(`Unknown exercise type: ${t}`)}}function S(){f(n,P(),!0),f(N,Date.now(),!0),f(I,!1),k&&(clearInterval(k),k=null),f(w,0)}function R(){f(I,!0)}we(()=>{f(n,P(),!0)}),ke(()=>{k&&clearInterval(k)});var A=Je(),G=l(A),Z=l(G);{var ee=t=>{var r=Ye(),a=l(r),g=l(a,!0);s(a);var y=c(a,2),J=l(y,!0);s(y);var B=c(y,2);B.__click=()=>f(K,!0);var te=c(B,2);te.__click=S,s(r),E(()=>{T(g,e(n).type),T(J,e(n).description)}),h(t,r)};U(Z,t=>{e(n)&&t(ee)})}s(G);var z=c(G,2);Xe(z,{get showPopup(){return e(K)},get allowedNotes(){return e(_)},get allowedChordTypes(){return e(m)},get allowedInversions(){return e(b)},get allowedScaleModes(){return e(p)},get allowedVoicings(){return e(x)},get allowedExerciseTypes(){return e(V)},onClose:()=>f(K,!1),onUpdate:(t,r)=>{switch(t){case"allowedNotes":f(_,r,!0);break;case"allowedChordTypes":f(m,r,!0);break;case"allowedInversions":f(b,r.map(Number),!0);break;case"allowedScaleModes":f(p,r,!0);break;case"allowedVoicings":f(x,r,!0);break;case"allowedExerciseTypes":f(V,r,!0);break}}});var H=c(z,2);{var u=t=>{var r=Ze(),a=l(r),g=c(l(a),2),y=c(l(g)),J=l(y,!0);s(y),Ee(),s(g);var B=c(g,2);B.__click=S,s(a),s(r),E(()=>T(J,e(w))),h(t,r)};U(H,t=>{e(I)&&t(u)})}var i=c(H,2);{var d=t=>{var r=Q(),a=X(r);Re(a,()=>e(N),g=>{var y=Q(),J=X(y);{var B=D=>{{let ae=le(()=>e(n).chordType||"maj7"),re=le(()=>e(n).inversion||0),se=le(()=>e(n).voicing||"full-right");Ue(D,{randomMode:!0,onComplete:R,get chordType(){return e(ae)},get inversion(){return e(re)},get voicing(){return e(se)},get rootKey(){return e(n).key}})}},te=D=>{var ae=Q(),re=X(ae);{var se=O=>{Ke(O,{randomMode:!0,onComplete:R,get scaleMode(){return e(n).scaleMode},sequentialMode:Math.random()>.5,get rootKey(){return e(n).key}})},_e=O=>{var ie=Q(),fe=X(ie);{var me=oe=>{var ne=ze(),ce=X(ne);Pe(ce,{randomMode:!0,onComplete:R,get inversion(){return e(n).inversion},get voicing(){return e(n).voicing},get rootKey(){return e(n).key}});var de=c(ce,2),be=l(de);s(de),E(()=>T(be,`Random exercise type: ${e(n).type??""} (component not implemented)`)),h(oe,ne)};U(fe,oe=>{e(n).type==="II-V-I"&&oe(me)},!0)}h(O,ie)};U(re,O=>{e(n).type==="scale"?O(se):O(_e,!1)},!0)}h(D,ae)};U(J,D=>{e(n).type==="chord"?D(B):D(te,!1)})}h(g,y)}),h(t,r)},o=t=>{var r=He();h(t,r)};U(i,t=>{e(n)?t(d):t(o,!1)})}s(A),h(Y,A),ge()}pe(["click"]);export{da as component};
