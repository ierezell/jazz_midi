import{c as Z,a as h,f as M}from"../chunks/CX1yysGK.js";import{o as we,a as ke}from"../chunks/FttQe9ir.js";import{w as xe,ab as ye,bc as Me,z as Ce,p as ve,f as L,a as ge,c as l,s as c,j as e,r as s,t as E,J as C,K as j,d as Ie,M as f,P as Te,O as Ee,N as le}from"../chunks/Dpgs3mFS.js";import{d as pe,s as T}from"../chunks/dcQTQ1xv.js";import{B as Ne,i as K}from"../chunks/FFlPY-wq.js";import{a as Ve,b as Se,c as Ae,d as ue,e as he,f as je}from"../chunks/DgZpB3qr.js";import{e as q,i as z}from"../chunks/D0omyc6-.js";import{r as F,d as J}from"../chunks/gBQeIBP2.js";import{component as Ke}from"./4.jzwplMN3.js";import{component as Pe}from"./10.CNDu6dsa.js";import{component as Ue}from"./12.BeA5zHHc.js";function Re(W,v,n){xe&&ye();var V=new Ne(W),I=!Me();Ce(()=>{var w=v();I&&w!==null&&typeof w=="object"&&(w={}),V.ensure(w,n)})}const Ge=["chord","scale","II-V-I"];var Oe=M('<label class="checkbox-label svelte-pgit1g"><input type="checkbox"/> <span> </span></label>'),Be=M('<label class="checkbox-label svelte-pgit1g"><input type="checkbox"/> <span> </span></label>'),De=M('<label class="checkbox-label svelte-pgit1g"><input type="checkbox"/> <span> </span></label>'),qe=M('<label class="checkbox-label svelte-pgit1g"><input type="checkbox"/> <span> </span></label>'),ze=M('<label class="checkbox-label svelte-pgit1g"><input type="checkbox"/> <span> </span></label>'),Fe=M('<label class="checkbox-label svelte-pgit1g"><input type="checkbox"/> <span> </span></label>'),Je=M('<div class="popup-overlay svelte-pgit1g" role="dialog" aria-modal="true" aria-label="Configure exercises" tabindex="0"><div class="popup-content svelte-pgit1g"><button type="button" class="close-btn svelte-pgit1g" aria-label="Close">√ó</button> <h2 class="svelte-pgit1g">Exercise Configuration</h2> <div class="config-grid svelte-pgit1g"><div class="config-section svelte-pgit1g"><h3 class="svelte-pgit1g">Exercise Types</h3> <div class="checkbox-grid svelte-pgit1g"></div></div> <div class="config-section svelte-pgit1g"><h3 class="svelte-pgit1g">Notes</h3> <div class="checkbox-grid svelte-pgit1g"></div></div> <div class="config-section svelte-pgit1g"><h3 class="svelte-pgit1g">Chord Types</h3> <div class="checkbox-grid svelte-pgit1g"></div></div> <div class="config-section svelte-pgit1g"><h3 class="svelte-pgit1g">Inversions</h3> <div class="checkbox-grid svelte-pgit1g"></div></div> <div class="config-section svelte-pgit1g"><h3 class="svelte-pgit1g">Scale Modes</h3> <div class="checkbox-grid svelte-pgit1g"></div></div> <div class="config-section svelte-pgit1g"><h3 class="svelte-pgit1g">Voicings</h3> <div class="checkbox-grid svelte-pgit1g"></div></div></div></div></div>');function Le(W,v){ve(v,!0);function n(_,m,b){let p=[];switch(_){case"allowedExerciseTypes":p=[...v.allowedExerciseTypes];break;case"allowedNotes":p=[...v.allowedNotes];break;case"allowedChordTypes":p=[...v.allowedChordTypes];break;case"allowedInversions":p=[...v.allowedInversions];break;case"allowedScaleModes":p=[...v.allowedScaleModes];break;case"allowedVoicings":p=[...v.allowedVoicings];break}if(b)p.push(m);else if(p.length>1){const x=p.indexOf(m);x>-1&&p.splice(x,1)}v.onUpdate(_,p.sort())}function V(_){(_ instanceof MouseEvent&&_.target.classList.contains("popup-overlay")||_ instanceof KeyboardEvent&&_.key==="Escape")&&v.onClose()}var I=Z(),w=L(I);{var k=_=>{var m=Je();m.__click=u=>V(u),m.__keydown=u=>V(u);var b=l(m),p=l(b);p.__click=()=>v.onClose();var x=c(p,4),N=l(x),P=c(l(N),2);q(P,21,()=>Ge,z,(u,i)=>{var d=Oe(),o=l(d);F(o),o.__change=a=>n("allowedExerciseTypes",e(i),a.currentTarget.checked);var t=c(o,2),r=l(t,!0);s(t),s(d),E((a,g)=>{J(o,a),T(r,g)},[()=>v.allowedExerciseTypes.includes(e(i)),()=>e(i).charAt(0).toUpperCase()+e(i).slice(1)]),h(u,d)}),s(P),s(N);var U=c(N,2),$=c(l(U),2);q($,21,()=>Ve,z,(u,i)=>{var d=Be(),o=l(d);F(o),o.__change=a=>n("allowedNotes",e(i),a.currentTarget.checked);var t=c(o,2),r=l(t,!0);s(t),s(d),E(a=>{J(o,a),T(r,e(i))},[()=>v.allowedNotes.includes(e(i))]),h(u,d)}),s($),s(U);var S=c(U,2),R=c(l(S),2);q(R,21,()=>Se,z,(u,i)=>{var d=De(),o=l(d);F(o),o.__change=a=>n("allowedChordTypes",e(i),a.currentTarget.checked);var t=c(o,2),r=l(t,!0);s(t),s(d),E(a=>{J(o,a),T(r,e(i))},[()=>v.allowedChordTypes.includes(e(i))]),h(u,d)}),s(R),s(S);var A=c(S,2),G=c(l(A),2);q(G,21,()=>Ae,z,(u,i)=>{var d=qe(),o=l(d);F(o),o.__change=a=>n("allowedInversions",e(i).toString(),a.currentTarget.checked);var t=c(o,2),r=l(t,!0);s(t),s(d),E(a=>{J(o,a),T(r,e(i)===0?"Root":`${e(i)}${e(i)===1?"st":e(i)===2?"nd":"rd"}`)},[()=>v.allowedInversions.includes(e(i))]),h(u,d)}),s(G),s(A);var H=c(A,2),ee=c(l(H),2);q(ee,21,()=>ue,z,(u,i)=>{var d=ze(),o=l(d);F(o),o.__change=a=>n("allowedScaleModes",e(i),a.currentTarget.checked);var t=c(o,2),r=l(t,!0);s(t),s(d),E(a=>{J(o,a),T(r,e(i))},[()=>v.allowedScaleModes.includes(e(i))]),h(u,d)}),s(ee),s(H);var Q=c(H,2),X=c(l(Q),2);q(X,21,()=>he,z,(u,i)=>{var d=Fe(),o=l(d);F(o),o.__change=a=>n("allowedVoicings",e(i),a.currentTarget.checked);var t=c(o,2),r=l(t,!0);s(t),s(d),E((a,g)=>{J(o,a),T(r,g)},[()=>v.allowedVoicings.includes(e(i)),()=>e(i).charAt(0).toUpperCase()+e(i).slice(1)]),h(u,d)}),s(X),s(Q),s(x),s(b),s(m),h(_,m)};K(w,_=>{v.showPopup&&_(k)})}h(W,I),ge()}pe(["click","keydown","change"]);var We=M('<div class="exercise-info svelte-1cwrm9k"><span class="exercise-type svelte-1cwrm9k"> </span> <span class="exercise-description svelte-1cwrm9k"> </span> <button class="config-btn svelte-1cwrm9k" type="button">‚öôÔ∏è Config</button> <button class="new-exercise-btn svelte-1cwrm9k">üé≤ New</button></div>'),He=M('<div class="completion-overlay svelte-1cwrm9k"><div class="completion-message svelte-1cwrm9k"><h2 class="svelte-1cwrm9k">üéâ Exercise Completed!</h2> <p class="svelte-1cwrm9k">Great job! Next random exercise in <strong> </strong> seconds...</p> <button class="skip-btn svelte-1cwrm9k">Skip Wait</button></div></div>'),Qe=M("<!> <div> </div>",1),Xe=M('<div class="loading svelte-1cwrm9k">Generating random exercise...</div>'),Ye=M('<div class="random-exercise svelte-1cwrm9k"><div class="random-header svelte-1cwrm9k"><!></div> <!> <!> <!></div>');function ca(W,v){ve(v,!0);let n=C(j({type:"chord",key:"C",chordType:"maj7",voicing:"full-right",inversion:0,description:"Cmaj - Random Voicing"})),V=C(0),I=C(!1),w=C(0),k=null,_=C(j(["C","F","G"])),m=C(j(["maj7","min7","7","major","minor"])),b=C(j([0,1,2,3])),p=C(j(ue)),x=C(j(he)),N=C(j(["chord","II-V-I","scale"])),P=C(!1);Ie(()=>{e(I)&&e(n)&&(k&&clearInterval(k),f(w,3),k=setInterval(()=>{Te(w,-1),e(w)<=0&&(k&&clearInterval(k),S(),f(I,!1))},1e3))});function U(){const t=e(N)[Math.floor(Math.random()*e(N).length)],r=e(_)[Math.floor(Math.random()*e(_).length)];return $(t,r)}function $(t,r){switch(t){case"chord":{const a=e(m)[Math.floor(Math.random()*e(m).length)];let g=e(b)[Math.floor(Math.random()*e(b).length)],y=e(x)[Math.floor(Math.random()*e(x).length)];return je.includes(a)&&g>2&&(g=e(b)[Math.floor(Math.random()*(e(b).length-1))]),{type:t,key:r,chordType:a,voicing:y,inversion:g,description:`${r}${a}${g>0?` (${g}st inversion)`:""} - ${y}`}}case"scale":{const a=e(p)[Math.floor(Math.random()*e(p).length)];return{type:t,key:r,scaleMode:a,description:`${r} ${a}`}}case"II-V-I":{const a=e(b)[Math.floor(Math.random()*e(b).length)];let g=e(x)[Math.floor(Math.random()*e(x).length)];return{type:t,key:r,voicing:g,inversion:a,description:`${r} II-V-I Progression${a>0?` (${a}st inversion)`:""} ${g}`}}default:throw new Error(`Unknown exercise type: ${t}`)}}function S(){f(n,U(),!0),f(V,Date.now(),!0),f(I,!1),k&&(clearInterval(k),k=null),f(w,0)}function R(){f(I,!0)}we(()=>{f(n,U(),!0)}),ke(()=>{k&&clearInterval(k)});var A=Ye(),G=l(A),H=l(G);{var ee=t=>{var r=We(),a=l(r),g=l(a,!0);s(a);var y=c(a,2),Y=l(y,!0);s(y);var O=c(y,2);O.__click=()=>f(P,!0);var te=c(O,2);te.__click=S,s(r),E(()=>{T(g,e(n).type),T(Y,e(n).description)}),h(t,r)};K(H,t=>{e(n)&&t(ee)})}s(G);var Q=c(G,2);Le(Q,{get showPopup(){return e(P)},get allowedNotes(){return e(_)},get allowedChordTypes(){return e(m)},get allowedInversions(){return e(b)},get allowedScaleModes(){return e(p)},get allowedVoicings(){return e(x)},get allowedExerciseTypes(){return e(N)},onClose:()=>f(P,!1),onUpdate:(t,r)=>{switch(t){case"allowedNotes":f(_,r,!0);break;case"allowedChordTypes":f(m,r,!0);break;case"allowedInversions":f(b,r.map(Number),!0);break;case"allowedScaleModes":f(p,r,!0);break;case"allowedVoicings":f(x,r,!0);break;case"allowedExerciseTypes":f(N,r,!0);break}}});var X=c(Q,2);{var u=t=>{var r=He(),a=l(r),g=c(l(a),2),y=c(l(g)),Y=l(y,!0);s(y),Ee(),s(g);var O=c(g,2);O.__click=S,s(a),s(r),E(()=>T(Y,e(w))),h(t,r)};K(X,t=>{e(I)&&t(u)})}var i=c(X,2);{var d=t=>{var r=Z(),a=L(r);Re(a,()=>e(V),g=>{var y=Z(),Y=L(y);{var O=B=>{{let ae=le(()=>e(n).chordType||"maj7"),re=le(()=>e(n).inversion||0),se=le(()=>e(n).voicing||"full-right");Ke(B,{randomMode:!0,onComplete:R,get chordType(){return e(ae)},get inversion(){return e(re)},get voicing(){return e(se)},get rootKey(){return e(n).key}})}},te=B=>{var ae=Z(),re=L(ae);{var se=D=>{Pe(D,{randomMode:!0,onComplete:R,get scaleMode(){return e(n).scaleMode},sequentialMode:Math.random()>.5,get rootKey(){return e(n).key}})},_e=D=>{var ie=Z(),fe=L(ie);{var me=oe=>{var ne=Qe(),ce=L(ne);Ue(ce,{randomMode:!0,onComplete:R,get inversion(){return e(n).inversion},get voicing(){return e(n).voicing},get rootKey(){return e(n).key}});var de=c(ce,2),be=l(de);s(de),E(()=>T(be,`Random exercise type: ${e(n).type??""} (component not implemented)`)),h(oe,ne)};K(fe,oe=>{e(n).type==="II-V-I"&&oe(me)},!0)}h(D,ie)};K(re,D=>{e(n).type==="scale"?D(se):D(_e,!1)},!0)}h(B,ae)};K(Y,B=>{e(n).type==="chord"?B(O):B(te,!1)})}h(g,y)}),h(t,r)},o=t=>{var r=Xe();h(t,r)};K(i,t=>{e(n)?t(d):t(o,!1)})}s(A),h(W,A),ge()}pe(["click"]);export{ca as component};
