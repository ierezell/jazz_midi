import"../chunks/NZTpNUN0.js";import{p as se,aq as y,R as V,g as de,k as e,c as ce,aU as ve,au as ue,f as q,a as W,s as r,d as p,r as l,b as j,av as fe,t as w,S as H}from"../chunks/CopMHf-A.js";import{d as he,s as X}from"../chunks/BtHBiExd.js";import{i as Y}from"../chunks/BZTAz8MF.js";import{b as Z,N as _e,e as ge,i as pe,A as me}from"../chunks/CJpwhoEZ.js";import{i as B,f as G}from"../chunks/D6jhRq7z.js";import{B as Ce,g as Me,c as be}from"../chunks/CPdQYdRh.js";function xe(s,o){const i=s.target;H(o,i.value,!0)}function ye(s,o){const i=s.target;H(o,parseInt(i.value),!0)}function je(s,o){const i=s.target;H(o,i.value,!0)}var He=q("<option> </option>"),ke=q('<div class="control-group svelte-t0jkd5"><label for="chord-type" class="svelte-t0jkd5">Chord Type:</label> <select id="chord-type"></select></div> <div class="control-group svelte-t0jkd5"><label for="inversion" class="svelte-t0jkd5">Inversion:</label> <select id="inversion"><option>Root</option><option>1st</option><option>2nd</option><option>3rd</option></select></div> <div class="control-group svelte-t0jkd5"><label for="voicing" class="svelte-t0jkd5">Voicing:</label> <select id="voicing"><option>Full</option><option>Left Hand</option><option>Right Hand</option><option>Split</option></select></div>',1),Te=q('<!> <div class="controls svelte-t0jkd5"><!></div>',1);function Pe(s,o){se(o,!0);let i=["maj7","min7","7","dom7","half-dim7","dim7"],$=o.randomMode?i[Math.floor(Math.random()*i.length)]:"maj7",d=y(V($)),c=y(V(o.randomMode?Math.floor(Math.random()*4):0)),v=y(V(o.randomMode?Z[Math.floor(Math.random()*Z.length)]:"full")),k=y(!1);de(()=>{e(k)&&o.onComplete&&o.onComplete()});function ee(n){const a=n+"4",u=_e[a],t=be(u,e(d),e(c)),M=[t.root,t.third,t.fifth,t.seventh].filter(m=>m!==void 0);switch(e(v)){case"full":return M;case"left-hand":return[t.root,t.seventh].filter(C=>C!==void 0);case"right-hand":return[t.third,t.fifth];case"split":const m=[t.root-12,(t.seventh||t.root)-12].filter(C=>C>=24),T=[t.third,t.fifth];return[...m,...T];default:return M}}function te(n,a,u){return u.includes(a.noteNumber)?{isCorrect:!0,message:"Correct chord tone!"}:{isCorrect:!1,message:"Not a chord tone. Try again!"}}function oe(n){try{const a=Me(n,e(d),e(c),e(v));return console.debug("Generated score data:",{selectedNote:n,chordType:e(d),voicing:e(v),inversion:e(c),scoreData:a}),{leftHand:a.leftHand,rightHand:a.rightHand,selectedNote:n}}catch(a){return console.error("Error generating score data:",a),{selectedNote:"C",leftHand:[[]],rightHand:[["C4","E4","G4"]]}}}function ae(n,a){return n.length===a.length&&n.every(u=>a.includes(u))}{const n=(u,t=ve)=>{var M=Te(),m=W(M);{var T=f=>{var b=fe();w(()=>X(b,H(k,t().completed,!0))),j(f,b)};Y(m,f=>{t().completed!==e(k)&&f(T)})}var C=r(m,2),re=p(C);{var ne=f=>{var b=ke(),N=W(b),h=r(p(N),2);h.__change=[xe,d],ge(h,21,()=>me,pe,(ie,S)=>{var x=He(),le=p(x,!0);l(x);var Q={};w(()=>{X(le,e(S)),Q!==(Q=e(S))&&(x.value=(x.__value=e(S))??"")}),j(ie,x)}),l(h);var F;B(h),l(N);var E=r(N,2),_=r(p(E),2);_.__change=[ye,c];var z=p(_);z.value=z.__value=0;var R=r(z);R.value=R.__value=1;var A=r(R);A.value=A.__value=2;var J=r(A);J.value=J.__value=3,l(_);var L;B(_),l(E);var U=r(E,2),g=r(p(U),2);g.__change=[je,v];var D=p(g);D.value=D.__value="full";var I=r(D);I.value=I.__value="left-hand";var P=r(I);P.value=P.__value="right-hand";var K=r(P);K.value=K.__value="split",l(g);var O;B(g),l(U),w(()=>{F!==(F=e(d))&&(h.value=(h.__value=e(d))??"",G(h,e(d))),L!==(L=e(c))&&(_.value=(_.__value=e(c))??"",G(_,e(c))),O!==(O=e(v))&&(g.value=(g.__value=e(v))??"",G(g,e(v)))}),j(f,b)};Y(re,f=>{o.randomMode||f(ne)})}l(C),j(u,M)};let a=ue(()=>o.randomMode?"Random Chord":"Jazz Chord Practice");Ce(s,{get exerciseTitle(){return e(a)},exerciseDescription:"Practice playing jazz chords with different voicings and inversions",get randomMode(){return o.randomMode},generateExpectedNotes:ee,generateScoreProps:oe,validateNoteEvent:te,isCompleted:ae,children:n,$$slots:{default:!0}})}ce()}he(["change"]);export{Pe as component};
