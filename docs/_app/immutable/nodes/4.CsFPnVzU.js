import"../chunks/CWj6FrbW.js";import{d as mt,o as kt,s as L}from"../chunks/C9uxT11M.js";import{p as yt,o as E,q as Nt,f as b,s as l,d as n,t as T,k as e,b as u,c as Mt,v as h,r as a,w as _,x as $t,a as W,y as Re,z as xt,A as Ae}from"../chunks/D5zBHTIm.js";import{i as k}from"../chunks/yfkNQNHN.js";import{e as He,R as It,i as Se,A as Ct,a as Rt,g as At,c as Ht,N as Pe,M as X}from"../chunks/CXyIVaVK.js";import{b as ae,e as St,o as Pt,D as wt,S as Lt,I as Fe,c as Tt,s as Dt,a as Et}from"../chunks/Ckcloi-B.js";var Kt=b('<button class="debug-toggle svelte-13l548b">ðŸŽ¹ Enable Computer Keyboard</button> <p class="keyboard-hint svelte-13l548b">Connect a MIDI keyboard or enable computer keyboard to play</p>',1),Bt=b('<div class="keyboard-instructions svelte-13l548b"><p class="svelte-13l548b"><strong>ðŸŽ¹ Computer Keyboard Controls Active!</strong></p> <p class="svelte-13l548b">Use your computer keyboard to play: <kbd class="svelte-13l548b">Z</kbd><kbd class="svelte-13l548b">X</kbd><kbd class="svelte-13l548b">C</kbd><kbd class="svelte-13l548b">V</kbd><kbd class="svelte-13l548b">B</kbd><kbd class="svelte-13l548b">N</kbd><kbd class="svelte-13l548b">M</kbd> for white keys</p> <p class="svelte-13l548b"><kbd class="svelte-13l548b">S</kbd><kbd class="svelte-13l548b">D</kbd><kbd class="svelte-13l548b">G</kbd><kbd class="svelte-13l548b">H</kbd><kbd class="svelte-13l548b">J</kbd> for black keys â€¢ <kbd class="svelte-13l548b">Q</kbd><kbd class="svelte-13l548b">W</kbd><kbd class="svelte-13l548b">E</kbd><kbd class="svelte-13l548b">R</kbd><kbd class="svelte-13l548b">T</kbd> for higher octave</p></div>'),Vt=b("<option> </option>"),Ft=b("<option> </option>"),jt=b("<option>3rd Inversion</option>"),qt=b('<span class="inversion-indicator svelte-13l548b"> </span>'),Gt=b("<strong>Left Hand:</strong> ",1),zt=b("<strong>Right Hand:</strong> 3rd + 5th",1),Jt=b("<strong>Left:</strong> 1-7 (lower) | <strong>Right:</strong> 3-5 (higher)",1),Ot=b('<span class="note-name svelte-13l548b"> </span>'),Qt=b('<div class="hint-container note-names-hint svelte-13l548b"><h3 class="svelte-13l548b">ðŸ’¡ Hint: Note Names</h3> <div class="note-names svelte-13l548b"></div></div>'),Ut=b('<div class="hint-container keyboard-hint svelte-13l548b"><h3 class="svelte-13l548b">ðŸ’¡ Hint: Keyboard Reference</h3> <!></div>'),Wt=b('<p class="error-count svelte-13l548b"> </p>'),Xt=b('<div><p class="feedback-message svelte-13l548b"> </p> <!></div>'),Yt=b('<div class="exercise-container svelte-13l548b"><div class="chord-display svelte-13l548b"><h2 class="chord-name svelte-13l548b"> <!></h2> <p class="voicing-info svelte-13l548b"><!></p></div> <div class="score-container svelte-13l548b"><h3 class="svelte-13l548b">Musical Score</h3> <!></div> <!> <!> <div class="input-container svelte-13l548b"><h3 class="svelte-13l548b">Your Input</h3> <!></div> <!></div>'),Zt=b('<div class="placeholder-container svelte-13l548b"><p class="svelte-13l548b">Please select a root note and chord type to begin practicing.</p></div>'),es=b('<main class="svelte-13l548b"><!> <div class="page-header svelte-13l548b"><h1 class="svelte-13l548b">Chord Practice</h1> <p class="subtitle svelte-13l548b"> </p> <!></div> <div class="controls-container svelte-13l548b"><div class="control-group svelte-13l548b"><label for="note-select" class="svelte-13l548b">Root Note:</label> <select id="note-select" class="svelte-13l548b"><option>--Choose a Note--</option><!></select></div> <div class="control-group svelte-13l548b"><label for="chord-select" class="svelte-13l548b">Chord Type:</label> <select id="chord-select" class="svelte-13l548b"><option>--Choose a Chord Type--</option><!></select></div> <div class="control-group svelte-13l548b"><label for="inversion-select" class="svelte-13l548b">Inversion:</label> <select id="inversion-select" class="svelte-13l548b"><option>Root Position</option><option>1st Inversion</option><option>2nd Inversion</option><!></select></div> <div class="control-group svelte-13l548b"><label for="voicing-select" class="svelte-13l548b">Voicing:</label> <select id="voicing-select" class="svelte-13l548b"><option>Full Chord</option><option>Left Hand (1-7)</option><option>Right Hand (3-5)</option><option>Split Hands (1-7 Left, 3-5 Right)</option></select></div> <button class="reset-btn svelte-13l548b">Reset Exercise</button></div> <!></main>');function ns(je,qe){yt(qe,!0);let F=E(Nt([])),Ge=_(()=>e(F).map(t=>t.noteNumber)),ne,R=E("C"),A=E("maj7"),H=E(0),f=E("full"),S=E(!1),K=E(void 0),Y=null,ie=_(()=>e(R)+"4"),o=_(()=>Ht(Pe[e(ie)],e(A),e(H))),ze=_(()=>()=>{const t=[e(o).root,e(o).third,e(o).fifth,e(o).seventh].filter(s=>s!=null&&s!=null);switch(e(f)){case"full":return t;case"left-hand":return[e(o).root,e(o).seventh].filter(i=>i!=null);case"right-hand":return[e(o).third,e(o).fifth].filter(i=>i!=null);case"split":const s=[e(o).root-12,(e(o).seventh||e(o).root)-12].filter(i=>i>=24),r=[e(o).third,e(o).fifth].filter(i=>i!=null);return[...s,...r];default:return t}}),P=_(()=>e(ze)()),z=_(()=>e(P).map(t=>X[t].slice(0,-1)+"4")),Je=_(()=>e(f)==="right-hand"?[]:e(f)==="split"?[[e(o).root-12,(e(o).seventh||e(o).root)-12].filter(s=>s>=24).map(s=>X[s])]:e(f)==="left-hand"?[e(z).map(t=>t.replace("4","3"))]:[e(z).map(t=>t.replace("4","3"))]),Oe=_(()=>e(f)==="left-hand"?[]:e(f)==="split"?[[e(o).third,e(o).fifth].filter(s=>s!=null).map(s=>X[s])]:e(f)==="right-hand"?[e(z).map(t=>t)]:[e(z).map(t=>t)]),g=[],y=E(""),$=E(0),Qe=_(()=>e($)>=3),Ue=_(()=>e($)>=6),J=null,x=null;function we(){if(h(S,!e(S)),e(S)&&!e(K)){const t=Tt("Virtual Debug Keyboard");h(K,t.getVirtualInput(),!0),Y=Dt(e(K));const s=Array.from(t.inputs.values())[0];s&&(s.onmidimessage=Le)}else!e(S)&&Y&&(Y(),Y=null,e(K)&&e(K).releaseAllKeys())}function Le(t){const s=At(t);if(s)if(s.type==="on"){h(F,[s,...e(F)],!0),g.push(s.noteNumber),g=[...new Set(g)];const r=g.filter(N=>N<60),i=g.filter(N=>N>=60);let v=!1,w="";switch(e(f)){case"full":if(v=g.every(p=>e(P).includes(p)),v&&g.length===e(P).length){h(y,We(),!0),h($,0),x&&x.play(),g=[];return}else v&&(w=`Great! ${e(P).length-g.length} more note${e(P).length-g.length>1?"s":""} to go`);break;case"left-hand":const N=e(P).filter(p=>p<60);if(v=r.every(p=>N.includes(p))&&i.length===0,v&&r.length===N.length){h(y,`Excellent left hand voicing! ðŸŽ¹ (1-7: ${Z(r)})`),h($,0),x&&x.play(),g=[];return}else v&&(w=`Left hand: ${r.length}/${N.length} notes correct`);break;case"right-hand":const j=e(P).filter(p=>p>=60);if(v=i.every(p=>j.includes(p))&&r.length===0,v&&i.length===j.length){h(y,`Perfect right hand voicing! ðŸŽ¹ (3-5: ${Z(i)})`),h($,0),x&&x.play(),g=[];return}else v&&(w=`Right hand: ${i.length}/${j.length} notes correct`);break;case"split":const Q=e(P).filter(p=>p<60),U=e(P).filter(p=>p>=60),re=r.every(p=>Q.includes(p)),q=i.every(p=>U.includes(p));if(v=re&&q,v&&r.length===Q.length&&i.length===U.length){h(y,`Outstanding split voicing! ðŸŽ¹ðŸŽµ Left: ${Z(r)} | Right: ${Z(i)}`),h($,0),x&&x.play(),g=[];return}else(re||q)&&(w=`Left: ${r.length}/${Q.length}, Right: ${i.length}/${U.length}`);break}v&&w?h(y,w,!0):($t($),h(y,Xe(),!0),J&&J.play(),g=[])}else h(F,e(F).filter(r=>r.noteFullName!==s.noteFullName),!0)}function We(){return`Bravo! Perfect ${["Root Position","1st Inversion","2nd Inversion","3rd Inversion"][e(H)]} ${e(R)}${e(A)}! ðŸŽ‰`}function Z(t){const s=new Map([[e(o).root,"1"],[e(o).third,"3"],[e(o).fifth,"5"],[e(o).seventh,"7"]]);return t.map(r=>s.get(r)||s.get(r+12)||s.get(r-12)||"?").join("-")}function Xe(){return`${{full:`Incorrect chord. Try the ${e(H)>0?Te()+" ":""}${e(R)}${e(A)}!`,"left-hand":`Left hand only! Play 1-7 (${e(R)}-${De()}) in your left hand.`,"right-hand":"Right hand only! Play 3-5 in your right hand.",split:"Split hands! Left: 1-7 (lower), Right: 3-5 (higher)."}[e(f)]} (Attempt ${e($)})`}function Te(){return["root position","1st inversion","2nd inversion","3rd inversion"][e(H)]}function De(){return e(o).seventh?X[e(o).seventh].slice(0,-1):""}function O(){h($,0),g=[],h(y,""),h(F,[],!0)}kt(async()=>{J=new Audio(St),J.volume=.5,J.loop=!1,x=new Audio(Pt),x.volume=.5,x.loop=!1;try{ne=await It(),console.log("Scale MIDI Access obtained:",ne),ne.inputs.forEach(s=>{s.onmidimessage=Le})}catch(t){console.error("Failed to obtain MIDI Access:",t)}});var ve=es(),Ee=n(ve);{var Ye=t=>{wt(t,{get virtualMidi(){return e(K)},get debugMode(){return e(S)},onToggleDebugMode:we})};k(Ee,t=>{e(S)&&t(Ye)})}var ce=l(Ee,2),de=l(n(ce),2),Ze=n(de);a(de);var et=l(de,2);{var tt=t=>{var s=Kt(),r=W(s);r.__click=we,Re(2),u(t,s)},st=t=>{var s=Bt();u(t,s)};k(et,t=>{e(S)?t(st,!1):t(tt)})}a(ce);var ue=l(ce,2),he=n(ue),ee=l(n(he),2);ee.__change=O;var pe=n(ee);pe.value=pe.__value="";var lt=l(pe);He(lt,17,()=>Ct,Se,(t,s)=>{var r=Vt(),i=n(r,!0);a(r);var v={};T(()=>{L(i,e(s)),v!==(v=e(s))&&(r.value=(r.__value=e(s))??"")}),u(t,r)}),a(ee),a(he);var fe=l(he,2),te=l(n(fe),2);te.__change=O;var be=n(te);be.value=be.__value="";var rt=l(be);He(rt,17,()=>Rt,Se,(t,s,r,i)=>{var v=Ft(),w=n(v,!0);a(v);var N={};T(()=>{L(w,e(s)),N!==(N=e(s))&&(v.value=(v.__value=e(s))??"")}),u(t,v)}),a(te),a(fe);var ge=l(fe,2),se=l(n(ge),2);se.__change=O;var _e=n(se);_e.value=_e.__value=0;var me=l(_e);me.value=me.__value=1;var ke=l(me);ke.value=ke.__value=2;var ot=l(ke);{var at=t=>{var s=jt();s.value=s.__value=3,u(t,s)};k(ot,t=>{(e(A)==="maj7"||e(A)==="min7"||e(A)==="7")&&t(at)})}a(se),a(ge);var ye=l(ge,2),le=l(n(ye),2);le.__change=O;var Ne=n(le);Ne.value=Ne.__value="full";var Me=l(Ne);Me.value=Me.__value="left-hand";var $e=l(Me);$e.value=$e.__value="right-hand";var Ke=l($e);Ke.value=Ke.__value="split",a(le),a(ye);var nt=l(ye,2);nt.__click=O,a(ue);var it=l(ue,2);{var vt=t=>{var s=Yt(),r=n(s),i=n(r),v=n(i),w=l(v);{var N=c=>{var d=qt(),m=n(d);a(d),T(I=>L(m,`/${I??""}`),[()=>X[e(H)===1?e(o).third:e(H)===2?e(o).fifth:e(o).seventh||e(o).root].slice(0,-1)]),u(c,d)};k(w,c=>{e(H)>0&&c(N)})}a(i);var j=l(i,2),Q=n(j);{var U=c=>{var d=xt();T(m=>L(d,`Play all chord notes (${m??""})`),[()=>e(H)===0?"Root Position":Te()]),u(c,d)},re=c=>{var d=Ae(),m=W(d);{var I=M=>{var D=Gt(),C=l(W(D));T(V=>L(C,` Root + 7th (${e(R)??""} + ${V??""})`),[De]),u(M,D)},B=M=>{var D=Ae(),C=W(D);{var V=G=>{var oe=zt();Re(),u(G,oe)},Ie=G=>{var oe=Ae(),bt=W(oe);{var gt=Ce=>{var _t=Jt();Re(3),u(Ce,_t)};k(bt,Ce=>{e(f)==="split"&&Ce(gt)},!0)}u(G,oe)};k(C,G=>{e(f)==="right-hand"?G(V):G(Ie,!1)},!0)}u(M,D)};k(m,M=>{e(f)==="left-hand"?M(I):M(B,!1)},!0)}u(c,d)};k(Q,c=>{e(f)==="full"?c(U):c(re,!1)})}a(j),a(r);var q=l(r,2),p=l(n(q),2);Lt(p,{get selectedNote(){return e(R)},get leftHand(){return e(Je)},get rightHand(){return e(Oe)}}),a(q);var Be=l(q,2);{var dt=c=>{var d=Qt(),m=l(n(d),2);He(m,21,()=>e(z),Se,(I,B)=>{var M=Ot(),D=n(M,!0);a(M),T(C=>L(D,C),[()=>e(B).slice(0,-1)]),u(I,M)}),a(m),a(d),u(c,d)};k(Be,c=>{e(Qe)&&c(dt)})}var Ve=l(Be,2);{var ut=c=>{var d=Ut(),m=l(n(d),2);{let I=_(()=>Pe[e(ie)]+11),B=_(()=>e(f)==="split"?3:2);Fe(m,{get midiNotes(){return e(P)},get middleC(){return e(I)},get octaves(){return e(B)},get virtualMidi(){return e(K)},get debugMode(){return e(S)}})}a(d),u(c,d)};k(Ve,c=>{e(Ue)&&c(ut)})}var xe=l(Ve,2),ht=l(n(xe),2);{let c=_(()=>Pe[e(ie)]+11),d=_(()=>e(f)==="split"?3:2);Fe(ht,{get midiNotes(){return e(Ge)},get middleC(){return e(c)},get octaves(){return e(d)},get virtualMidi(){return e(K)},get debugMode(){return e(S)}})}a(xe);var pt=l(xe,2);{var ft=c=>{var d=Xt();let m;var I=n(d),B=n(I,!0);a(I);var M=l(I,2);{var D=C=>{var V=Wt(),Ie=n(V);a(V),T(()=>L(Ie,`Mistakes: ${e($)??""}/6 (hints unlock at 3 and 6 mistakes)`)),u(C,V)};k(M,C=>{e($)>0&&!e(y).includes("Bravo")&&C(D)})}a(d),T(C=>{m=Et(d,1,"feedback-container svelte-13l548b",null,m,C),L(B,e(y))},[()=>({success:e(y).includes("Bravo"),error:e(y).includes("Incorrect")})]),u(c,d)};k(pt,c=>{e(y)&&c(ft)})}a(s),T(()=>L(v,`${e(R)??""}${e(A)??""} `)),u(t,s)},ct=t=>{var s=Zt();u(t,s)};k(it,t=>{e(R)&&e(A)?t(vt):t(ct,!1)})}a(ve),T(()=>L(Ze,`Play the correct chord on your MIDI keyboard${e(S)?" or use computer keyboard controls":""}`)),ae(ee,()=>e(R),t=>h(R,t)),ae(te,()=>e(A),t=>h(A,t)),ae(se,()=>e(H),t=>h(H,t)),ae(le,()=>e(f),t=>h(f,t)),u(je,ve),Mt()}mt(["click","change"]);export{ns as component};
