import"../chunks/NZTpNUN0.js";import{d as ne,s as V,o as we,a as ke}from"../chunks/BJdPA1W9.js";import{w as le,A as Me,q as Ce,at as Ie,au as Te,z as Ee,G as Ne,I as Se,v as Ae,J as Ue,M as Ve,U as Pe,L as Re,p as ce,ar as Y,a as $,b,c as ie,f as S,d as o,s as c,r as s,t as j,k as e,ap as N,R as q,g as qe,S as m,av as De,ao as je}from"../chunks/wFTEGHnI.js";import{i as D}from"../chunks/DB4UBEnh.js";import{component as Ge}from"./4.CzqMSE5Y.js";import{component as Le}from"./7.BHxKHlL2.js";import{component as Ke}from"./8.C-2BdeyF.js";import{e as B,i as H,A as de,a as ve,b as Oe,c as ue,d as ze,f as Fe}from"../chunks/M4Hk-hxN.js";import{r as Q,d as X}from"../chunks/BBAnfavV.js";function Je(u,a,t){le&&Me();var A=u,C=Pe,T,w,d=null,p=Ce()?Ie:Te;function g(){T&&Re(T),d!==null&&(d.lastChild.remove(),A.before(d),d=null),T=w}Ee(()=>{if(p(C,C=a())){var v=A,y=Ue();y&&(d=document.createDocumentFragment(),d.append(v=Ne())),w=Se(()=>t(v)),y?Ae.add_callback(g):g()}}),le&&(A=Ve)}const fe=["chord","scale","II-V-I"];var We=(u,a)=>a(u),Ze=(u,a)=>a(u),Be=(u,a)=>a.onClose(),He=(u,a,t)=>a("allowedExerciseTypes",e(t),u.currentTarget.checked),Qe=S('<label class="checkbox-label svelte-1giufxc"><input type="checkbox"/> <span> </span></label>'),Xe=(u,a,t)=>a("allowedNotes",e(t),u.currentTarget.checked),Ye=S('<label class="checkbox-label svelte-1giufxc"><input type="checkbox"/> <span> </span></label>'),$e=(u,a,t)=>a("allowedChordTypes",e(t),u.currentTarget.checked),ea=S('<label class="checkbox-label svelte-1giufxc"><input type="checkbox"/> <span> </span></label>'),aa=(u,a,t)=>a("allowedInversions",e(t).toString(),u.currentTarget.checked),sa=S('<label class="checkbox-label svelte-1giufxc"><input type="checkbox"/> <span> </span></label>'),ta=(u,a,t)=>a("allowedScaleModes",e(t),u.currentTarget.checked),oa=S('<label class="checkbox-label svelte-1giufxc"><input type="checkbox"/> <span> </span></label>'),ra=S('<div class="popup-overlay svelte-1giufxc" role="dialog" aria-modal="true" aria-label="Configure exercises" tabindex="0"><div class="popup-content svelte-1giufxc"><button type="button" class="close-btn svelte-1giufxc" aria-label="Close">×</button> <h2 class="svelte-1giufxc">Exercise Configuration</h2> <div class="config-grid svelte-1giufxc"><div class="config-section svelte-1giufxc"><h3 class="svelte-1giufxc">Exercise Types</h3> <div class="checkbox-grid svelte-1giufxc"></div></div> <div class="config-section svelte-1giufxc"><h3 class="svelte-1giufxc">Notes</h3> <div class="checkbox-grid svelte-1giufxc"></div></div> <div class="config-section svelte-1giufxc"><h3 class="svelte-1giufxc">Chord Types</h3> <div class="checkbox-grid svelte-1giufxc"></div></div> <div class="config-section svelte-1giufxc"><h3 class="svelte-1giufxc">Inversions</h3> <div class="checkbox-grid svelte-1giufxc"></div></div> <div class="config-section svelte-1giufxc"><h3 class="svelte-1giufxc">Scale Modes</h3> <div class="checkbox-grid svelte-1giufxc"></div></div></div></div></div>');function la(u,a){ce(a,!0);function t(d,p,g){let v=[];switch(d){case"allowedExerciseTypes":v=[...a.allowedExerciseTypes];break;case"allowedNotes":v=[...a.allowedNotes];break;case"allowedChordTypes":v=[...a.allowedChordTypes];break;case"allowedInversions":v=[...a.allowedInversions];break;case"allowedScaleModes":v=[...a.allowedScaleModes];break}if(g)v.push(p);else if(v.length>1){const y=v.indexOf(p);y>-1&&v.splice(y,1)}a.onUpdate(d,v.sort())}function A(d){(d instanceof MouseEvent&&d.target.classList.contains("popup-overlay")||d instanceof KeyboardEvent&&d.key==="Escape")&&a.onClose()}var C=Y(),T=$(C);{var w=d=>{var p=ra();p.__click=[We,A],p.__keydown=[Ze,A];var g=o(p),v=o(g);v.__click=[Be,a];var y=c(v,4),U=o(y),G=c(o(U),2);B(G,21,()=>fe,H,(k,n)=>{var f=Qe(),l=o(f);Q(l),l.__change=[He,t,n];var _=c(l,2),M=o(_,!0);s(_),s(f),j((I,ae)=>{X(l,I),V(M,ae)},[()=>a.allowedExerciseTypes.includes(e(n)),()=>e(n).charAt(0).toUpperCase()+e(n).slice(1)]),b(k,f)}),s(G),s(U);var L=c(U,2),ee=c(o(L),2);B(ee,21,()=>de,H,(k,n)=>{var f=Ye(),l=o(f);Q(l),l.__change=[Xe,t,n];var _=c(l,2),M=o(_,!0);s(_),s(f),j(I=>{X(l,I),V(M,e(n))},[()=>a.allowedNotes.includes(e(n))]),b(k,f)}),s(ee),s(L);var P=c(L,2),K=c(o(P),2);B(K,21,()=>ve,H,(k,n)=>{var f=ea(),l=o(f);Q(l),l.__change=[$e,t,n];var _=c(l,2),M=o(_,!0);s(_),s(f),j(I=>{X(l,I),V(M,e(n))},[()=>a.allowedChordTypes.includes(e(n))]),b(k,f)}),s(K),s(P);var R=c(P,2),O=c(o(R),2);B(O,21,()=>Oe,H,(k,n)=>{var f=sa(),l=o(f);Q(l),l.__change=[aa,t,n];var _=c(l,2),M=o(_,!0);s(_),s(f),j(I=>{X(l,I),V(M,e(n)===0?"Root":`${e(n)}${e(n)===1?"st":e(n)===2?"nd":"rd"}`)},[()=>a.allowedInversions.includes(e(n))]),b(k,f)}),s(O),s(R);var z=c(R,2),W=c(o(z),2);B(W,21,()=>ue,H,(k,n)=>{var f=oa(),l=o(f);Q(l),l.__change=[ta,t,n];var _=c(l,2),M=o(_,!0);s(_),s(f),j(I=>{X(l,I),V(M,e(n))},[()=>a.allowedScaleModes.includes(e(n))]),b(k,f)}),s(W),s(z),s(y),s(g),s(p),b(d,p)};D(T,d=>{a.showPopup&&d(w)})}b(u,C),ie()}ne(["click","keydown","change"]);var na=(u,a)=>m(a,!0),ca=S('<div class="exercise-info svelte-od0y26"><span class="exercise-type svelte-od0y26"> </span> <span class="exercise-description svelte-od0y26"> </span></div>'),ia=S('<div class="completion-overlay svelte-od0y26"><div class="completion-message svelte-od0y26"><h2 class="svelte-od0y26">🎉 Exercise Completed!</h2> <p class="svelte-od0y26">Great job! Next random exercise in <strong> </strong> seconds...</p> <button class="skip-btn svelte-od0y26">Skip Wait</button></div></div>'),da=S('<div class="loading svelte-od0y26">Generating random exercise...</div>'),va=S('<div class="random-exercise svelte-od0y26"><div class="random-header svelte-od0y26"><div class="header-content svelte-od0y26"><h1 class="svelte-od0y26">Random Exercise</h1> <div class="header-buttons svelte-od0y26"><button class="config-btn svelte-od0y26" type="button">⚙️ Config</button> <button class="new-exercise-btn svelte-od0y26">🎲 New</button></div></div> <!></div> <!> <!> <!></div>');function ya(u,a){ce(a,!0);let t=N(q({type:"chord",key:"C",chordType:"maj7",voicing:"full",inversion:0,description:"Cmaj - Random Voicing"})),A=N(0),C=N(!1),T=N(0),w=null,d=N(q(de)),p=N(q(ve)),g=N(q([0,1,2,3])),v=N(q(ue)),y=q(ze),U=N(q(fe)),G=N(!1);qe(()=>{e(C)&&e(t)&&(w&&clearInterval(w),m(T,3),w=setInterval(()=>{De(T,-1),e(T)<=0&&(w&&clearInterval(w),P(),m(C,!1))},1e3))});function L(){const i=e(U)[Math.floor(Math.random()*e(U).length)],r=e(d)[Math.floor(Math.random()*e(d).length)];return ee(i,r)}function ee(i,r){switch(i){case"chord":{const h=e(p)[Math.floor(Math.random()*e(p).length)];let x=e(g)[Math.floor(Math.random()*e(g).length)],E=y[Math.floor(Math.random()*y.length)];return Fe.includes(h)&&x>2&&(x=e(g)[Math.floor(Math.random()*(e(g).length-1))]),{type:i,key:r,chordType:h,voicing:E,inversion:x,description:`${r}${h}${x>0?` (${x}st inversion)`:""} - `}}case"scale":{const h=e(v)[Math.floor(Math.random()*e(v).length)];return{type:i,key:r,description:`${r} ${h}`}}case"II-V-I":{const h=e(g)[Math.floor(Math.random()*e(g).length)];let x=y[Math.floor(Math.random()*y.length)];return{type:i,key:r,voicing:x,inversion:h,description:`${r} II-V-I Progression${h>0?` (${h}st inversion)`:""}`}}default:throw new Error(`Unknown exercise type: ${i}`)}}function P(){m(t,L(),!0),m(A,Date.now(),!0),m(C,!1)}function K(){m(C,!0)}we(()=>{m(t,L(),!0)}),ke(()=>{w&&clearInterval(w)});var R=va(),O=o(R),z=o(O),W=c(o(z),2),k=o(W);k.__click=[na,G];var n=c(k,2);n.__click=P,s(W),s(z);var f=c(z,2);{var l=i=>{var r=ca(),h=o(r),x=o(h,!0);s(h);var E=c(h,2),Z=o(E,!0);s(E),s(r),j(()=>{V(x,e(t).type),V(Z,e(t).description)}),b(i,r)};D(f,i=>{e(t)&&i(l)})}s(O);var _=c(O,2);la(_,{get showPopup(){return e(G)},get allowedNotes(){return e(d)},get allowedChordTypes(){return e(p)},get allowedInversions(){return e(g)},get allowedScaleModes(){return e(v)},get allowedExerciseTypes(){return e(U)},onClose:()=>m(G,!1),onUpdate:(i,r)=>{switch(i){case"allowedNotes":m(d,r,!0);break;case"allowedChordTypes":m(p,r,!0);break;case"allowedInversions":m(g,r.map(Number),!0);break;case"allowedScaleModes":m(v,r,!0);break;case"allowedExerciseTypes":m(U,r,!0);break}}});var M=c(_,2);{var I=i=>{var r=ia(),h=o(r),x=c(o(h),2),E=c(o(x)),Z=o(E,!0);s(E),je(),s(x);var se=c(x,2);se.__click=P,s(h),s(r),j(()=>V(Z,e(T))),b(i,r)};D(M,i=>{e(C)&&i(I)})}var ae=c(M,2);{var he=i=>{var r=Y(),h=$(r);Je(h,()=>e(A),x=>{var E=Y(),Z=$(E);{var se=F=>{Ge(F,{randomMode:!0,onComplete:K,get chordType(){return e(t).chordType},get inversion(){return e(t).inversion},get voicing(){return e(t).voicing}})},ge=F=>{var oe=Y(),pe=$(oe);{var xe=J=>{Le(J,{randomMode:!0,onComplete:K,get scaleMode(){return e(v)[Math.floor(Math.random()*e(v).length)]},sequentialMode:Math.random()>.5})},be=J=>{var re=Y(),me=$(re);{var ye=te=>{Ke(te,{randomMode:!0,onComplete:K,get inversion(){return e(t).inversion},get voicing(){return e(t).voicing}})};D(me,te=>{e(t).type==="II-V-I"&&te(ye)},!0)}b(J,re)};D(pe,J=>{e(t).type==="scale"?J(xe):J(be,!1)},!0)}b(F,oe)};D(Z,F=>{e(t).type==="chord"?F(se):F(ge,!1)})}b(x,E)}),b(i,r)},_e=i=>{var r=da();b(i,r)};D(ae,i=>{e(t)?i(he):i(_e,!1)})}s(R),b(u,R),ie()}ne(["click"]);export{ya as component};
