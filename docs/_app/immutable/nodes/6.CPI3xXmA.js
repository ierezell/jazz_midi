import"../chunks/CWj6FrbW.js";import{d as Qe,o as Ue,s as f}from"../chunks/C9uxT11M.js";import{p as We,o as P,q as Xe,f as p,B as Ze,s as o,d as r,t as I,k as e,b as c,c as Le,v as u,$ as et,r as s,w as i,x as be,a as _e,y as tt}from"../chunks/D5zBHTIm.js";import{i as V}from"../chunks/yfkNQNHN.js";import{e as oe,R as st,i as le,A as at,g as rt,M as H,c as ve,N as B}from"../chunks/CXyIVaVK.js";import{b as ot,e as lt,o as vt,D as it,a as fe,S as nt,I as ke,c as dt,s as gt}from"../chunks/Ckcloi-B.js";var ct=p('<meta name="description" content="Practice jazz ii-V-I progressions"/>'),ut=p('<button class="debug-toggle svelte-1eg5vg2">ðŸŽ¹ Enable Computer Keyboard</button> <p class="keyboard-hint svelte-1eg5vg2">Connect a MIDI keyboard or enable computer keyboard to play</p>',1),pt=p('<div class="keyboard-instructions svelte-1eg5vg2"><p class="svelte-1eg5vg2"><strong>ðŸŽ¹ Computer Keyboard Controls Active!</strong></p> <p class="svelte-1eg5vg2">Use your computer keyboard to play: <kbd class="svelte-1eg5vg2">Z</kbd><kbd class="svelte-1eg5vg2">X</kbd><kbd class="svelte-1eg5vg2">C</kbd><kbd class="svelte-1eg5vg2">V</kbd><kbd class="svelte-1eg5vg2">B</kbd><kbd class="svelte-1eg5vg2">N</kbd><kbd class="svelte-1eg5vg2">M</kbd> for white keys</p> <p class="svelte-1eg5vg2"><kbd class="svelte-1eg5vg2">S</kbd><kbd class="svelte-1eg5vg2">D</kbd><kbd class="svelte-1eg5vg2">G</kbd><kbd class="svelte-1eg5vg2">H</kbd><kbd class="svelte-1eg5vg2">J</kbd> for black keys â€¢ <kbd class="svelte-1eg5vg2">Q</kbd><kbd class="svelte-1eg5vg2">W</kbd><kbd class="svelte-1eg5vg2">E</kbd><kbd class="svelte-1eg5vg2">R</kbd><kbd class="svelte-1eg5vg2">T</kbd> for higher octave</p></div>'),ht=p("<option> </option>"),mt=p('<div class="arrow svelte-1eg5vg2">â†’</div>'),bt=p('<div><div class="chord-roman svelte-1eg5vg2"> </div> <div class="chord-symbol svelte-1eg5vg2"> </div></div> <!>',1),_t=p('<span class="note-name svelte-1eg5vg2"> </span>'),ft=p('<div class="hint-container note-names-hint svelte-1eg5vg2"><h3 class="svelte-1eg5vg2"> </h3> <div class="note-names svelte-1eg5vg2"></div></div>'),kt=p('<div class="hint-container keyboard-hint svelte-1eg5vg2"><h3 class="svelte-1eg5vg2"> </h3> <!></div>'),yt=p('<p class="error-count svelte-1eg5vg2"> </p>'),Mt=p('<div><p class="feedback-message svelte-1eg5vg2"> </p> <!></div>'),Nt=p('<div class="exercise-container svelte-1eg5vg2"><div class="progression-display svelte-1eg5vg2"><h2 class="progression-name svelte-1eg5vg2"> </h2> <div class="chord-progression svelte-1eg5vg2"></div></div> <div class="current-chord-display svelte-1eg5vg2"><h3 class="svelte-1eg5vg2">Current Chord: <span class="chord-highlight svelte-1eg5vg2"> </span></h3></div> <div class="score-container svelte-1eg5vg2"><h3 class="svelte-1eg5vg2">Musical Score - Current Chord</h3> <!></div> <!> <!> <div class="input-container svelte-1eg5vg2"><h3 class="svelte-1eg5vg2">Your Input</h3> <!></div> <!></div>'),Ct=p('<div class="placeholder-container svelte-1eg5vg2"><p class="svelte-1eg5vg2">Please select a key to begin practicing ii-V-I progressions.</p></div>'),It=p('<main class="svelte-1eg5vg2"><!> <div class="page-header svelte-1eg5vg2"><h1 class="svelte-1eg5vg2">ii-V-I Progressions</h1> <p class="subtitle svelte-1eg5vg2"> </p> <!></div> <div class="controls-container svelte-1eg5vg2"><div class="control-group svelte-1eg5vg2"><label for="note-select" class="svelte-1eg5vg2">Key:</label> <select id="note-select" class="svelte-1eg5vg2"><option>--Choose a Key--</option><!></select></div> <button class="reset-btn svelte-1eg5vg2">Reset Progression</button></div> <!></main>');function Dt(ye,Me){We(Me,!0);let S=P(Xe([])),Ne=i(()=>e(S).map(t=>t.noteNumber)),Q,R=P("C"),x=P(0),A=P(0),Ce=i(()=>e(A)>=3),Ie=i(()=>e(A)>=6),k=P(!1),$,q=null,j=i(()=>e(R)+"4"),xe=i(()=>B[e(j)]+2),Ae=i(()=>B[e(j)]+7),$e=i(()=>B[e(j)]);function ie(){if(u(k,!e(k)),e(k)&&!$){const t=dt("Virtual Debug Keyboard");$=t.getVirtualInput(),q=gt($);const a=Array.from(t.inputs.values())[0];a&&(a.onmidimessage=ne)}else!e(k)&&q&&(q(),q=null,$&&$.releaseAllKeys())}let M=i(()=>ve(e(xe),"min7")),N=i(()=>ve(e(Ae),"7")),C=i(()=>ve(e($e),"maj7")),O=i(()=>[{name:"ii7",chord:e(M),notes:[e(M).root,e(M).third,e(M).fifth,e(M).seventh].filter(t=>t!=null),noteNames:[e(M).root,e(M).third,e(M).fifth,e(M).seventh].filter(t=>t!=null).map(t=>H[t].slice(0,-1)+"4")},{name:"V7",chord:e(N),notes:[e(N).root,e(N).third,e(N).fifth,e(N).seventh].filter(t=>t!=null),noteNames:[e(N).root,e(N).third,e(N).fifth,e(N).seventh].filter(t=>t!=null).map(t=>H[t].slice(0,-1)+"4")},{name:"Imaj7",chord:e(C),notes:[e(C).root,e(C).third,e(C).fifth,e(C).seventh].filter(t=>t!=null),noteNames:[e(C).root,e(C).third,e(C).fifth,e(C).seventh].filter(t=>t!=null).map(t=>H[t].slice(0,-1)+"4")}]),g=i(()=>e(O)[e(x)]),y=[],h=P(""),z=null,T=null;function ne(t){const a=rt(t);a&&(a.type==="on"?(u(S,[a,...e(S)],!0),y.push(a.noteNumber),y=[...new Set(y)],y.every(d=>e(g).notes.includes(d))?y.length===e(g).notes.length?(e(x)===2?(u(h,"Amazing! You completed the ii-V-I progression! ðŸŽ‰"),u(x,0),u(A,0)):(u(h,`Great! Moving to ${e(O)[e(x)+1].name}`),be(x)),T&&T.play(),y=[]):u(h,`Good! ${e(g).notes.length-y.length} more note${e(g).notes.length-y.length>1?"s":""} for ${e(g).name}`):(be(A),u(h,`Incorrect notes for ${e(g).name}. Try again! (Attempt ${e(A)})`),z&&z.play(),y=[])):u(S,e(S).filter(d=>d.noteFullName!==a.noteFullName),!0))}function de(){u(A,0),y=[],u(h,""),u(S,[],!0),u(x,0)}Ue(async()=>{z=new Audio(lt),z.volume=.5,z.loop=!1,T=new Audio(vt),T.volume=.5,T.loop=!1;try{Q=await st(),console.log("Two-Five-One MIDI Access obtained:",Q),Q.inputs.forEach(a=>{a.onmidimessage=ne})}catch(t){console.error("Failed to obtain MIDI Access:",t)}});var U=It();Ze(t=>{var a=ct();et.title="Two Five Ones",c(t,a)});var ge=r(U);{var we=t=>{it(t,{get virtualMidi(){return $},get debugMode(){return e(k)},onToggleDebugMode:ie})};V(ge,t=>{e(k)&&t(we)})}var W=o(ge,2),X=o(r(W),2),Ke=r(X);s(X);var Ve=o(X,2);{var De=t=>{var a=ut(),d=_e(a);d.__click=ie,tt(2),c(t,a)},Se=t=>{var a=pt();c(t,a)};V(Ve,t=>{e(k)?t(Se,!1):t(De)})}s(W);var Z=o(W,2),L=r(Z),Y=o(r(L),2);Y.__change=de;var ee=r(Y);ee.value=ee.__value="";var Pe=o(ee);oe(Pe,17,()=>at,le,(t,a)=>{var d=ht(),E=r(d);s(d);var J={};I(()=>{f(E,`${e(a)??""} Major`),J!==(J=e(a))&&(d.value=(d.__value=e(a))??"")}),c(t,d)}),s(Y),s(L);var Re=o(L,2);Re.__click=de,s(Z);var je=o(Z,2);{var ze=t=>{var a=Nt(),d=r(a),E=r(d),J=r(E);s(E);var ce=o(E,2);oe(ce,21,()=>e(O),le,(v,l,n)=>{var m=bt(),b=_e(m);let w;var D=r(b),_=r(D,!0);s(D);var K=o(D,2),F=r(K);s(K),s(b);var Ye=o(b,2);{var Je=G=>{var re=mt();c(G,re)};V(Ye,G=>{n<e(O).length-1&&G(Je)})}I((G,re)=>{w=fe(b,1,"chord-step svelte-1eg5vg2",null,w,G),f(_,e(l).name),f(F,`${re??""}${e(l).name==="ii7"?"m7":e(l).name==="V7"?"7":"maj7"}`)},[()=>({active:n===e(x),completed:n<e(x)}),()=>H[e(l).notes[0]].slice(0,-1)]),c(v,m)}),s(ce),s(d);var te=o(d,2),ue=r(te),pe=o(r(ue)),Ee=r(pe,!0);s(pe),s(ue),s(te);var se=o(te,2),Fe=o(r(se),2);{let v=i(()=>H[e(g).notes[0]].slice(0,-1)),l=i(()=>[e(g).noteNames.map(m=>m.replace("4","3"))]),n=i(()=>[e(g).noteNames]);nt(Fe,{get selectedNote(){return e(v)},get leftHand(){return e(l)},get rightHand(){return e(n)}})}s(se);var he=o(se,2);{var Ge=v=>{var l=ft(),n=r(l),m=r(n);s(n);var b=o(n,2);oe(b,21,()=>e(g).noteNames,le,(w,D)=>{var _=_t(),K=r(_,!0);s(_),I(F=>f(K,F),[()=>e(D).slice(0,-1)]),c(w,_)}),s(b),s(l),I(()=>f(m,`ðŸ’¡ Hint: Note Names for ${e(g).name??""}`)),c(v,l)};V(he,v=>{e(Ce)&&v(Ge)})}var me=o(he,2);{var He=v=>{var l=kt(),n=r(l),m=r(n);s(n);var b=o(n,2);{let w=i(()=>B[e(j)]+11);ke(b,{get midiNotes(){return e(g).notes},get middleC(){return e(w)},octaves:2,get virtualMidi(){return $},get debugMode(){return e(k)}})}s(l),I(()=>f(m,`ðŸ’¡ Hint: Keyboard Reference for ${e(g).name??""}`)),c(v,l)};V(me,v=>{e(Ie)&&v(He)})}var ae=o(me,2),Be=o(r(ae),2);{let v=i(()=>B[e(j)]+11);ke(Be,{get midiNotes(){return e(Ne)},get middleC(){return e(v)},octaves:2,get virtualMidi(){return $},get debugMode(){return e(k)}})}s(ae);var qe=o(ae,2);{var Oe=v=>{var l=Mt();let n;var m=r(l),b=r(m,!0);s(m);var w=o(m,2);{var D=_=>{var K=yt(),F=r(K);s(K),I(()=>f(F,`Mistakes: ${e(A)??""}/6 (hints unlock at 3 and 6 mistakes)`)),c(_,K)};V(w,_=>{e(A)>0&&!e(h).includes("Amazing")&&!e(h).includes("Great!")&&_(D)})}s(l),I(_=>{n=fe(l,1,"feedback-container svelte-1eg5vg2",null,n,_),f(b,e(h))},[()=>({success:e(h).includes("Amazing")||e(h).includes("Great!"),error:e(h).includes("Incorrect")})]),c(v,l)};V(qe,v=>{e(h)&&v(Oe)})}s(a),I(()=>{f(J,`${e(R)??""} Major ii-V-I`),f(Ee,e(g).name)}),c(t,a)},Te=t=>{var a=Ct();c(t,a)};V(je,t=>{e(R)?t(ze):t(Te,!1)})}s(U),I(()=>f(Ke,`Practice the fundamental jazz chord progression${e(k)?" with computer keyboard controls":""}`)),ot(Y,()=>e(R),t=>u(R,t)),c(ye,U),Le()}Qe(["click","change"]);export{Dt as component};
