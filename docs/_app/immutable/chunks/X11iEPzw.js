import{E as y,F as ve,G as q,A as w,H as Ae,I as be,k as $,J as he,K as de,L as De,M as j,N as V,O as x,P as Ce,Q as Ee,R as U,S as Ge,C as oe,T as z,U as me,V as M,W as ee,X as Fe,Y as g,Z as ae,_ as _e,$ as H,a0 as Be,a1 as Y,a2 as re,a3 as Ne,a4 as pe,a5 as Ie,a6 as we,a7 as Se,a8 as ne,a9 as Te,aa as xe}from"./CiAnzwjR.js";function Le(e,r){return r}function Re(e,r,a){for(var t=e.items,l=[],u=r.length,f=0;f<u;f++)pe(r[f].e,l,!0);var d=u>0&&l.length===0&&a!==null;if(d){var b=a.parentNode;Ie(b),b.append(a),t.clear(),N(e,r[0].prev,r[u-1].next)}we(l,()=>{for(var E=0;E<u;E++){var h=r[E];d||(t.delete(h.k),N(e,h.prev,h.next)),re(h.e,!d)}})}function qe(e,r,a,t,l,u=null){var f=e,d={flags:r,items:new Map,first:null},b=(r&ne)!==0;if(b){var E=e;f=w?q(Ae(E)):E.appendChild(y())}w&&be();var h=null,o=!1,F=new Map,v=he(()=>{var D=a();return Fe(D)?D:D==null?[]:ee(D)}),s,A;function c(){ke(A,s,d,F,f,l,r,t,a),u!==null&&(s.length===0?h?ae(h):h=U(()=>u(f)):h!==null&&_e(h,()=>{h=null}))}ve(()=>{A??(A=Se),s=$(v);var D=s.length;if(o&&D===0)return;o=D===0;let m=!1;if(w){var _=de(f)===De;_!==(D===0)&&(f=j(),q(f),V(!1),m=!0)}if(w){for(var p=null,C,n=0;n<D;n++){if(x.nodeType===Ce&&x.data===Ee){f=x,m=!0,V(!1);break}var i=s[n],G=t(i,n);C=X(x,d,p,null,i,G,n,l,r,a),d.items.set(G,C),p=C}D>0&&q(j())}if(w)D===0&&u&&(h=U(()=>u(f)));else if(Ge()){var S=new Set,R=oe;for(n=0;n<D;n+=1){i=s[n],G=t(i,n);var I=d.items.get(G)??F.get(G);I?(r&(H|g))!==0&&se(I,i,n,r):(C=X(null,d,null,null,i,G,n,l,r,a,!0),F.set(G,C)),S.add(G)}for(const[B,k]of d.items)S.has(B)||R.skipped_effects.add(k.e);R.add_callback(c)}else c();m&&V(!0),$(v)}),w&&(f=x)}function ke(e,r,a,t,l,u,f,d,b){var J,K,Q,W;var E=(f&xe)!==0,h=(f&(H|g))!==0,o=r.length,F=a.items,v=a.first,s=v,A,c=null,D,m=[],_=[],p,C,n,i;if(E)for(i=0;i<o;i+=1)p=r[i],C=d(p,i),n=F.get(C),n!==void 0&&((J=n.a)==null||J.measure(),(D??(D=new Set)).add(n));for(i=0;i<o;i+=1){if(p=r[i],C=d(p,i),n=F.get(C),n===void 0){var G=t.get(C);if(G!==void 0){t.delete(C),F.set(C,G);var S=c?c.next:s;N(a,c,G),N(a,G,S),P(G,S,l),c=G}else{var R=s?s.e.nodes_start:l;c=X(R,a,c,c===null?a.first:c.next,p,C,i,u,f,b)}F.set(C,c),m=[],_=[],s=c.next;continue}if(h&&se(n,p,i,f),(n.e.f&Y)!==0&&(ae(n.e),E&&((K=n.a)==null||K.unfix(),(D??(D=new Set)).delete(n))),n!==s){if(A!==void 0&&A.has(n)){if(m.length<_.length){var I=_[0],B;c=I.prev;var k=m[0],O=m[m.length-1];for(B=0;B<m.length;B+=1)P(m[B],I,l);for(B=0;B<_.length;B+=1)A.delete(_[B]);N(a,k.prev,O.next),N(a,c,k),N(a,O,I),s=I,c=O,i-=1,m=[],_=[]}else A.delete(n),P(n,s,l),N(a,n.prev,n.next),N(a,n,c===null?a.first:c.next),N(a,c,n),c=n;continue}for(m=[],_=[];s!==null&&s.k!==C;)(s.e.f&Y)===0&&(A??(A=new Set)).add(s),_.push(s),s=s.next;if(s===null)continue;n=s}m.push(n),c=n,s=n.next}if(s!==null||A!==void 0){for(var T=A===void 0?[]:ee(A);s!==null;)(s.e.f&Y)===0&&T.push(s),s=s.next;var L=T.length;if(L>0){var ue=(f&ne)!==0&&o===0?l:null;if(E){for(i=0;i<L;i+=1)(Q=T[i].a)==null||Q.measure();for(i=0;i<L;i+=1)(W=T[i].a)==null||W.fix()}Re(a,T,ue)}}E&&Te(()=>{var Z;if(D!==void 0)for(n of D)(Z=n.a)==null||Z.apply()}),e.first=a.first&&a.first.e,e.last=c&&c.e;for(var ce of t.values())re(ce.e);t.clear()}function se(e,r,a,t){(t&H)!==0&&z(e.v,r),(t&g)!==0?z(e.i,a):e.i=a}function X(e,r,a,t,l,u,f,d,b,E,h){var o=(b&H)!==0,F=(b&Be)===0,v=o?F?me(l,!1,!1):M(l):l,s=(b&g)===0?f:M(f),A={i:s,v,k:u,a:null,e:null,prev:a,next:t};try{if(e===null){var c=document.createDocumentFragment();c.append(e=y())}return A.e=U(()=>d(e,v,s,E),w),A.e.prev=a&&a.e,A.e.next=t&&t.e,a===null?h||(r.first=A):(a.next=A,a.e.next=A.e),t!==null&&(t.prev=A,t.e.prev=A.e),A}finally{}}function P(e,r,a){for(var t=e.next?e.next.e.nodes_start:a,l=r?r.e.nodes_start:a,u=e.e.nodes_start;u!==null&&u!==t;){var f=Ne(u);l.before(u),u=f}}function N(e,r,a){r===null?e.first=a:(r.next=a,r.e.next=a&&a.e),a!==null&&(a.prev=r,a.e.prev=r&&r.e)}const te={24:"C0",25:"C#0",26:"D0",27:"D#0",28:"E0",29:"F0",30:"F#0",31:"G0",32:"G#0",33:"A0",34:"A#0",35:"B0",36:"C1",37:"C#1",38:"D1",39:"D#1",40:"E1",41:"F1",42:"F#1",43:"G1",44:"G#1",45:"A1",46:"A#1",47:"B1",48:"C2",49:"C#2",50:"D2",51:"D#2",52:"E2",53:"F2",54:"F#2",55:"G2",56:"G#2",57:"A2",58:"A#2",59:"B2",60:"C3",61:"C#3",62:"D3",63:"D#3",64:"E3",65:"F3",66:"F#3",67:"G3",68:"G#3",69:"A3",70:"A#3",71:"B3",72:"C4",73:"C#4",74:"D4",75:"D#4",76:"E4",77:"F4",78:"F#4",79:"G4",80:"G#4",81:"A4",82:"A#4",83:"B4",84:"C5",85:"C#5",86:"D5",87:"D#5",88:"E5",89:"F5",90:"F#5",91:"G5",92:"G#5",93:"A5",94:"A#5",95:"B5",96:"C6",97:"C#6",98:"D6",99:"D#6",100:"E6",101:"F6",102:"F#6",103:"G6",104:"G#6",105:"A6",106:"A#6",107:"B6",108:"C7",109:"C#7",110:"D7",111:"D#7",112:"E7",113:"F7",114:"F#7",115:"G7",116:"G#7",117:"A7",118:"A#7",119:"B7",120:"C8",121:"C#8",122:"D8",123:"D#8",124:"E8",125:"F8",126:"F#8",127:"G8",128:"G#8"},fe={C0:24,"C#0":25,Db0:25,D0:26,"D#0":27,Eb0:27,E0:28,F0:29,"F#0":30,Gb0:30,G0:31,"G#0":32,Ab0:32,A0:33,"A#0":34,Bb0:34,B0:35,C1:36,"C#1":37,Db1:37,D1:38,"D#1":39,Eb1:39,E1:40,F1:41,"F#1":42,Gb1:42,G1:43,"G#1":44,Ab1:44,A1:45,"A#1":46,Bb1:46,B1:47,C2:48,"C#2":49,Db2:49,D2:50,"D#2":51,Eb2:51,E2:52,F2:53,"F#2":54,Gb2:54,G2:55,"G#2":56,Ab2:56,A2:57,"A#2":58,Bb2:58,B2:59,C3:60,"C#3":61,Db3:61,D3:62,"D#3":63,Eb3:63,E3:64,F3:65,"F#3":66,Gb3:66,G3:67,"G#3":68,Ab3:68,A3:69,"A#3":70,Bb3:70,B3:71,C4:72,"C#4":73,Db4:73,D4:74,"D#4":75,Eb4:75,E4:76,F4:77,"F#4":78,Gb4:78,G4:79,"G#4":80,Ab4:80,A4:81,"A#4":82,Bb4:82,B4:83,C5:84,"C#5":85,Db5:85,D5:86,"D#5":87,Eb5:87,E5:88,F5:89,"F#5":90,Gb5:90,G5:91,"G#5":92,Ab5:92,A5:93,"A#5":94,Bb5:94,B5:95,C6:96,"C#6":97,Db6:97,D6:98,"D#6":99,Eb6:99,E6:100,F6:101,"F#6":102,Gb6:102,G6:103,"G#6":104,Ab6:104,A6:105,"A#6":106,Bb6:106,B6:107,C7:108,"C#7":109,Db7:109,D7:110,"D#7":111,Eb7:111,E7:112,F7:113,"F#7":114,Gb7:114,G7:115,"G#7":116,Ab7:116,A7:117,"A#7":118,Bb7:118,B7:119,C8:120,"C#8":121,Db8:121,D8:122,"D#8":123,Eb8:123,E8:124,F8:125,"F#8":126,Gb8:126,G8:127,"G#8":128},ie=["C","C#","Db","D","D#","Eb","E","F","F#","Gb","G","G#","Ab","A","A#","Bb","B"],Ve=["major","minor","maj7","min7","7","diminished","augmented","sus2","sus4"];function le(e,r){if(e<24||e>127)throw new Error("Midi note out of range (24-127)");let a=[e],t=e,l=Array(10).fill(r).flat();for(const f of l){if(t=t+f,t>127)break;a.push(t)}return a.map(f=>te[f])}const ge=(e,r,a)=>{switch(r){case 0:return{root:e[0],third:e[1],fifth:e[2],inversion:0,chordType:a};case 1:return{root:e[1],third:e[2],fifth:e[0]+12,inversion:1,chordType:a};case 2:return{root:e[2]-12,third:e[0],fifth:e[1],inversion:2,chordType:a}}},He=(e,r,a)=>{switch(r){case 0:return{root:e[0],third:e[1],fifth:e[2],seventh:e[3],inversion:0,chordType:a};case 1:return{root:e[1],third:e[2],fifth:e[3],seventh:e[0]+12,inversion:1,chordType:a};case 2:return{root:e[2]-12,third:e[3]-12,fifth:e[0],seventh:e[1],inversion:2,chordType:a};case 3:return{root:e[3]-12,third:e[0],fifth:e[1],seventh:e[2],inversion:3,chordType:a}}},Ye=(e,r,a=0)=>{const t=e+2,l=e+3,u=e+4,f=e+5,d=e+6,b=e+7,E=e+8,h=e+9,o=e+10,F=e+11;let v=[];switch(r){case"major":v=[e,u,b];break;case"minor":v=[e,l,b];break;case"maj7":v=[e,u,b,F];break;case"min7":v=[e,l,b,o];break;case"7":v=[e,u,b,o];break;case"diminished":v=[e,l,d,h];break;case"augmented":v=[e,u,E,o];break;case"sus2":v=[e,t,b,o];break;case"sus4":v=[e,f,b,o];break;default:v=[e]}return v.length===3?ge(v,a,r):He(v,a,r)},Pe=ie.reduce((e,r)=>(e[r]=le(fe[r+"0"],[2,2,1,2,2,2,1]),e),{}),Ue=ie.reduce((e,r)=>(e[r]=le(fe[r+"0"],[2,1,2,2,1,2,1]),e),{});async function Xe(){let e=await navigator.requestMIDIAccess({sysex:!1});return console.log("MIDI Access obtained."),e}function Je(e){return te[e]}export{ie as A,te as M,fe as N,Xe as R,Pe as a,Ve as b,Ye as c,Ue as d,qe as e,Le as i,Je as m};
