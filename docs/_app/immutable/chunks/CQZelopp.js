import{u as n}from"./DiVgXp1T.js";class a{static instance;units=[{id:"basics-scales",title:"Major Scales",description:"Start with the building blocks of jazz: The Major Scale.",status:"active",color:"bg-blue-500",lessons:[{id:"c-major-scale",title:"C Major Scale",type:"exercise",path:"/exercises/scales",params:{root:"C",mode:"Maj"},completed:!1,stars:0},{id:"g-major-scale",title:"G Major Scale",type:"exercise",path:"/exercises/scales",params:{root:"G",mode:"Maj"},completed:!1,stars:0},{id:"f-major-scale",title:"F Major Scale",type:"exercise",path:"/exercises/scales",params:{root:"F",mode:"Maj"},completed:!1,stars:0}]},{id:"basics-chords",title:"Basic Chords",description:"Learn the fundamental 7th chords.",status:"locked",color:"bg-green-500",lessons:[{id:"c-maj7",title:"C Major 7",type:"exercise",path:"/exercises/chords",params:{root:"C",quality:"maj7"},completed:!1,stars:0},{id:"g-dom7",title:"G Dominant 7",type:"exercise",path:"/exercises/chords",params:{root:"G",quality:"dom7"},completed:!1,stars:0},{id:"d-min7",title:"D Minor 7",type:"exercise",path:"/exercises/chords",params:{root:"D",quality:"min7"},completed:!1,stars:0}]},{id:"ii-v-i",title:"II-V-I Progression",description:"The most important progression in Jazz.",status:"locked",color:"bg-purple-500",lessons:[{id:"ii-v-i-c",title:"II-V-I in C",type:"exercise",path:"/exercises/two_five_ones",params:{key:"C"},completed:!1,stars:0}]}];constructor(){this.loadProgress()}static getInstance(){return a.instance||(a.instance=new a),a.instance}getUnits(){return this.units}getUnit(t){return this.units.find(e=>e.id===t)}completeLesson(t,e,s=3){const r=this.units.find(c=>c.id===t);if(!r)return;const i=r.lessons.find(c=>c.id===e);if(!i)return;const o=!i.completed;i.completed=!0,i.stars=Math.max(i.stars,s),this.checkUnitCompletion(r),this.saveProgress(),o&&n.recordExerciseResult({exerciseId:e,exerciseType:"scale",success:!0,accuracy:100,score:100,timeElapsed:0,mistakes:0,timestamp:new Date})}getStats(){const t=n.getStatistics(),e=n.getProfile();return{level:e.level,xp:e.experiencePoints,streak:t.currentStreak}}checkUnitCompletion(t){t.lessons.every(s=>s.completed)&&(t.status="completed",this.unlockNextUnit(t.id))}unlockNextUnit(t){const e=this.units.findIndex(s=>s.id===t);if(e!==-1&&e<this.units.length-1){const s=this.units[e+1];s.status==="locked"&&(s.status="active")}}saveProgress(){if(typeof localStorage>"u")return;const t=this.units.map(e=>({id:e.id,status:e.status,lessons:e.lessons.map(s=>({id:s.id,completed:s.completed,stars:s.stars}))}));localStorage.setItem("journey_progress",JSON.stringify(t))}loadProgress(){if(typeof localStorage>"u")return;const t=localStorage.getItem("journey_progress");if(t)try{JSON.parse(t).forEach(s=>{const r=this.units.find(i=>i.id===s.id);r&&(r.status=s.status,s.lessons.forEach(i=>{const o=r.lessons.find(c=>c.id===i.id);o&&(o.completed=i.completed,o.stars=i.stars)}))})}catch(e){console.error("Failed to load journey progress",e)}}getLessonUrl(t,e){const s=new URLSearchParams;return e.params&&Object.entries(e.params).forEach(([r,i])=>s.append(r,i)),s.append("unitId",t.id),s.append("lessonId",e.id),`${e.path}?${s.toString()}`}}const d=a.getInstance();export{d as j};
