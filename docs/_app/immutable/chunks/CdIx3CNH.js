import{u as a}from"./v5OKH5Ze.js";class l{static instance;units=[{id:"level-0",title:"Level 0: Foundations",description:"Learn the basics: Reading, Names, Intervals, and Flash Cards.",status:"active",color:"bg-blue-500",lessons:[{id:"l0-c-scale",title:"C Major Scale",type:"exercise",path:"/exercises/scales",params:{root:"C",mode:"Maj"},completed:!1,stars:0,perfectCompletions:0,requiredPerfectCompletions:3},{id:"l0-notes",title:"Note Identification",type:"exercise",path:"/exercises/names",completed:!1,stars:0,perfectCompletions:0,requiredPerfectCompletions:5},{id:"l0-dexterity",title:"Finger Dexterity",type:"exercise",path:"/exercises/dexterity",completed:!1,stars:0,perfectCompletions:0,requiredPerfectCompletions:3},{id:"l0-intervals",title:"Intervals",type:"exercise",path:"/exercises/intervals",completed:!1,stars:0,perfectCompletions:0,requiredPerfectCompletions:3},{id:"l0-flashcards",title:"Flash Cards",type:"exercise",path:"/exercises/flashcards",completed:!1,stars:0,perfectCompletions:0,requiredPerfectCompletions:5}]},{id:"level-1",title:"Level 1: Major Scales (Slow)",description:"C, G, and F Major Scales at a slow tempo.",status:"locked",color:"bg-green-500",lessons:[{id:"l1-c-scale",title:"C Major Scale (60 BPM)",type:"exercise",path:"/exercises/scales",params:{root:"C",mode:"Maj",bpm:"60"},completed:!1,stars:0,perfectCompletions:0,requiredPerfectCompletions:3,bpm:60},{id:"l1-g-scale",title:"G Major Scale (60 BPM)",type:"exercise",path:"/exercises/scales",params:{root:"G",mode:"Maj",bpm:"60"},completed:!1,stars:0,perfectCompletions:0,requiredPerfectCompletions:3,bpm:60},{id:"l1-f-scale",title:"F Major Scale (60 BPM)",type:"exercise",path:"/exercises/scales",params:{root:"F",mode:"Maj",bpm:"60"},completed:!1,stars:0,perfectCompletions:0,requiredPerfectCompletions:3,bpm:60}]},{id:"level-2",title:"Level 2: Medium Tempo & Chords",description:"Scales at medium tempo and basic chords.",status:"locked",color:"bg-yellow-500",lessons:[{id:"l2-c-scale",title:"C Major Scale (90 BPM)",type:"exercise",path:"/exercises/scales",params:{root:"C",mode:"Maj",bpm:"90"},completed:!1,stars:0,perfectCompletions:0,requiredPerfectCompletions:3,bpm:90},{id:"l2-c-chords",title:"C Major Chords",type:"exercise",path:"/exercises/chords",params:{root:"C",quality:"maj7"},completed:!1,stars:0,perfectCompletions:0,requiredPerfectCompletions:3}]},{id:"level-3",title:"Level 3: Faster & Split Chords",description:"Pick up the pace and learn split chord voicings.",status:"locked",color:"bg-orange-500",lessons:[{id:"l3-c-scale-fast",title:"C Major Scale (120 BPM)",type:"exercise",path:"/exercises/scales",params:{root:"C",mode:"Maj",bpm:"120"},completed:!1,stars:0,perfectCompletions:0,requiredPerfectCompletions:3,bpm:120},{id:"l3-split-chords",title:"Split Chords (1735)",type:"exercise",path:"/exercises/chords",params:{voicing:"1735"},completed:!1,stars:0,perfectCompletions:0,requiredPerfectCompletions:3}]},{id:"level-4",title:"Level 4: II-V-I",description:"Master the II-V-I progression.",status:"locked",color:"bg-red-500",lessons:[{id:"l4-ii-v-i-c",title:"II-V-I in C",type:"exercise",path:"/exercises/two_five_ones",params:{key:"C"},completed:!1,stars:0,perfectCompletions:0,requiredPerfectCompletions:3}]},{id:"level-5",title:"Level 5: Songs",description:"Apply your skills to real jazz standards.",status:"locked",color:"bg-purple-500",lessons:[{id:"l5-autumn-leaves",title:"Autumn Leaves",type:"exercise",path:"/exercises/songs",params:{song:"autumn_leaves"},completed:!1,stars:0,perfectCompletions:0,requiredPerfectCompletions:1}]}];constructor(){this.loadProgress()}static getInstance(){return l.instance||(l.instance=new l),l.instance}getUnits(){return this.units}getUnit(s){return this.units.find(e=>e.id===s)}completeLesson(s,e,t=3){const r=this.units.find(i=>i.id===s);if(!r)return;const o=r.lessons.find(i=>i.id===e);o&&(t===3&&(o.perfectCompletions=(o.perfectCompletions||0)+1),o.perfectCompletions>=o.requiredPerfectCompletions&&(o.completed=!0),o.stars=Math.max(o.stars,t),this.checkUnitCompletion(r),this.saveProgress(),a.recordExerciseResult({exerciseId:e,exerciseType:"scale",success:!0,accuracy:t===3?100:t===2?80:50,score:t*33,timeElapsed:0,mistakes:t===3?0:3,timestamp:new Date}))}getStats(){const s=a.getStatistics(),e=a.getProfile();return{level:e.level,xp:e.experiencePoints,streak:s.currentStreak}}checkUnitCompletion(s){s.lessons.every(t=>t.completed)&&(s.status="completed",this.unlockNextUnit(s.id))}unlockNextUnit(s){const e=this.units.findIndex(t=>t.id===s);if(e!==-1&&e<this.units.length-1){const t=this.units[e+1];t.status==="locked"&&(t.status="active")}}saveProgress(){if(typeof localStorage>"u")return;const s=this.units.map(e=>({id:e.id,status:e.status,lessons:e.lessons.map(t=>({id:t.id,completed:t.completed,stars:t.stars,perfectCompletions:t.perfectCompletions}))}));localStorage.setItem("journey_progress_v2",JSON.stringify(s))}loadProgress(){if(typeof localStorage>"u")return;const s=localStorage.getItem("journey_progress_v2");if(s)try{JSON.parse(s).forEach(t=>{const r=this.units.find(o=>o.id===t.id);r&&(r.status=t.status,t.lessons.forEach(o=>{const i=r.lessons.find(c=>c.id===o.id);i&&(i.completed=o.completed,i.stars=o.stars,i.perfectCompletions=o.perfectCompletions||0)}))})}catch(e){console.error("Failed to load journey progress",e)}}getLessonUrl(s,e){const t=new URLSearchParams;return e.params&&Object.entries(e.params).forEach(([r,o])=>t.append(r,o)),t.append("unitId",s.id),t.append("lessonId",e.id),`${e.path}?${t.toString()}`}getPracticeLesson(s){const e=this.units.find(r=>r.id===s);if(!e)return;const t=e.lessons.filter(r=>(r.perfectCompletions||0)<r.requiredPerfectCompletions);if(t.length>0){const r=Math.floor(Math.random()*t.length);return{unit:e,lesson:t[r]}}if(e.lessons.length>0){const r=e.lessons[Math.floor(Math.random()*e.lessons.length)];return{unit:e,lesson:r}}}}const p=l.getInstance();export{p as j};
