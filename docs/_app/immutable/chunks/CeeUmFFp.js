import{u as p}from"./CZv5_2PD.js";class a{static instance;units=[{id:"level-0",title:"Level 0: Foundations",description:"Learn the basics: Reading, Names, Intervals, and Flash Cards.",status:"active",color:"bg-blue-500",lessons:[{id:"l0-c-scale",title:"C Major Scale",type:"exercise",path:"/exercises/scales",params:{root:"C",mode:"Maj"},completed:!1,stars:0,perfectCompletions:0,requiredPerfectCompletions:3},{id:"l0-notes",title:"Note Identification",type:"exercise",path:"/exercises/flashcards",completed:!1,stars:0,perfectCompletions:0,requiredPerfectCompletions:5},{id:"l0-dexterity",title:"Finger Dexterity",type:"exercise",path:"/exercises/dexterity",completed:!1,stars:0,perfectCompletions:0,requiredPerfectCompletions:3},{id:"l0-intervals",title:"Intervals",type:"exercise",path:"/exercises/intervals",completed:!1,stars:0,perfectCompletions:0,requiredPerfectCompletions:3},{id:"l0-flashcards",title:"Flash Cards",type:"exercise",path:"/exercises/flashcards",completed:!1,stars:0,perfectCompletions:0,requiredPerfectCompletions:5}]},{id:"level-1",title:"Level 1: Major Scales (Slow)",description:"C, G, and F Major Scales at a slow tempo.",status:"locked",color:"bg-green-500",lessons:[{id:"l1-c-scale",title:"C Major Scale (60 BPM)",type:"exercise",path:"/exercises/scales",params:{root:"C",mode:"Maj",bpm:"60"},completed:!1,stars:0,perfectCompletions:0,requiredPerfectCompletions:3,bpm:60},{id:"l1-g-scale",title:"G Major Scale (60 BPM)",type:"exercise",path:"/exercises/scales",params:{root:"G",mode:"Maj",bpm:"60"},completed:!1,stars:0,perfectCompletions:0,requiredPerfectCompletions:3,bpm:60},{id:"l1-f-scale",title:"F Major Scale (60 BPM)",type:"exercise",path:"/exercises/scales",params:{root:"F",mode:"Maj",bpm:"60"},completed:!1,stars:0,perfectCompletions:0,requiredPerfectCompletions:3,bpm:60}]},{id:"level-2",title:"Level 2: Medium Tempo & Chords",description:"Scales at medium tempo and basic chords.",status:"locked",color:"bg-yellow-500",lessons:[{id:"l2-c-scale",title:"C Major Scale (90 BPM)",type:"exercise",path:"/exercises/scales",params:{root:"C",mode:"Maj",bpm:"90"},completed:!1,stars:0,perfectCompletions:0,requiredPerfectCompletions:3,bpm:90},{id:"l2-c-chords",title:"C Major Chords",type:"exercise",path:"/exercises/chords",params:{root:"C",quality:"maj7"},completed:!1,stars:0,perfectCompletions:0,requiredPerfectCompletions:3}]},{id:"level-3",title:"Level 3: Faster & Split Chords",description:"Pick up the pace and learn split chord voicings.",status:"locked",color:"bg-orange-500",lessons:[{id:"l3-c-scale-fast",title:"C Major Scale (120 BPM)",type:"exercise",path:"/exercises/scales",params:{root:"C",mode:"Maj",bpm:"120"},completed:!1,stars:0,perfectCompletions:0,requiredPerfectCompletions:3,bpm:120},{id:"l3-split-chords",title:"Split Chords (1735)",type:"exercise",path:"/exercises/chords",params:{voicing:"1735"},completed:!1,stars:0,perfectCompletions:0,requiredPerfectCompletions:3}]},{id:"level-4",title:"Level 4: II-V-I",description:"Master the II-V-I progression.",status:"locked",color:"bg-red-500",lessons:[{id:"l4-ii-v-i-c",title:"II-V-I in C",type:"exercise",path:"/exercises/two_five_ones",params:{key:"C"},completed:!1,stars:0,perfectCompletions:0,requiredPerfectCompletions:3}]},{id:"level-5",title:"Level 5: Songs",description:"Apply your skills to real jazz standards.",status:"locked",color:"bg-purple-500",lessons:[{id:"l5-autumn-leaves",title:"Autumn Leaves",type:"exercise",path:"/exercises/songs",params:{song:"autumn_leaves"},completed:!1,stars:0,perfectCompletions:0,requiredPerfectCompletions:1}]}];constructor(){this.loadProgress()}static getInstance(){return a.instance||(a.instance=new a),a.instance}getUnits(){return this.units}getUnit(r){return this.units.find(t=>t.id===r)}completeLesson(r,t,e=3){const i=this.units.find(o=>o.id===r);if(!i)return;const s=i.lessons.find(o=>o.id===t);s&&(e===3&&(s.perfectCompletions=(s.perfectCompletions||0)+1),s.perfectCompletions>=s.requiredPerfectCompletions&&(s.completed=!0),s.stars=Math.max(s.stars,e),this.checkUnitCompletion(i),this.saveProgress(),p.recordExerciseResult({exerciseId:t,exerciseType:"scale",success:!0,accuracy:e===3?100:e===2?80:50,score:e*33,timeElapsed:0,mistakes:e===3?0:3,timestamp:new Date}))}getStats(){const r=p.getStatistics(),t=p.getProfile();return{level:t.level,xp:t.experiencePoints,streak:r.currentStreak}}checkUnitCompletion(r){r.lessons.every(e=>e.completed)&&(r.status="completed",this.unlockNextUnit(r.id))}unlockNextUnit(r){const t=this.units.findIndex(e=>e.id===r);if(t!==-1&&t<this.units.length-1){const e=this.units[t+1];e.status==="locked"&&(e.status="active")}}saveProgress(){if(typeof localStorage>"u")return;const r=this.units.map(t=>({id:t.id,status:t.status,lessons:t.lessons.map(e=>({id:e.id,completed:e.completed,stars:e.stars,perfectCompletions:e.perfectCompletions}))}));localStorage.setItem("journey_progress_v2",JSON.stringify(r))}loadProgress(){if(typeof localStorage>"u")return;const r=localStorage.getItem("journey_progress_v2");if(r)try{JSON.parse(r).forEach(e=>{const i=this.units.find(s=>s.id===e.id);i&&(i.status=e.status,e.lessons.forEach(s=>{const o=i.lessons.find(c=>c.id===s.id);o&&(o.completed=s.completed,o.stars=s.stars,o.perfectCompletions=s.perfectCompletions||0)}))})}catch(t){console.error("Failed to load journey progress",t)}}getLessonUrl(r,t){const e=new URLSearchParams;return t.params&&Object.entries(t.params).forEach(([i,s])=>e.append(i,s)),e.append("unitId",r.id),e.append("lessonId",t.id),`${t.path}?${e.toString()}`}getPracticeLesson(r){const t=this.units.findIndex(l=>l.id===r);if(t===-1)return;const e=this.units.slice(0,t+1),i=this.units[t],s=i.lessons.filter(l=>(l.perfectCompletions||0)<l.requiredPerfectCompletions);if(s.length>0){const l=s[Math.floor(Math.random()*s.length)];return{unit:i,lesson:l}}const o=[];if(e.forEach(l=>{l.lessons.forEach(n=>{(n.perfectCompletions||0)<n.requiredPerfectCompletions&&o.push({unit:l,lesson:n})})}),o.length>0)return o[Math.floor(Math.random()*o.length)];const c=e[Math.floor(Math.random()*e.length)],d=c.lessons[Math.floor(Math.random()*c.lessons.length)];return{unit:c,lesson:d}}}const f=a.getInstance();export{f as j};
